<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta content="Antimatter15" name="Author">
<meta content="AJAX, Animation, DHTML, Web 2.0, Animator, Flash" name="keywords">
<title>Animator</title>
<script src="../lib/prototype.js" type="text/javascript"></script>
<script type="text/javascript">
var canvasNumber=1;
var previousCanvas=0;
var canvasDisplayStyle="";
var canvasIssueResolved=new Boolean();
var AnimationPlay=new Boolean();
var AnimationFramerate=12;
var totalFrames=1;
var canvasHeight=272;
var canvasWidth=480;
var revisionNumber=1;
var animationRevision=new Array();
var animationRevisionURL=new Array();
var lastAnimationURL='';
var replaceEngine='string';
AnimationPlay=true;
canvasIssueResolved=false;
function makeCanvas(){
var canvasString;
canvasString='<div id="richdraw'+canvasNumber+'" style="';
canvasString+='border:1px solid black;position:relative;top:0px'
canvasString+='width:99%;height:99%;background-color:white;'
canvasString+='-moz-user-select:none;display:'+canvasDisplayStyle+'"></div>';
document.getElementById("CanvasContainer").innerHTML+=canvasString;
canvasNumber++;
canvasDisplayStyle="none";
initDraw();
currentCanvas++;
}
function convertVML(s){
parseFloat(s.split(',')[0])
parseFloat(s.split(',')[1])
if(window.ActiveXObject){
var objDom=new ActiveXObject("Microsoft.XMLDOM");
objDom.async="false";
var zVML;
objDom.loadXML(zVML);
}else{
var parser=new DOMParser();
var objDom=parser.parseFromString(zVML,"text/xml");
}
var domTree=objDom.getElementsByTagName('AnimationXML')[0];
objDom.getElementsByTagName('AnimationXML')[0];
for(var zFrames=0;zFrames<objDom.getElementsByTagName('svg').length;zFrames++){
var frameNode=objDom.getElementsByTagName('svg')[zFrames];
for(var zLines=0;zLines<frameNode.getElementsByTagName('line').length;zLines++){
var lineNodes=frameNode.getElementsByTagName('line')[zLines];
var zSVGLine="<line ";
zSVGLine+='x1="'+parseFloat(frameNode.getAttribute("from").split(',')[0])+'" ';
zSVGLine+='y1="'+parseFloat(frameNode.getAttribute("from").split(',')[1])+'" ';
zSVGLine+='x2="'+parseFloat(frameNode.getAttribute("to").split(',')[0])+'" ';
zSVGLine+='y2="'+parseFloat(frameNode.getAttribute("to").split(',')[1])+'" ';
}
for(var zRect=0;zRect<frameNode.getElementsByTagName('rect').length;zRect++){
var rectNodes=frameNode.getElementsByTagName('rect')[z];
frameNode.getAttribute("to")
}
}
}
function makeCanvasFromIE(CanvasId){
var canvasString;
canvasString='<div id="richdraw'+CanvasId+'" style="';
canvasString+='border:1px solid black;position:relative;top:0px'
canvasString+='width:99%;height:99%;background-color:white;'
canvasString+='-moz-user-select:none;display:'+canvasDisplayStyle+'"></div>';
document.getElementById("CanvasContainer").innerHTML+=canvasString;
canvasDisplayStyle="none";
initDraw();
}
function makeCanvasFromId(CanvasId){
var richdrawCanvas=document.createElement('div');
var richdrawCanvasStyle="border:1px solid black;position:relative;"
richdrawCanvasStyle+="top:0px;width:99%;height:99%;background-color:white;"
richdrawCanvasStyle+="-moz-user-select:none;"
richdrawCanvas.setAttribute('id','richdraw'+CanvasId);
richdrawCanvas.setAttribute('style',richdrawCanvasStyle+"display:"+canvasDisplayStyle);
document.getElementById('CanvasContainer').appendChild(richdrawCanvas);
canvasDisplayStyle='none'
initDraw();
}
function setCP(){
canvasHeight=parseInt($('cHeight').value);
canvasWidth=parseInt($('cWidth').value);
$('CanvasContainer').style.height=canvasHeight+'px';
$('CanvasContainer').style.width=canvasWidth+'px';
$('zFlashPreviewDiv').style.height=canvasHeight+'px';
$('zFlashPreviewDiv').style.width=canvasWidth+'px';
}
function setFramerate(){
AnimationFramerate=document.getElementById('cFramerate').value;
}
function genxml(){
$('jsQuery').value=generateAnimationXML();
}
function gencleanxml(){
$('jsQuery').value=decompressxml(compressxml(generateAnimationXML()));
}
function gencxml(){
var zxvlue;
zxvlue=compressxml(generateAnimationXML());
$('jsQuery').value=zxvlue;
}
function decompressxml(pxml){
var zxvlue;
zxvlue=pxml;
zxvlue=replaceDecompressXML(zxvlue);
return zxvlue;
}
function compressxml(pxml){
var zxvlue;
zxvlue=pxml;
zxvlue=replaceCompressXML(zxvlue);
return zxvlue;
}
function generateAnimationXML(){
var zAnimationXML="<AnimationXML>";
for(var pzxy=1;pzxy<=totalFrames;pzxy++){
if(DrawCanvas[pzxy]!=null&&DrawCanvas[pzxy].renderer.getMarkup()!="<svg></svg>"){
var zCurrentAnimationXMLFrame;
zCurrentAnimationXMLFrame=$('richdraw'+pzxy).innerHTML;
if(isIE()==true){
zCurrentAnimationXMLFrame=zCurrentAnimationXMLFrame.replace('<?xml:namespace prefix = v ns = "urn:schemas-microsoft-com:vml" />',"<svg>");
}
zAnimationXML+=zCurrentAnimationXMLFrame;
if(isIE()==true){
zAnimationXML+="</svg>"
}
}else{
if(isKeyframe(pzxy,1)!=false){
zAnimationXML+="<svg></svg>"
}else{
zAnimationXML+='<svg t="f"></svg>'
}
}
}
zAnimationXML+="</AnimationXML>";
var cleanAXML="";
if(isIE()==true){
zAnimationXML=replaceAll('id=shape:','id="shape:',zAnimationXML)
zAnimationXML=replaceAll(" style",'" style',zAnimationXML)
cleanAXML=zAnimationXML;
}else{
cleanAXML=removeUnusedAttributes(zAnimationXML);
}
var finalAXML="";
if(isIE()==true){
finalAXML=convertVML(cleanAXML);
}else{
finalAXML=cleanAXML
}
return finalAXML;
}
function replaceT(findStr,repStr,origStr){
var re=new RegExp(findStr,"g");
return origStr.replace(re,repStr);
}
function convertVML(VMLData){
var qVML=VMLData;
var qSVG="";
qVML=replaceT("v:","",qVML)
qVML=replaceT('id=shape:','id="shape:',qVML)
qVML=replaceT(" style",'" style',qVML)
qVML=replaceT("black","rgb(0,0,0)",qVML)
qVML=replaceT("red","rgb(255,0,0)",qVML)
qVML=replaceT('""','"',qVML)
if(window.ActiveXObject){
var vmlXML=new ActiveXObject("Microsoft.XMLDOM");
vmlXML.async="false";
vmlXML.loadXML(qVML);
}else{
var vmlXML=(new DOMParser()).parseFromString(qVML,"text/xml");
}
var vmlDomTree=vmlXML.getElementsByTagName('AnimationXML')[0];
qSVG+="<AnimationXML>";
for(var zFrames=0;zFrames<vmlXML.getElementsByTagName('svg').length;zFrames++){
var frameNode=vmlXML.getElementsByTagName('svg')[zFrames];
qSVG+="<svg>";
for(var zLines=0;zLines<frameNode.getElementsByTagName('line').length;zLines++){
var lineNodes=frameNode.getElementsByTagName('line')[zLines];
var qSVGLine="<line ";
qSVGLine+='x1="'+(parseFloat(lineNodes.getAttribute("from").split(',')[0])/0.75)+'" ';
qSVGLine+='y1="'+(parseFloat(lineNodes.getAttribute("from").split(',')[1])/0.75)+'" ';
qSVGLine+='x2="'+(parseFloat(lineNodes.getAttribute("to").split(',')[0])/0.75)+'" ';
qSVGLine+='y2="'+(parseFloat(lineNodes.getAttribute("to").split(',')[1])/0.75)+'" ';
qSVGLine+='stroke="'+lineNodes.getAttribute("strokecolor")+'" ';
qSVGLine+='stroke-width="'+(parseFloat(lineNodes.getAttribute("strokeweight"))/0.75)+'" ';
qSVGLine+="></line>";
qSVG+=qSVGLine;
}
for(var zRect=0;zRect<frameNode.getElementsByTagName('rect').length;zRect++){
var rectNodes=frameNode.getElementsByTagName('rect')[zRect];
var qSVGRect="<rect ";
var rectTop=0;
var rectLeft=0;
var rectWidth=0;
var rectHeight=0;
var zRectStyle=rectNodes.getAttribute("style").split(';')
for(var currentRectStyle=0;currentRectStyle<=zRectStyle.length-1;currentRectStyle++){
var currentStyle=zRectStyle[currentRectStyle].split(':');
currentStyle[0]=replaceT(" ","",currentStyle[0])
currentStyle[1]=replaceT(" ","",currentStyle[1])
if(currentStyle[0].indexOf('LEFT')!=-1){
rectLeft=currentStyle[1];
}
if(currentStyle[0].indexOf('TOP')!=-1){
rectTop=currentStyle[1];
}
if(currentStyle[0].indexOf('WIDTH')!=-1){
rectWidth=currentStyle[1];
}
if(currentStyle[0].indexOf('HEIGHT')!=-1){
rectHeight=currentStyle[1];
}
}
qSVGRect+='stroke-width="'+(parseFloat(rectNodes.getAttribute("strokeweight"))/0.75)+'" ';
qSVGRect+='stroke="'+rectNodes.getAttribute("strokecolor")+'" ';
qSVGRect+='fill="'+rectNodes.getAttribute("fillcolor")+'" ';
qSVGRect+='height="'+rectHeight+'" ';
qSVGRect+='width="'+rectWidth+'" ';
qSVGRect+='x="'+rectLeft+'" ';
qSVGRect+='y="'+rectTop+'" ';
qSVGRect+='></rect>'
qSVG+=qSVGRect
}
qSVG+="</svg>";
}
qSVG+="</AnimationXML>";
return qSVG;
}
function isIE(){
ie=navigator.appVersion.match(/MSIE (\d\.\d)/);
opera=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);
if((!ie)||(opera)){
}else{
return true
}
}
function initCanvas(){
makeCanvas();
gotoframe(1,1);
}
function playAnimation(){
AnimationPlay=true;
doAnimation();
}
function doAnimation(){
if(totalFrames==1){
AnimationPlay=false;
}
if(currentCanvas+1>totalFrames){
gotoframe(1,1);
setTimeout('doAnimation()',1000/AnimationFramerate);
}else{
if(AnimationPlay==true){
gotoframe(currentFrameSelection+1,1);
setTimeout('doAnimation()',1000/AnimationFramerate);
}
}
}
function replaceCompressXML(xmlData){
var b=xmlData;
b=replaceAll('<svg t="f">',"_e",b);
b=replaceAll(" ","",b,b);
b=replaceAll("<svg>","_f",b);
b=replaceAll("</svg>",",f",b);
b=replaceAll("<rect","_r",b);
b=replaceAll("</rect>",",r",b);
b=replaceAll("<line","_l",b);
b=replaceAll("</line>",",l",b);
b=replaceAll("stroke-width",".i",b);
b=replaceAll("stroke",".o",b);
b=replaceAll("fill",".f",b);
b=replaceAll("height",".h",b);
b=replaceAll("width",".w",b);
b=replaceAll("rgb","-y",b);
b=replaceAll("0,0,0","g",b);
b=replaceAll("255,0,0","*",b);
b=replaceAll("<AnimationXML>","_A",b);
b=replaceAll("</AnimationXML>",",A",b);
b=replaceAll('="',"~",b);
b=replaceAll('px"',"#",b);
return b;
}
function revReplace(stringa,stringb,astring){
return replaceAll(stringb,stringa,astring);
}
function replaceDecompressXML(xmlData){
var b=xmlData;
b=revReplace("0,0,0","g",b);
b=revReplace('<svg t="f">',"_e",b);
b=revReplace("255,0,0","*",b);
b=revReplace("<svg>","_f",b);
b=revReplace("</svg>",",f",b);
b=revReplace(" stroke-width",".i",b);
b=revReplace(" stroke",".o",b);
b=revReplace(" fill",".f",b);
b=revReplace(" height",".h",b);
b=revReplace(" width",".w",b);
b=revReplace(" rgb","-y",b);
b=revReplace("<line ","_l",b);
b=revReplace("</line> ",",l",b);
b=revReplace("<rect","_r",b);
b=revReplace("</rect>",",r",b);
b=revReplace("<AnimationXML>","_A",b);
b=revReplace("</AnimationXML>",",A",b);
b=revReplace('="',"~",b);
b=revReplace('px"',"#",b);
b=replaceAll('"x=','" x=',b);
b=replaceAll('"y=','" y=',b);
b=replaceAll('"x2=','" x2=',b);
b=replaceAll('"y2=','" y2=',b);
b=replaceAll('"x1=','" x1=',b);
b=replaceAll('"y1=','" y1=',b);
b=replaceAll('stroke=" ','stroke="',b);
b=replaceAll('fill=" ','fill="',b);
return b;
}
function replaceAll(findStr,repStr,oldStr){
var newStr="";
if(replaceEngine=='string'){
var srchNdx=0;
while(oldStr.indexOf(findStr,srchNdx)!=-1){
newStr+=oldStr.substring(srchNdx,oldStr.indexOf(findStr,srchNdx));
newStr+=repStr;
srchNdx=(oldStr.indexOf(findStr,srchNdx)+findStr.length);
}
newStr+=oldStr.substring(srchNdx,oldStr.length);
}else{
try{
if(findStr.indexOf("*")==-1){
var re=new RegExp(findStr,"g");
newStr=oldStr.replace(re,repStr);
}else{
var srchNdx=0;
while(oldStr.indexOf(findStr,srchNdx)!=-1){
newStr+=oldStr.substring(srchNdx,oldStr.indexOf(findStr,srchNdx));
newStr+=repStr;
srchNdx=(oldStr.indexOf(findStr,srchNdx)+findStr.length);
}
newStr+=oldStr.substring(srchNdx,oldStr.length);
}
}catch(err){
var srchNdx=0;
while(oldStr.indexOf(findStr,srchNdx)!=-1){
newStr+=oldStr.substring(srchNdx,oldStr.indexOf(findStr,srchNdx));
newStr+=repStr;
srchNdx=(oldStr.indexOf(findStr,srchNdx)+findStr.length);
}
newStr+=oldStr.substring(srchNdx,oldStr.length);
}
}
return newStr;
}
function stopAnimation(){
AnimationPlay=false;
}
function hideCurrentCanvas(){
try{
document.getElementById("richdraw"+currentCanvas).style.display="none";
}catch(err){}
}
function showCurrentCanvas(){
try{
document.getElementById("richdraw"+currentCanvas).style.display="";
}catch(err){}
}
function flashVerification(){
if(generateAnimationXML().replace("<svg></svg>","")!='<AnimationXML></AnimationXML>'){
}
}
function genFlashHTML(aAnimationURL){
var zflashHTML="";
zflashHTML='<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase= '
zflashHTML+='"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"'
zflashHTML+='WIDTH="'+canvasWidth+'" HEIGHT="'+canvasHeight+'" id="">'
zflashHTML+='<PARAM NAME=movie VALUE="'+aAnimationURL+'">'
zflashHTML+='<PARAM NAME=quality VALUE=high><PARAM NAME=bgcolor VALUE=#FFFFFF><EMBED src="'+aAnimationURL+'" '
zflashHTML+=' quality=high bgcolor=#FFFFFF WIDTH="'+canvasWidth+'" HEIGHT="'+canvasHeight+'"'
zflashHTML+='NAME="" ALIGN="" TYPE="application/x-shockwave-flash"';
zflashHTML+='PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>'
return zflashHTML;
}
function embedAnimationPreview(){
$('previewStatus').innerHTML="Mode: Preview (Revision "+(revisionNumber-1)+")"
document.getElementById("zFlashPreviewDiv").innerHTML=genFlashHTML(lastAnimationURL);
}
function PreviewRevision(revision){
AnimationPlay==true
$("zFlashPreviewDiv").innerHTML=genFlashHTML(animationRevisionURL[revision]);
}
function setRevisionFromBrowser(){
var RevisionBox=$('RevisionBrowser');
PreviewRevision(parseInt(RevisionBox.options[RevisionBox.selectedIndex].value));
}
function initRevisionBrowser(){
var zRevisionBrowserHTML="";
zRevisionBrowserHTML+='<select id="RevisionBrowser" onchange="setRevisionFromBrowser();">'
for(var zRevisionOption=0;zRevisionOption<animationRevision.length;zRevisionOption++){
var otherOptions="";
if(zRevisionOption==animationRevision.length-1){
otherOptions=" (HEAD)"
}
if(zRevisionOption==0){
otherOptions=" (Empty)"
}
zRevisionBrowserHTML+='<option value="'+zRevisionOption+'">Revision: '+zRevisionOption+''+otherOptions+'</option>'
}
zRevisionBrowserHTML+='</select>'
$('RevisionBrowserDiv').innerHTML=zRevisionBrowserHTML;
try{
$('RevisionBrowser').options[animationRevision.length-1].selected='selected';
}catch(err){}
}
function removeUnusedAttributes(zxml){
var newXml=zxml;
if(window.ActiveXObject){
var objDom=new ActiveXObject("Microsoft.XMLDOM");
objDom.async="false";
objDom.loadXML(zxml);
}else{
var parser=new DOMParser();
var objDom=parser.parseFromString(zxml,"text/xml");
}
var domTree=objDom.getElementsByTagName('AnimationXML')[0];
objDom.getElementsByTagName('AnimationXML')[0];
for(var zFrames=0;zFrames<objDom.getElementsByTagName('svg').length;zFrames++){
var frameNode=objDom.getElementsByTagName('svg')[zFrames];
for(var zFrameObj=0;zFrameObj<frameNode.childNodes.length;zFrameObj++){
newXml=newXml.replace(frameNode.childNodes[zFrameObj].getAttribute("id"),"")
newXml=newXml.replace(frameNode.childNodes[zFrameObj].getAttribute("style"),"")
newXml=newXml.replace(' id=""',"")
newXml=newXml.replace(' style=""',"")
}
}
return newXml;
}
function preFlash(){
initRevisionBrowser()
$('previewStatus').innerHTML="Mode: Preview (Revision "+(revisionNumber-1)+")"
if(animationRevision[revisionNumber-1]==generateAnimationXML()){
setTimeout("embedAnimationPreview()",100);
}else{
flashVerification()
$('zFlashPreviewDiv').style.height=canvasHeight+'px';
$('zFlashPreviewDiv').style.width=canvasWidth+'px';
$('zFlashPreviewDiv').innerHTML="";
$('swfPreBtn').disabled=true;
$('swfPreBtn').value='generating...';
var swfgen=compressxml(generateAnimationXML());
if(generateAnimationXML().replace("<svg></svg>","")!='<AnimationXML></AnimationXML>'){
ajaxpack.postAjaxRequest("../freemovie/swfgen.php","type=preview&height="+canvasHeight+"&width="+canvasWidth+"&framerate="+AnimationFramerate+"&svg="+swfgen,preFlashEvent,"txt")
}else{$('zFlashPreviewDiv').innerHTML="Sorry No Preview Availiable:<br> Empty Animation";}
}
$('previewStatus').innerHTML="Mode: Preview (Revision "+(revisionNumber-1)+")"
}
function preFlashEvent(){
$('previewStatus').innerHTML="Mode: Preview (Revision "+(revisionNumber-1)+")"
var myajax=ajaxpack.ajaxobj
var myfiletype=ajaxpack.filetype
if(myajax.readyState==4){
if(myajax.status==200||window.location.href.indexOf("http")==-1){
animationRevision[revisionNumber]=generateAnimationXML();
var flashHTML="";
var FLASHfilename=myajax.responseText.replace('preview','../freemovie/preview');
lastAnimationURL=FLASHfilename;
animationRevisionURL[revisionNumber]=FLASHfilename;
revisionNumber++;
$('previewStatus').innerHTML="Mode: Preview (Revision "+(revisionNumber-1)+")"
flashHTML='<object width="480" height="272"><embed src="'+FLASHfilename+'" width="480" height="272"></embed></object>'
document.getElementById("zFlashPreviewDiv").innerHTML=flashHTML;
$('swfPreBtn').disabled=false;
$('swfPreBtn').value='Preview';
if(myajax.responseText.indexOf('Warning')!=-1||myajax.responseText.indexOf('Error')!=-1){
if(myajax.responseText.indexOf('<br>')!=-1||myajax.responseText.indexOf('<b>')!=-1){
document.getElementById("zFlashPreviewDiv").innerHTML=myajax.responseText;
}
}
}
}
initRevisionBrowser()
}
function genFlash(){
var zSWFFilename=prompt("please enter a file name for the animation");
zSWFFilename=zSWFFilename.replace(".swf","");
zSWFFilename=zSWFFilename.replace("/","");
zSWFFilename=zSWFFilename.replace(" ","_");
zSWFFilename=zSWFFilename.replace("+","");
zSWFFilename=zSWFFilename.replace("&","");
zSWFFilename=zSWFFilename.replace("?","");
$('swfGenBtn').disabled=true;
$('swfGenBtn').value='generating...';
$('export').innerHTML='';
var swfgen=compressxml(generateAnimationXML());
if(generateAnimationXML().replace("<svg></svg>","")!='<AnimationXML></AnimationXML>'){
ajaxpack.postAjaxRequest("../freemovie/swfgen.php","filename="+zSWFFilename+"&type=export&height="+canvasHeight+"&width="+canvasWidth+"&framerate="+AnimationFramerate+"&svg="+swfgen,genFlashEvent,"txt")
}
}
function clearPreviews(){
ajaxpack.postAjaxRequest("../freemovie/clearPreviews.php","",clearPreviewEvent,"txt")
}
function clearPreviewEvent(){
var myajax=ajaxpack.ajaxobj
var myfiletype=ajaxpack.filetype
if(myajax.readyState==4){
if(myajax.status==200||window.location.href.indexOf("http")==-1){
alert(myajax.responseText)
}
}
}
function generateSWFResponse(responsedata){
var responseurl=responsedata.replace('files','../freemovie/files');
var absoluteResponseURL=responsedata.replace('files','../freemovie/files');
$('export').innerHTML='<a id="zExportURL" href="'+responseurl+'>'+responseurl+'</a>';
$('swfGenBtn').disabled=false;
$('swfGenBtn').value='Export Animation';
$('export').innerHTML='<a id="zExportURL" href="'+$('zExportURL').href+'>'+$('zExportURL').href+'</a>';
}
function genFlashEvent(){
var myajax=ajaxpack.ajaxobj
var myfiletype=ajaxpack.filetype
if(myajax.readyState==4){
if(myajax.status==200||window.location.href.indexOf("http")==-1){
setTimeout('generateSWFResponse("'+myajax.responseText+'")',500)
}
}
}
var layers=0;
var kFrameCount=0;
var currentFrameSelection=1;
var currentLayerSelection=1;
var KeyFrames=new Array()
var zDataText="";
var totalFramesPerLayer=500;
var KeyframeColor="#0099CC";
var frameTextColor="#000000";
var selectKeyframeColor="";
var selectTextColor="";
var FrameColor="#ebf2f8";
var selectFrameColor="";
var LayerBGColor="#BED6E0";
function setOpacity(obj,value){
getElementById(obj).style.opacity=value/10;
getElementById(obj).style.filter='alpha(opacity='+value*10+')';
}
function toKeyframe()
{
var zframe;
zframe=document.getElementById("frame"+currentFrameSelection+"layer"+currentLayerSelection);
zframe.style.color=frameTextColor;
zframe.style.backgroundColor=KeyframeColor;
KeyFrames[kFrameCount]=currentFrameSelection+","+currentLayerSelection
kFrameCount=kFrameCount+1
currentFrameSelection=currentFrameSelection;
currentLayerSelection=currentLayerSelection;
gotoframe(currentFrameSelection,currentLayerSelection);
}
function makeKeyframe(framenumber,layer){
var zframe;
zframe=document.getElementById("frame"+framenumber+"layer"+layer);
zframe.style.color=frameTextColor;
zframe.style.backgroundColor=KeyframeColor;
KeyFrames[kFrameCount]=framenumber+","+layer
kFrameCount=kFrameCount+1
gotoframeInterface(framenumber,layer);
}
function fullgotoframe()
{
if(confirm("Warning: This might take a very long time")){
alert('you will be alerted when it is done');
for(var iz=1;iz<=layers;iz++)
{
for(var i=1;i<=totalFramesPerLayer;i++)
{
gotoframeInterface(i,iz);
}
}
}
alert('done');
}
function gotoframeInterface(framenumber,layer){
var wasKeyFrame=new Boolean(false);
for(var m=0;m<=kFrameCount;m++)
{
if(KeyFrames[m]==currentFrameSelection+","+currentLayerSelection){
wasKeyFrame=true
}
}
var aframe;
aframe=document.getElementById("frame"+currentFrameSelection+"layer"+currentLayerSelection);
if(wasKeyFrame==false){
aframe.style.color="black";
aframe.style.backgroundColor=FrameColor;
}
if(wasKeyFrame==true){
aframe.style.color=frameTextColor;
aframe.style.backgroundColor=KeyframeColor;
}
currentFrameSelection=framenumber
currentLayerSelection=layer
var frame;
frame=document.getElementById("frame"+framenumber+"layer"+layer);
var isKeyFrame=new Boolean(false);
for(var m=0;m<=kFrameCount;m++)
{
if(KeyFrames[m]==framenumber+","+layer){
isKeyFrame=true
}
}
if(isKeyFrame==false){
frame.style.color="#F2F2F2";
frame.style.backgroundColor="#00BFFF";
}
if(isKeyFrame==true){
frame.style.color="#F2F2F2";
frame.style.backgroundColor="#3579DC";
}
}
function repeatChecks(){
checkFrame(currentFrameSelection,currentLayerSelection);
setTimeout("repeatChecks()",500);
}
repeatChecks()
function checkFrame(oFrame,oLayer){
try{
var zisempty=false;
if(DrawCanvas[oFrame]==null){
zisempty=true;
}else{
if(DrawCanvas[oFrame].renderer.getMarkup().replace(" ","")=="<svg></svg>"){
zisempty=true;
}
}
if(zisempty==false){
makeKeyframe(oFrame,oLayer);
}
}catch(err){}
}
function setTotalFrameValue(){
var qframe;
qframe=document.getElementById("frame"+totalFrames+"layer"+1);
qframe.style.color="#ffffff";
qframe.style.backgroundColor="#FF9900";
}
function changeTotalFrameValue(tfValue){
totalFrames=tfValue;
setTotalFrameValue();
gotoframe(currentFrameSelection,currentLayerSelection);
}
function gotoframe(framenumber,layer)
{
if(framenumber>0&&framenumber<totalFramesPerLayer){
checkFrame(currentFrameSelection,layer);
previousCanvas=currentCanvas;
if(framenumber>totalFrames){
gotoframeInterface(totalFrames,layer);
totalFrames=framenumber;
}
gotoframeInterface(framenumber,layer);
if(framenumber<totalFrames){
setTotalFrameValue()
}
hideCurrentCanvas();
currentCanvas=framenumber;
if(DrawCanvas[currentCanvas]==null){
if(document.all){
makeCanvasFromIE(framenumber);
}else{
makeCanvasFromId(framenumber);
}
}
showCurrentCanvas();
checkFrame(framenumber,layer);
}
}
function removeKeyframe(){
var wasKeyFrame=new Boolean(false);
for(var m=0;m<=kFrameCount;m++)
{
if(KeyFrames[m]==currentFrameSelection+","+currentLayerSelection){
wasKeyFrame=true
}
}
if(wasKeyFrame==false){
alert("Error: This isn't a Key Frame!")
}
if(wasKeyFrame==true){
if(confirm("Are You Sure you want to delete this frame?")){
for(var m=0;m<=kFrameCount;m++)
{
if(KeyFrames[m]==currentFrameSelection+","+currentLayerSelection){
KeyFrames[m]="0,0";
}
}
gotoframe(currentFrameSelection,currentLayerSelection);
}
}
}
function isKeyframe(frame,layer){
var pKeyFrame=new Boolean();
pKeyFrame=false
for(var m=0;m<=kFrameCount;m++)
{
if(KeyFrames[m]==frame+","+layer){
pKeyFrame=true
}
}
return pKeyFrame;
}
function ClearAllKeyframes(){
if(confirm("Are you sure you want to delete ALL the keyframes?")){
for(var m=0;m<=kFrameCount;m++)
{
KeyFrames[m]="0,0";
gotoframe(currentFrameSelection,currentLayerSelection);
}
alert("Done.");
}
}
var TDCount=0;
function addLayer(){
var asdf;
layers=layers+1;
asdf="<div id='framesDiv'><table width='100%' cellspacing='0px' id='framesTable"+layers+"'";
asdf=asdf+(" cellspacing='0' border='1' onmouseover=\"document.body.style.cursor='default';\"> ");
asdf=asdf+("<tr>")
asdf=asdf+("<td onmouseover=\"try{document.body.style.cursor='default';Tip('Layer "+layers+"');}catch(err){}\" height='5' bgcolor='"+LayerBGColor+"'");
asdf=asdf+(">Layer"+layers+"</td>")
for(var x=1;x<=totalFramesPerLayer;x++)
{
asdf=asdf+("<td id='frame"+x+"layer"+layers+"'height='5' cellpadding='0px' cellspacing='0px'");
asdf=asdf+("style='-moz-user-select: none; background-color:"+FrameColor+";' ");
asdf=asdf+("onmousedown='gotoframe("+x+", "+layers+");'");
asdf=asdf+("onmouseover=\"try{Tip(setTooltipData('"+x+"','"+layers+"'),TITLE, 'Frame "+x+"');}catch(err){}\" ");
asdf=asdf+(">"+x);
asdf=asdf+("</td>")
}
asdf=asdf+("</tr></table></div>")
changeInnerHTML("frameContainer",asdf)
}
function setTooltipData(uFrame,uLayer){
var wasKeyFrame=new Boolean(false);
for(var m=0;m<=kFrameCount;m++)
{
if(KeyFrames[m]==uFrame+","+uLayer){
wasKeyFrame=true
}
}
var ziskeyframe='false';
ziskeyframe='false';
if(wasKeyFrame==true){
ziskeyframe='true';
}
var zisselected='false';
if(currentFrameSelection==uFrame){
if(currentLayerSelection==uLayer){
zisselected='true';
}
}
var zisempty=false;
if(DrawCanvas[uFrame]==null){
zisempty=true;
}else{
if(DrawCanvas[uFrame].renderer.getMarkup().replace(" ","")=="<svg></svg>"){
zisempty=true;
}
}
var canvasframepreview="empty";
if(DrawCanvas[uFrame]!=null){
canvasframepreview=DrawCanvas[uFrame].renderer.getMarkup()
}
if(zisempty==false){
var pstr=DrawCanvas[uFrame].renderer.getMarkup();
count=0;
var key="rect";
pos=pstr.indexOf(key);
while(pos!=-1){
count++;
pos=pstr.indexOf(key,pos+1);
}
key="line";
pos=pstr.indexOf(key);
while(pos!=-1){
count++;
pos=pstr.indexOf(key,pos+1);
}
}
zDataText='<b>layer:</b> '+uLayer
zDataText+='<br><b>keyframe:</b>'+ziskeyframe+'<br><b>selected:</b> '+zisselected;
zDataText+='<br><b>empty:</b>'+zisempty;
if(zisempty==false){
zDataText+='<br><b>Total Objects:</b> '+count/2;
}
if(uFrame==totalFrames){
zDataText+='<br><b>Last Frame</b>';
}
return zDataText;
}
function changeInnerHTML(elm,txt){
if(document.getElementById){
var el=document.getElementById(elm);
el.innerHTML=el.innerHTML+txt;
return true;
}
return false;
}
function overwriteInnerHTML(elm,txt){
if(document.getElementById){
var el=document.getElementById(elm);
el.innerHTML=txt;
return true;
}
return false;
}
function createAjaxObj(){
var httprequest=false
if(window.XMLHttpRequest){
httprequest=new XMLHttpRequest()
if(httprequest.overrideMimeType)
httprequest.overrideMimeType('text/xml')
}
else if(window.ActiveXObject){
try{
httprequest=new ActiveXObject("Msxml2.XMLHTTP");
}
catch(e){
try{
httprequest=new ActiveXObject("Microsoft.XMLHTTP");
}
catch(e){}
}
}
return httprequest
}
var ajaxpack=new Object()
ajaxpack.basedomain="http://"+window.location.hostname
ajaxpack.ajaxobj=createAjaxObj()
ajaxpack.filetype="txt"
ajaxpack.addrandomnumber=0
ajaxpack.getAjaxRequest=function(url,parameters,callbackfunc,filetype){
ajaxpack.ajaxobj=createAjaxObj()
if(ajaxpack.addrandomnumber==1)
var parameters=parameters+"&ajaxcachebust="+new Date().getTime()
if(this.ajaxobj){
this.filetype=filetype
this.ajaxobj.onreadystatechange=callbackfunc
this.ajaxobj.open('GET',url+"?"+parameters,true)
this.ajaxobj.send(null)
}
}
ajaxpack.postAjaxRequest=function(url,parameters,callbackfunc,filetype){
ajaxpack.ajaxobj=createAjaxObj()
if(this.ajaxobj){
this.filetype=filetype
this.ajaxobj.onreadystatechange=callbackfunc;
this.ajaxobj.open('POST',url,true);
this.ajaxobj.setRequestHeader("Content-type","application/x-www-form-urlencoded");
this.ajaxobj.setRequestHeader("Content-length",parameters.length);
this.ajaxobj.setRequestHeader("Connection","close");
this.ajaxobj.send(parameters);
}
}
var bustcachevar=1
var loadedobjects=""
var rootdomain="http://"+window.location.hostname
var bustcacheparameter=""
function ajaxpage(url,containerid){
var page_request=false
if(window.XMLHttpRequest)
page_request=new XMLHttpRequest()
else if(window.ActiveXObject){
try{
page_request=new ActiveXObject("Msxml2.XMLHTTP")
}
catch(e){
try{
page_request=new ActiveXObject("Microsoft.XMLHTTP")
}
catch(e){}
}
}
else
return false
page_request.onreadystatechange=function(){
loadpage(page_request,containerid)
}
if(bustcachevar)
bustcacheparameter=(url.indexOf("?")!=-1)?"&"+new Date().getTime():"?"+new Date().getTime()
page_request.open('GET',url+bustcacheparameter,true)
page_request.send(null)
}
function loadpage(page_request,containerid){
if(page_request.readyState==4&&(page_request.status==200||window.location.href.indexOf("http")==-1))
document.getElementById(containerid).innerHTML=page_request.responseText
}
function loadobjs(){
if(!document.getElementById)
return
for(i=0;i<arguments.length;i++){
var file=arguments[i]
var fileref=""
if(loadedobjects.indexOf(file)==-1){
if(file.indexOf(".js")!=-1){
fileref=document.createElement('script')
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src",file);
}
else if(file.indexOf(".css")!=-1){
fileref=document.createElement("link")
fileref.setAttribute("rel","stylesheet");
fileref.setAttribute("type","text/css");
fileref.setAttribute("href",file);
}
}
if(fileref!=""){
document.getElementsByTagName("head").item(0).appendChild(fileref)
loadedobjects+=file+" "
}
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
if(!String.trim)String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,'');};
var DHTMLSuite_funcs=new Object();
if(!window.DHTML_SUITE_THEME)var DHTML_SUITE_THEME='blue';
if(!window.DHTML_SUITE_THEME_FOLDER)var DHTML_SUITE_THEME_FOLDER='../themes/';
if(!window.DHTML_SUITE_JS_FOLDER)var DHTML_SUITE_JS_FOLDER='../js/separateFiles/';
var DHTMLSuite=new Object();
var standardObjectsCreated=false;
DHTMLSuite.eventEls=new Array();
var widgetDep=new Object();
widgetDep['formValidator']=['dhtmlSuite-formUtil.js'];
widgetDep['paneSplitter']=['dhtmlSuite-paneSplitter.js','dhtmlSuite-paneSplitterModel.js','dhtmlSuite-dynamicContent.js','ajax.js'];
widgetDep['menuBar']=['dhtmlSuite-menuBar.js','dhtmlSuite-menuItem.js','dhtmlSuite-menuModel.js'];
widgetDep['windowWidget']=['dhtmlSuite-windowWidget.js','dhtmlSuite-resize.js','dhtmlSuite-dragDropSimple.js','ajax.js','dhtmlSuite-dynamicContent.js'];
widgetDep['colorWidget']=['dhtmlSuite-colorWidgets.js','dhtmlSuite-colorUtil.js'];
widgetDep['colorSlider']=['dhtmlSuite-colorWidgets.js','dhtmlSuite-colorUtil.js','dhtmlSuite-slider.js'];
widgetDep['colorPalette']=['dhtmlSuite-colorWidgets.js','dhtmlSuite-colorUtil.js'];
widgetDep['calendar']=['dhtmlSuite-calendar.js','dhtmlSuite-dragDropSimple.js'];
widgetDep['dragDropTree']=['dhtmlSuite-dragDropTree.js'];
widgetDep['slider']=['dhtmlSuite-slider.js'];
widgetDep['dragDrop']=['dhtmlSuite-dragDrop.js'];
widgetDep['imageEnlarger']=['dhtmlSuite-imageEnlarger.js','dhtmlSuite-dragDropSimple.js'];
widgetDep['imageSelection']=['dhtmlSuite-imageSelection.js'];
widgetDep['floatingGallery']=['dhtmlSuite-floatingGallery.js','dhtmlSuite-mediaModel.js'];
widgetDep['contextMenu']=['dhtmlSuite-contextMenu.js','dhtmlSuite-menuBar.js','dhtmlSuite-menuItem.js','dhtmlSuite-menuModel.js'];
widgetDep['dynamicContent']=['dhtmlSuite-dynamicContent.js','ajax.js'];
widgetDep['textEdit']=['dhtmlSuite-textEdit.js','dhtmlSuite-textEditModel.js','dhtmlSuite-listModel.js'];
widgetDep['listModel']=['dhtmlSuite-listModel.js'];
widgetDep['resize']=['dhtmlSuite-resize.js'];
widgetDep['dragDropSimple']=['dhtmlSuite-dragDropSimple.js'];
widgetDep['dynamicTooltip']=['dhtmlSuite-dynamicTooltip.js','dhtmlSuite-dynamicContent.js','ajax.js'];
widgetDep['modalMessage']=['dhtmlSuite-modalMessage.js','dhtmlSuite-dynamicContent.js','ajax.js'];
widgetDep['tableWidget']=['dhtmlSuite-tableWidget.js','ajax.js'];
widgetDep['progressBar']=['dhtmlSuite-progressBar.js'];
widgetDep['tabView']=['dhtmlSuite-tabView.js','dhtmlSuite-dynamicContent.js','ajax.js'];
widgetDep['infoPanel']=['dhtmlSuite-infoPanel.js','dhtmlSuite-dynamicContent.js','ajax.js'];
widgetDep['form']=['dhtmlSuite-formUtil.js','dhtmlSuite-dynamicContent.js','ajax.js'];
var depCache=new Object();
DHTMLSuite.include=function(widget)
{
if(!widgetDep[widget]){
alert('Cannot find the files for widget '+widget+'. Please verify that the name is correct');
return;
}
var files=widgetDep[widget];
for(var no=0;no<files.length;no++){
if(!depCache[files[no]]){
depCache[files[no]]=true;
}
}
}
DHTMLSuite.discardElement=function(element){
element=DHTMLSuite.commonObj.getEl(element);
var gBin=document.getElementById('IELeakGBin');
if(!gBin){
gBin=document.createElement('DIV');
gBin.id='IELeakGBin';
gBin.style.display='none';
document.body.appendChild(gBin);
}
gBin.appendChild(element);
gBin.innerHTML='';
}
DHTMLSuite.createStandardObjects=function(){
DHTMLSuite.clientInfoObj=new DHTMLSuite.clientInfo();
DHTMLSuite.clientInfoObj.init();
if(!DHTMLSuite.configObj){
DHTMLSuite.configObj=new DHTMLSuite.config();
DHTMLSuite.configObj.init();
}
DHTMLSuite.commonObj=new DHTMLSuite.common();
DHTMLSuite.variableStorage=new DHTMLSuite.globalVariableStorage();;
DHTMLSuite.commonObj.init();
DHTMLSuite.domQueryObj=new DHTMLSuite.domQuery();
DHTMLSuite.commonObj.addEvent(window,'unload',function(){DHTMLSuite.commonObj.__clearMemoryGarbage();});
standardObjectsCreated=true;
}
DHTMLSuite.config=function(){
var imagePath;
var cssPath;
var defaultCssPath;
var defaultImagePath;
}
DHTMLSuite.config.prototype={
init:function()
{
this.imagePath=DHTML_SUITE_THEME_FOLDER+DHTML_SUITE_THEME+'/images/';
this.cssPath=DHTML_SUITE_THEME_FOLDER+DHTML_SUITE_THEME+'/css/';
this.defaultCssPath=this.cssPath;
this.defaultImagePath=this.imagePath;
}
,
setCssPath:function(newCssPath)
{
this.cssPath=newCssPath;
}
,
resetCssPath:function()
{
this.cssPath=this.defaultCssPath;
}
,
resetImagePath:function()
{
this.imagePath=this.defaultImagePath;
}
,
setImagePath:function(newImagePath)
{
this.imagePath=newImagePath;
}
}
DHTMLSuite.globalVariableStorage=function(){
var menuBar_highlightedItems;
this.menuBar_highlightedItems=new Array();
var arrayDSObjects;
var arrayOfDhtmlSuiteObjects;
this.arrayDSObjects=new Array();
this.arrayOfDhtmlSuiteObjects=this.arrayDSObjects;
var ajaxObjects;
this.ajaxObjects=new Array();
}
DHTMLSuite.globalVariableStorage.prototype={
}
DHTMLSuite.common=function(){
var loadedCSSFiles;
var cssCacheStatus;
var eventEls;
var isOkToSelect;
this.okToSelect=true;
this.cssCacheStatus=true;
this.eventEls=new Array();
}
DHTMLSuite.common.prototype={
init:function()
{
this.loadedCSSFiles=new Array();
}
,
loadCSS:function(cssFile,prefixConfigPath)
{
if(!prefixConfigPath&&prefixConfigPath!==false)prefixConfigPath=true;
if(!this.loadedCSSFiles[cssFile]){
this.loadedCSSFiles[cssFile]=true;
var lt=document.createElement('LINK');
if(!this.cssCacheStatus){
if(cssFile.indexOf('?')>=0)cssFile=cssFile+'&';else cssFile=cssFile+'?';
cssFile=cssFile+'rand='+Math.random();
}
if(prefixConfigPath){
lt.href=DHTMLSuite.configObj.cssPath+cssFile;
}else{
lt.href=cssFile;
}
lt.rel='stylesheet';
lt.media='screen';
lt.type='text/css';
document.getElementsByTagName('HEAD')[0].appendChild(lt);
}
}
,
__setTextSelOk:function(okToSelect){
this.okToSelect=okToSelect;
}
,
__isTextSelOk:function()
{
return this.okToSelect;
}
,
setCssCacheStatus:function(cssCacheStatus)
{
this.cssCacheStatus=cssCacheStatus;
}
,
getEl:function(elRef)
{
if(typeof elRef=='string'){
if(document.getElementById(elRef))return document.getElementById(elRef);
if(document.forms[elRef])return document.forms[elRef];
if(document[elRef])return document[elRef];
if(window[elRef])return window[elRef];
}
return elRef;
}
,
isArray:function(el)
{
if(el.constructor.toString().indexOf("Array")!=-1)return true;
return false;
}
,
getStyle:function(el,property)
{
el=this.getEl(el);
if(document.defaultView&&document.defaultView.getComputedStyle){
var retVal=null;
var comp=document.defaultView.getComputedStyle(el,'');
if(comp){
retVal=comp[property];
}
return el.style[property]||retVal;
}
if(document.documentElement.currentStyle&&DHTMLSuite.clientInfoObj.isMSIE){
var retVal=null;
if(el.currentStyle)value=el.currentStyle[property];
return(el.style[property]||retVal);
}
return el.style[property];
}
,
getLeftPos:function(el)
{
if(document.getBoxObjectFor){
if(el.tagName!='INPUT'&&el.tagName!='SELECT'&&el.tagName!='TEXTAREA')return document.getBoxObjectFor(el).x
}
var returnValue=el.offsetLeft;
while((el=el.offsetParent)!=null){
if(el.tagName!='HTML'){
returnValue+=el.offsetLeft;
if(document.all)returnValue+=el.clientLeft;
}
}
return returnValue;
}
,
getTopPos:function(el)
{
if(document.getBoxObjectFor){
if(el.tagName!='INPUT'&&el.tagName!='SELECT'&&el.tagName!='TEXTAREA')return document.getBoxObjectFor(el).y
}
var returnValue=el.offsetTop;
while((el=el.offsetParent)!=null){
if(el.tagName!='HTML'){
returnValue+=(el.offsetTop-el.scrollTop);
if(document.all)returnValue+=el.clientTop;
}
}
return returnValue;
}
,
getCookie:function(name){
var start=document.cookie.indexOf(name+"=");
var len=start+name.length+1;
if((!start)&&(name!=document.cookie.substring(0,name.length)))return null;
if(start==-1)return null;
var end=document.cookie.indexOf(";",len);
if(end==-1)end=document.cookie.length;
return unescape(document.cookie.substring(len,end));
}
,
setCookie:function(name,value,expires,path,domain,secure){
expires=expires*60*60*24*1000;
var today=new Date();
var expires_date=new Date(today.getTime()+(expires));
var cookieString=name+"="+escape(value)+
((expires)?";expires="+expires_date.toGMTString():"")+
((path)?";path="+path:"")+
((domain)?";domain="+domain:"")+
((secure)?";secure":"");
document.cookie=cookieString;
}
,
deleteCookie:function(name,path,domain)
{
if(this.getCookie(name))document.cookie=name+"="+
((path)?";path="+path:"")+
((domain)?";domain="+domain:"")+
";expires=Thu, 01-Jan-1970 00:00:01 GMT";
}
,
cancelEvent:function()
{
return false;
}
,
addEvent:function(obj,type,fn,suffix){
if(!suffix)suffix='';
if(obj.attachEvent){
if(typeof DHTMLSuite_funcs[type+fn+suffix]!='function'){
DHTMLSuite_funcs[type+fn+suffix]=function(){
fn.apply(window.event.srcElement);
};
obj.attachEvent('on'+type,DHTMLSuite_funcs[type+fn+suffix]);
}
obj=null;
}else{
obj.addEventListener(type,fn,false);
}
this.__addEventEl(obj);
}
,
removeEvent:function(obj,type,fn,suffix)
{
if(obj.detachEvent){
obj.detachEvent('on'+type,DHTMLSuite_funcs[type+fn+suffix]);
DHTMLSuite_funcs[type+fn+suffix]=null;
obj=null;
}else{
obj.removeEventListener(type,fn,false);
}
}
,
__clearMemoryGarbage:function()
{
if(!DHTMLSuite.clientInfoObj.isMSIE)return;
for(var no=0;no<DHTMLSuite.eventEls.length;no++){
try{
var el=DHTMLSuite.eventEls[no];
el.onclick=null;
el.onmousedown=null;
el.onmousemove=null;
el.onmouseout=null;
el.onmouseover=null;
el.onmouseup=null;
el.onfocus=null;
el.onblur=null;
el.onkeydown=null;
el.onkeypress=null;
el.onkeyup=null;
el.onselectstart=null;
el.ondragstart=null;
el.oncontextmenu=null;
el.onscroll=null;
el=null;
}catch(e){
}
}
for(var no in DHTMLSuite.variableStorage.arrayDSObjects){
DHTMLSuite.variableStorage.arrayDSObjects[no]=null;
}
window.onbeforeunload=null;
window.onunload=null;
DHTMLSuite=null;
}
,
__addEventEl:function(el)
{
DHTMLSuite.eventEls[DHTMLSuite.eventEls.length]=el;
}
,
getSrcElement:function(e)
{
var el;
if(e.target)el=e.target;
else if(e.srcElement)el=e.srcElement;
if(el.nodeType==3)
el=el.parentNode;
return el;
}
,
getKeyFromEvent:function(e)
{
var code=this.getKeyCode(e);
return String.fromCharCode(code);
}
,
getKeyCode:function(e)
{
if(e.keyCode)code=e.keyCode;else if(e.which)code=e.which;
return code;
}
,
isObjectClicked:function(obj,e)
{
var src=this.getSrcElement(e);
var string=src.tagName+'('+src.className+')';
if(src==obj)return true;
while(src.parentNode&&src.tagName.toLowerCase()!='html'){
src=src.parentNode;
string=string+','+src.tagName+'('+src.className+')';
if(src==obj)return true;
}
return false;
}
,
getObjectByClassName:function(e,className)
{
var src=this.getSrcElement(e);
if(src.className==className)return src;
while(src&&src.tagName.toLowerCase()!='html'){
src=src.parentNode;
if(src.className==className)return src;
}
return false;
}
,
getObjectByAttribute:function(e,attribute)
{
var src=this.getSrcElement(e);
var att=src.getAttribute(attribute);
if(!att)att=src[attribute];
if(att)return src;
while(src&&src.tagName.toLowerCase()!='html'){
src=src.parentNode;
var att=src.getAttribute('attribute');
if(!att)att=src[attribute];
if(att)return src;
}
return false;
}
,
getUniqueId:function()
{
var no=Math.random()+'';
no=no.replace('.','');
var no2=Math.random()+'';
no2=no2.replace('.','');
return no+no2;
}
,
getAssociativeArrayFromString:function(propertyString)
{
if(!propertyString)return;
var retArray=new Array();
var items=propertyString.split(/,/g);
for(var no=0;no<items.length;no++){
var tokens=items[no].split(/:/);
retArray[tokens[0]]=tokens[1];
}
return retArray;
}
,
correctPng:function(el)
{
el=DHTMLSuite.commonObj.getEl(el);
var img=el;
var width=img.width;
var height=img.height;
var html='<span style="display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\''+img.src+'\',sizingMethod=\'scale\');width:'+width+';height:'+height+'"></span>';
img.outerHTML=html;
}
,
__evaluateJs:function(obj)
{
obj=this.getEl(obj);
var scriptTags=obj.getElementsByTagName('SCRIPT');
var string='';
var jsCode='';
for(var no=0;no<scriptTags.length;no++){
if(scriptTags[no].src){
var head=document.getElementsByTagName("head")[0];
var scriptObj=document.createElement("script");
scriptObj.setAttribute("type","text/javascript");
scriptObj.setAttribute("src",scriptTags[no].src);
}else{
if(DHTMLSuite.clientInfoObj.isOpera){
jsCode=jsCode+scriptTags[no].text+'\n';
}
else
jsCode=jsCode+scriptTags[no].innerHTML;
}
}
if(jsCode)this.__installScript(jsCode);
}
,
__installScript:function(script)
{
try{
if(!script)
return;
if(window.execScript){
window.execScript(script)
}else if(window.jQuery&&jQuery.browser.safari){
window.setTimeout(script,0);
}else{
window.setTimeout(script,0);
}
}catch(e){
}
}
,
__evaluateCss:function(obj)
{
obj=this.getEl(obj);
var cssTags=obj.getElementsByTagName('STYLE');
var head=document.getElementsByTagName('HEAD')[0];
for(var no=0;no<cssTags.length;no++){
head.appendChild(cssTags[no]);
}
}
}
DHTMLSuite.clientInfo=function(){
var browser;
var isOpera;
var isMSIE;
var isOldMSIE;
var isFirefox;
var navigatorVersion;
var isOldMSIE;
}
DHTMLSuite.clientInfo.prototype={
init:function()
{
this.browser=navigator.userAgent;
this.isOpera=(this.browser.toLowerCase().indexOf('opera')>=0)?true:false;
this.isFirefox=(this.browser.toLowerCase().indexOf('firefox')>=0)?true:false;
this.isMSIE=(this.browser.toLowerCase().indexOf('msie')>=0)?true:false;
this.isOldMSIE=(this.browser.toLowerCase().match(/msie\s[0-6]/gi))?true:false;
this.isSafari=(this.browser.toLowerCase().indexOf('safari')>=0)?true:false;
this.navigatorVersion=navigator.appVersion.replace(/.*?MSIE\s(\d\.\d).*/g,'$1')/1;
this.isOldMSIE=(this.isMSIE&&this.navigatorVersion<7)?true:false;
}
,
getBrowserWidth:function()
{
if(self.innerWidth)return self.innerWidth;
return document.documentElement.offsetWidth;
}
,
getBrowserHeight:function()
{
if(self.innerHeight)return self.innerHeight;
return document.documentElement.offsetHeight;
}
}
DHTMLSuite.domQuery=function(){
document.getElementsByClassName=this.getElementsByClassName;
document.getElementsByAttribute=this.getElementsByAttribute;
}
DHTMLSuite.domQuery.prototype={
}

DHTML_SUITE_THEME='light-cyan';
DHTML_SUITE_THEME_FOLDER='../themes/';
DHTML_SUITE_JS_FOLDER='../dhtmlsuite/';
var qsParm=new Array();
var query=window.location.search.substring(1);
var parms=query.split('&');
for(var i=0;i<parms.length;i++){
var pos=parms[i].indexOf('=');
if(pos>0){
var key=parms[i].substring(0,pos);
var val=parms[i].substring(pos+1);
qsParm[key]=val;
}
}
if(qsParm['theme']!=null){
DHTML_SUITE_THEME=qsParm['theme'];
}
DHTMLSuite.include("contextMenu");
DHTMLSuite.include("paneSplitter");
DHTMLSuite.include("menuBar");
DHTMLSuite.include("windowWidget");
DHTMLSuite.include("colorWidget");
DHTMLSuite.include("colorSlider");
DHTMLSuite.include("slider");
DHTMLSuite.include("colorPalette");
DHTMLSuite.include("resize");
DHTMLSuite.include("dragDropSimple");
DHTMLSuite.include("dynamicContent");


if(!window.DHTMLSuite)var DHTMLSuite=new Object();
var referenceToDHTMLSuiteContextMenu;
DHTMLSuite.contextMenu=function(){
var menuModels;
var defaultMenuModel;
var menuItems;
var menuObject;
var layoutCSS;
var menuUls;
var width;
var srcElement;
var indexCurrentlyDisplayedMenuModel;
var menuBar;
this.menuModels=new Object();
this.menuObject=false;
this.menuUls=new Array();
this.width=100;
this.srcElement=false;
this.indexCurrentlyDisplayedMenuModel=false;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.contextMenu.prototype=
{
setWidth:function(newWidth)
{
this.width=newWidth;
}
,
setLayoutCss:function(cssFileName)
{
}
,
attachToElement:function(element,elementId,menuModel)
{
window.refToThisContextMenu=this;
if(!element&&elementId)element=document.getElementById(elementId);
if(!element.id){
element.id='context_menu'+Math.random();
element.id=element.id.replace('.','');
}
this.menuModels[element.id]=menuModel;
menuModel.setSubMenuType(1,'sub');
menuModel.setMainMenuGroupWidth(this.width);
if(!this.defaultMenuModel)this.defaultMenuModel=menuModel;
element.oncontextmenu=this.__displayContextMenu;
element.onmousedown=function(){window.refToThisContextMenu.__setReference(window.refToThisContextMenu);};
DHTMLSuite.commonObj.__addEventEl(element)
DHTMLSuite.commonObj.addEvent(document.documentElement,"click",this.__hideContextMenu);
}
,
attachTo:function(el,menuModel)
{
el=DHTMLSuite.commonObj.getEl(el);
this.attachToElement(el,false,menuModel);
}
,
__setReference:function(obj)
{
referenceToDHTMLSuiteContextMenu=obj;
}
,
__displayContextMenu:function(e)
{
if(document.all)e=event;
var ref=referenceToDHTMLSuiteContextMenu;
if(ref.isContextMenuBusy)return;
ref.isContextMenuBusy=true;
ref.srcElement=DHTMLSuite.commonObj.getSrcElement(e);
if(!ref.indexCurrentlyDisplayedMenuModel||ref.indexCurrentlyDisplayedMenuModel!=this.id){
if(ref.indexCurrentlyDisplayedMenuModel){
ref.menuObject.innerHTML='';
}else{
ref.__createDivs();
}
ref.menuItems=ref.menuModels[this.id].getItems();
ref.__createMenuItems(ref.menuModels[this.id]);
}
ref.indexCurrentlyDisplayedMenuModel=this.id;
ref.menuObject.style.left=(e.clientX+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft))+'px';
ref.menuObject.style.top=(e.clientY+Math.max(document.body.scrollTop,document.documentElement.scrollTop))+'px';
ref.menuObject.style.display='block';
setTimeout('referenceToDHTMLSuiteContextMenu.isContextMenuBusy=false',20);
return false;
}
,
__hideContextMenu:function()
{
var ref=referenceToDHTMLSuiteContextMenu;
if(!ref)return;
if(ref.menuObject)ref.menuObject.style.display='none';
}
,
__createDivs:function()
{
var firstChild=false;
var firstChilds=document.getElementsByTagName('DIV');
if(firstChilds.length>0)firstChild=firstChilds[0];
this.menuObject=document.createElement('DIV');
this.menuObject.style.cssText='position:absolute;z-index:100000;';
this.menuObject.className='DHTMLSuite_contextMenu';
this.menuObject.id='DHTMLSuite_contextMenu'+DHTMLSuite.commonObj.getUniqueId();
this.menuObject.style.backgroundImage='url(\''+DHTMLSuite.configObj.imagePath+'context-menu/context-menu-gradient.gif'+'\')';
this.menuObject.style.backgroundRepeat='repeat-y';
if(this.width)this.menuObject.style.width=this.width+'px';
if(firstChild){
firstChild.parentNode.insertBefore(this.menuObject,firstChild);
}else{
document.body.appendChild(this.menuObject);
}
this.menuBar=new DHTMLSuite.menuBar();
this.menuBar.setActiveSubItemsOnMouseOver(true);
this.menuBar.setTarget(this.menuObject.id);
this.menuBar.addMenuItems(this.defaultMenuModel);
this.menuBar.init();
}
,
__mouseOver:function()
{
this.className='DHTMLSuite_item_mouseover';
if(!document.all){
this.style.backgroundPosition='left center';
}
}
,
__mouseOut:function()
{
this.className='';
if(!document.all){
this.style.backgroundPosition='1px center';
}
}
,
__createMenuItems:function(menuModel)
{
this.menuBar.deleteAllMenuItems();
this.menuBar.addMenuItems(menuModel);
this.menuBar.init();
}
}

if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.menuBar=function(){
var menuItemObj;
var layoutCSS;
var menuBarBackgroundImage;
var menuItem_objects;
var menuBarObj;
var menuBarHeight;
var menuItems;
var highlightedItems;
var menuBarState;
var activeSubItemsOnMouseOver;
var submenuGroups;
var submenuIframes;
var createIframesForOldIeBrowsers;
var targetId;
var menuItemCssPrefix;
var cssPrefix;
var menuItemLayoutCss;
var objectIndex;
this.cssPrefix='DHTMLSuite_';
this.menuItemLayoutCss=false;
this.layoutCSS='menu-bar.css';
this.menuBarBackgroundImage='menu_strip_bg.jpg';
this.menuItem_objects=new Object();
DHTMLSuite.variableStorage.menuBar_highlightedItems=new Array();
this.menuBarState=false;
this.menuBarObj=false;
this.menuBarHeight=26;
this.submenuGroups=new Array();
this.submenuIframes=new Array();
this.targetId=false;
this.activeSubItemsOnMouseOver=false;
this.menuItemCssPrefix=false;
this.createIframesForOldIeBrowsers=true;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.menuBar.prototype={
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
this.__createMainMenuDiv();
this.__createMenuItems();
this.__setBasicEvents();
window.refToThismenuBar=this;
}
,
setTarget:function(idOfHTMLElement)
{
this.targetId=idOfHTMLElement;
}
,
setLayoutCss:function(nameOfNewCssFile)
{
this.layoutCSS=nameOfNewCssFile;
}
,
setMenuItemLayoutCss:function(nameOfNewCssFile)
{
this.menuItemLayoutCss=nameOfNewCssFile;
}
,
setCreateIframesForOldIeBrowsers:function(createIframesForOldIeBrowsers)
{
this.createIframesForOldIeBrowsers=createIframesForOldIeBrowsers;
}
,
addMenuItems:function(menuItemObj)
{
this.menuItemObj=menuItemObj;
this.menuItems=menuItemObj.getItems();
}
,
setActiveSubItemsOnMouseOver:function(activateSubOnMouseOver)
{
this.activeSubItemsOnMouseOver=activateSubOnMouseOver;
}
,
setMenuItemState:function(menuItemId,state)
{
try{
this.menuItem_objects[menuItemId].setState(state);
}catch(e){
alert('menu item with id '+menuItemId+' does not exists or you have called the setMenuItemState method before the menu has been initialized');
}
}
,
setMenuItemCssPrefix:function(newCssPrefix)
{
this.menuItemCssPrefix=newCssPrefix;
}
,
setCssPrefix:function(newCssPrefix)
{
this.cssPrefix=newCssPrefix;
}
,
deleteAllMenuItems:function()
{
this.hideSubMenus();
this.__deleteMenuItems(0,false);
this.__clearAllMenuItems();
}
,
replaceMenuItems:function(idOfParentMenuItem,newMenuModel)
{
this.hideSubMenus();
this.__deleteMenuItems(idOfParentMenuItem);
this.menuItemObj.__appendMenuModel(newMenuModel,idOfParentMenuItem);
this.__clearAllMenuItems();
this.__createMenuItems();
}
,
deleteMenuItems:function(idOfParentMenuItem,deleteParentElement)
{
this.__deleteMenuItems(idOfParentMenuItem,deleteParentElement);
this.__clearAllMenuItems();
this.__createMenuItems();
}
,
appendMenuItems:function(idOfParentMenuItem,newMenuModel)
{
this.hideSubMenus();
this.menuItemObj.__appendMenuModel(newMenuModel,idOfParentMenuItem);
this.__clearAllMenuItems();
this.__createMenuItems();
}
,
hideMenuItem:function(menuItemId)
{
this.menuItem_objects[menuItemId].hide();
}
,
showMenuItem:function(menuItemId)
{
this.menuItem_objects[menuItemId].show();
}
,
setText:function(menuItemId,newText)
{
this.menuItem_objects[menuItemId].setText(newText);
}
,
setIcon:function(menuItemId,newPath)
{
this.menuItem_objects[menuItemId].setIcon(newPath);
}
,
__clearAllMenuItems:function()
{
for(var prop=0;prop<this.menuItemObj.menuItemsOrder.length;prop++){
var id=this.menuItemObj.menuItemsOrder[prop];
if(!id)continue;
if(this.submenuGroups[id]){
var div=document.getElementById(this.submenuGroups[id]);
DHTMLSuite.discardElement(div);
this.submenuGroups[id]=null;
}
if(this.submenuIframes[id]){
var ref=document.getElementById(this.submenuIframes[id]);
DHTMLSuite.discardElement(ref);
this.submenuIframes[id]=null;
}
}
this.submenuGroups=new Array();
this.submenuIframes=new Array();
this.menuBarObj.innerHTML='';
}
,
__deleteMenuItems:function(idOfParentMenuItem,includeParent)
{
if(includeParent)this.menuItemObj.__deleteANode(idOfParentMenuItem);
if(!this.submenuGroups[idOfParentMenuItem])return;
this.menuItem_objects[idOfParentMenuItem].__setHasSub(false);
this.menuItemObj.__deleteChildNodes(idOfParentMenuItem);
var groupBox=document.getElementById(this.submenuGroups[idOfParentMenuItem]);
DHTMLSuite.discardElement(groupBox);
if(this.submenuIframes[idOfParentMenuItem]){
DHTMLSuite.discardElement(this.submenuIframes[idOfParentMenuItem]);
}
this.submenuGroups.splice(idOfParentMenuItem,1);
this.submenuIframes.splice(idOfParentMenuItem,1);
}
,
__changeMenuBarState:function(){
var objectIndex=this.getAttribute('objectRef');
var obj=DHTMLSuite.variableStorage.arrayDSObjects[objectIndex];
var parentId=this.id.replace(/[^0-9]/gi,'');
var state=obj.menuItem_objects[parentId].getState();
if(state=='disabled')return;
obj.menuBarState=!obj.menuBarState;
if(!obj.menuBarState)obj.hideSubMenus();else{
obj.hideSubMenus();
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+objectIndex+'].__expandGroup('+parentId+')',10);
}
}
,
__createMainMenuDiv:function()
{
window.refTomenuBar=this;
this.menuBarObj=document.createElement('DIV');
this.menuBarObj.className=this.cssPrefix+'menuBar_'+this.menuItemObj.submenuType[1];
if(!document.getElementById(this.targetId)){
alert('No target defined for the menu object');
return;
}
var target=document.getElementById(this.targetId);
target.appendChild(this.menuBarObj);
}
,
hideSubMenus:function(e)
{
if(this&&this.tagName){
if(document.all)e=event;
var srcEl=DHTMLSuite.commonObj.getSrcElement(e);
if(srcEl.tagName.toLowerCase()=='img')srcEl=srcEl.parentNode;
try{
if(srcEl.className&&srcEl.className.indexOf('arrow')>=0){
return;
}
}catch(err){}
}
for(var no=0;no<DHTMLSuite.variableStorage.menuBar_highlightedItems.length;no++){
if(DHTMLSuite.variableStorage.menuBar_highlightedItems[no].getState()!='disabled')DHTMLSuite.variableStorage.menuBar_highlightedItems[no].setState('regular');
DHTMLSuite.variableStorage.menuBar_highlightedItems[no].__hideGroup();
}
DHTMLSuite.variableStorage.menuBar_highlightedItems=new Array();
}
,
__hideSubMenusAfterSmallDelay:function()
{
var ind=this.objectIndex;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].hideSubMenus()',15);
}
,
__expandGroup:function(idOfParentMenuItem)
{
var groupRef=document.getElementById(this.submenuGroups[idOfParentMenuItem]);
var subDiv=groupRef.getElementsByTagName('DIV')[0];
var numericId=subDiv.id.replace(/[^0-9]/g,'');
groupRef.style.visibility='visible';
if(this.submenuIframes[idOfParentMenuItem])document.getElementById(this.submenuIframes[idOfParentMenuItem]).style.visibility='visible';
DHTMLSuite.variableStorage.menuBar_highlightedItems[DHTMLSuite.variableStorage.menuBar_highlightedItems.length]=this.menuItem_objects[numericId];
this.__positionSubMenu(idOfParentMenuItem);
if(DHTMLSuite.clientInfoObj.isOpera){
var subDiv=groupRef.getElementsByTagName('DIV')[0];
subDiv.className=subDiv.className.replace('_over','_over');
}
}
,
__activateMenuElements:function(e,firstIteration,parentMenuItemObject)
{
if(!parentMenuItemObject){
if(document.all)e=event;
parentMenuItemObject=DHTMLSuite.commonObj.getSrcElement(e);
if(!parentMenuItemObject.getAttribute('DHTMLSuite_menuItem'))parentMenuItemObject=parentMenuItemObject.parentNode;
if(!parentMenuItemObject.getAttribute('DHTMLSuite_menuItem'))parentMenuItemObject=parentMenuItemObject.parentNode;
}
var numericId=parentMenuItemObject.id.replace(/[^0-9]/g,'');
var state=this.menuItem_objects[numericId].getState();
if(state=='disabled')return;
this.menuItem_objects[numericId].setState('over');
if(!this.menuBarState&&!this.activeSubItemsOnMouseOver)return;
if(firstIteration&&DHTMLSuite.variableStorage.menuBar_highlightedItems.length>0){
this.hideSubMenus();
}
var newState='over';
if(!firstIteration)newState='active';
this.menuItem_objects[numericId].setState(newState);
if(this.submenuGroups[numericId]){
this.__expandGroup(numericId);
}
DHTMLSuite.variableStorage.menuBar_highlightedItems[DHTMLSuite.variableStorage.menuBar_highlightedItems.length]=this.menuItem_objects[numericId];
if(this.menuItems[numericId].parentId){
this.__activateMenuElements(false,false,document.getElementById(this.menuItem_objects[this.menuItems[numericId].parentId].divElement));
}
}
,
__createMenuItems:function()
{
var index=this.objectIndex;
var firstChild=false;
var firstChilds=document.getElementsByTagName('DIV');
if(firstChilds.length>0)firstChild=firstChilds[0]
for(var no=0;no<this.menuItemObj.menuItemsOrder.length;no++){
var indexThis=this.menuItemObj.menuItemsOrder[no];
if(!this.menuItems[indexThis].id)continue;
try{
this.menuItem_objects[this.menuItems[indexThis].id]=new DHTMLSuite.menuItem();
}catch(e){
alert('Error: You need to include dhtmlSuite-menuItem.js in your html file');
}
if(this.menuItemCssPrefix)this.menuItem_objects[this.menuItems[indexThis].id].setCssPrefix(this.menuItemCssPrefix);
if(this.menuItemLayoutCss)this.menuItem_objects[this.menuItems[indexThis].id].setLayoutCss(this.menuItemLayoutCss);
var ref=this.menuItem_objects[this.menuItems[indexThis].id].createItem(this.menuItems[indexThis]);
ref.setAttribute('DHTMLSuite_menuItem',1);
if(!this.menuItems[indexThis].separator){
ref.onmouseover=function(e){DHTMLSuite.variableStorage.arrayDSObjects[index].__activateMenuElements(e,true);}
}
if(!this.menuItems[indexThis].jsFunction&&!this.menuItems[indexThis].url){
ref.setAttribute('objectRef',index);
ref.onclick=this.__changeMenuBarState;
}
DHTMLSuite.commonObj.__addEventEl(ref);
if(this.menuItem_objects[this.menuItems[indexThis].id].expandElement&&1==2){
try{
var expandRef=document.getElementById(this.menuItem_objects[this.menuItems[indexThis].id].expandElement);
var parentId=DHTMLSuite.variableStorage.arrayDSObjects[index].menuItems[indexThis].parentId+'';
var tmpId=expandRef.id.replace(/[^0-9]/gi,'');
expandRef.setAttribute('objectRef',index/1);
expandRef.objectRef=index/1;
}catch(e){
}
}
var target=this.menuBarObj;
if(this.menuItems[indexThis].depth==1&&this.menuItemObj.submenuType[this.menuItems[indexThis].depth]!='top'&&this.menuItemObj.mainMenuGroupWidth){
var tmpWidth=this.menuItemObj.mainMenuGroupWidth+'';
if(tmpWidth.indexOf('%')==-1)tmpWidth=tmpWidth+'px';
target.style.width=tmpWidth;
}
if(this.menuItems[indexThis].depth=='1'){
if(this.menuItemObj.submenuType[this.menuItems[indexThis].depth]=='top'){
ref.style.styleFloat='left';
ref.style.cssText='float:left';
}
}else{
if(!this.menuItems[indexThis].depth){
alert('Error in menu model(depth not defined for a menu item). Remember to call the init()method for the menuModel object.');
return;
}
if(!this.submenuGroups[this.menuItems[indexThis].parentId]){
this.submenuGroups[this.menuItems[indexThis].parentId]='DHTMLSuite_menuBarSubGroup'+this.menuItems[indexThis].parentId;
var div=document.createElement('DIV');
div.style.zIndex=30000;
div.style.position='absolute';
div.id=this.submenuGroups[this.menuItems[indexThis].parentId];
div.style.visibility='hidden';
div.className=this.cssPrefix+'menuBar_'+this.menuItemObj.submenuType[this.menuItems[indexThis].depth];
if(firstChild){
firstChild.parentNode.insertBefore(div,firstChild);
}else{
document.body.appendChild(div);
}
if(DHTMLSuite.clientInfoObj.isMSIE&&this.createIframesForOldIeBrowsers){
this.submenuIframes[this.menuItems[indexThis].parentId]='DHTMLSuite_menuBarIframe_'+this.menuItems[indexThis].parentId;
var iframe=document.createElement('<IFRAME src="about:blank" frameborder=0>');
iframe.id=this.submenuIframes[this.menuItems[indexThis].parentId];
iframe.style.position='absolute';
iframe.style.zIndex=9000;
iframe.style.visibility='hidden';
if(firstChild){
firstChild.parentNode.insertBefore(iframe,firstChild);
}else{
document.body.appendChild(iframe);
}
}
}
target=document.getElementById(this.submenuGroups[this.menuItems[indexThis].parentId]);
}
target.appendChild(ref);
if(this.menuItems[indexThis].visible==false)this.hideMenuItem(this.menuItems[indexThis].id);
if(this.menuItems[indexThis].state!='regular')this.menuItem_objects[this.menuItems[indexThis].id].setState(this.menuItems[indexThis].state);
}
this.__setSizeOfAllSubMenus();
this.__positionAllSubMenus();
if(DHTMLSuite.clientInfoObj.isOpera)this.__fixMenuLayoutForOperaBrowser();
}
,
__fixMenuLayoutForOperaBrowser:function()
{
for(var no=0;no<this.menuItemObj.menuItemsOrder.length;no++){
var id=this.menuItemObj.menuItemsOrder[no];
if(!id)continue;
document.getElementById(this.menuItem_objects[id].divElement).className=document.getElementById(this.menuItem_objects[id].divElement).className.replace('_regular','_regular');
}
}
,
__setSizeOfAllSubMenus:function()
{
for(var no=0;no<this.menuItemObj.menuItemsOrder.length;no++){
var prop=this.menuItemObj.menuItemsOrder[no];
if(!prop)continue;
this.__setSizeOfSubMenus(prop);
}
}
,
__positionAllSubMenus:function()
{
for(var no=0;no<this.menuItemObj.menuItemsOrder.length;no++){
var prop=this.menuItemObj.menuItemsOrder[no];
if(!prop)continue;
if(this.submenuGroups[prop])this.__positionSubMenu(prop);
}
}
,
__positionSubMenu:function(parentId)
{
try{
var shortRef=document.getElementById(this.submenuGroups[parentId]);
var depth=this.menuItems[parentId].depth;
var dir=this.menuItemObj.submenuType[depth];
var ref=document.getElementById(this.menuItem_objects[parentId].divElement);
if(dir=='top'){
shortRef.style.left=DHTMLSuite.commonObj.getLeftPos(ref)+'px';
shortRef.style.top=(DHTMLSuite.commonObj.getTopPos(ref)+ref.offsetHeight)+'px';
}else{
shortRef.style.left=(DHTMLSuite.commonObj.getLeftPos(ref)+ref.offsetWidth)+'px';
shortRef.style.top=(DHTMLSuite.commonObj.getTopPos(ref))+'px';
}
if(DHTMLSuite.clientInfoObj.isMSIE){
var iframeRef=document.getElementById(this.submenuIframes[parentId]);
iframeRef.style.left=shortRef.style.left;
iframeRef.style.top=shortRef.style.top;
iframeRef.style.width=shortRef.clientWidth+'px';
iframeRef.style.height=shortRef.clientHeight+'px';
}
}catch(e){
}
}
,
__setSizeOfSubMenus:function(parentId)
{
try{
var shortRef=document.getElementById(this.submenuGroups[parentId]);
var subWidth=Math.max(shortRef.offsetWidth,document.getElementById(this.menuItem_objects[parentId].divElement).offsetWidth);
if(this.menuItems[parentId].submenuWidth)subWidth=this.menuItems[parentId].submenuWidth;
if(subWidth>400)subWidth=150;
subWidth=subWidth+'';
if(subWidth.indexOf('%')==-1)subWidth=subWidth+'px';
shortRef.style.width=subWidth;
if(DHTMLSuite.clientInfoObj.isMSIE){
var ref=document.getElementById(this.submenuIframes[parentId]);
ref.style.width=shortRef.style.width;
ref.style.height=shortRef.style.height;
}
}catch(e){
}
}
,
__repositionMenu:function(inputObj)
{
inputObj.menuBarObj.style.top=document.documentElement.scrollTop+'px';
}
,
__menuItemRollOver:function(menuItemHTMLElementRef)
{
var numericId=menuItemHTMLElementRef.id.replace(/[^0-9]/g,'');
menuItemHTMLElementRef.className='DHTMLSuite_menuBar_menuItem_over_'+this.menuItems[numericId]['depth'];
}
,
__menuItemRollOut:function(menuItemHTMLElementRef)
{
var numericId=menuItemHTMLElementRef.id.replace(/[^0-9]/g,'');
menuItemHTMLElementRef.className='DHTMLSuite_menuBar_menuItem_'+this.menuItems[numericId]['depth'];
}
,
__menuNavigate:function(menuItemHTMLElementRef)
{
var numericIndex=menuItemHTMLElementRef.id.replace(/[^0-9]/g,'');
var url=this.menuItems[numericIndex]['url'];
if(!url)return;
}
,
__setBasicEvents:function()
{
var ind=this.objectIndex;
DHTMLSuite.commonObj.addEvent(document.documentElement,"click",this.hideSubMenus);
DHTMLSuite.commonObj.addEvent(document.documentElement,"mouseup",this.hideSubMenus);
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.menuItem=function(){
var layoutCSS;
var divElement;
var expandElement;
var cssPrefix;
var modelItemRef;
this.layoutCSS='menu-item.css';
this.cssPrefix='DHTMLSuite_';
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
}
DHTMLSuite.menuItem.prototype=
{
createItem:function(menuModelItemObj)
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
this.modelItemRef=menuModelItemObj;
this.divElement='DHTMLSuite_menuItem'+menuModelItemObj.id;
var div=document.createElement('DIV');
document.body.appendChild(div);
div.id=this.divElement;
div.className=this.cssPrefix+'menuItem_'+menuModelItemObj.type+'_regular';
div.onselectstart=function(){return false;};
if(menuModelItemObj.helpText){
div.title=menuModelItemObj.helpText;
}
if(menuModelItemObj.type=='top'){
this.__createMenuElementsOfTypeTop(div);
}
if(menuModelItemObj.type=='sub'){
this.__createMenuElementsOfTypeSub(div);
}
if(menuModelItemObj.separator){
div.className=this.cssPrefix+'menuItem_separator_'+menuModelItemObj.type;
div.innerHTML='<span></span>';
}else{
var tmpVar=this.objectIndex/1;
div.onclick=function(e){DHTMLSuite.variableStorage.arrayDSObjects[tmpVar].__navigate(e);}
div.onmousedown=this.__clickMenuItem;
div.onmouseup=this.__rolloverMenuItem;
div.onmouseover=this.__rolloverMenuItem;
div.onmouseout=this.__rolloutMenuItem;
}
DHTMLSuite.commonObj.__addEventEl(div);
return div;
}
,
setLayoutCss:function(newLayoutCss)
{
this.layoutCSS=newLayoutCss;
}
,
__createMenuElementsOfTypeTop:function(parentEl){
if(this.modelItemRef.itemIcon){
var iconDiv=document.createElement('DIV');
iconDiv.innerHTML='<img src="'+this.modelItemRef.itemIcon+'">';
iconDiv.id='menuItemIcon'+this.modelItemRef.id
parentEl.appendChild(iconDiv);
}
if(this.modelItemRef.itemText){
var div=document.createElement('DIV');
div.innerHTML=this.modelItemRef.itemText;
div.className=this.cssPrefix+'menuItem_textContent';
div.id='menuItemText'+this.modelItemRef.id;
parentEl.appendChild(div);
}
if(this.modelItemRef.hasSubs){
var div=document.createElement('DIV');
div.className=this.cssPrefix+'menuItem_top_arrowShowSub';
div.id='DHTMLSuite_menuBar_arrow'+this.modelItemRef.id;
parentEl.appendChild(div);
this.expandElement=div.id;
}
}
,
__createMenuElementsOfTypeSub:function(parentEl){
if(this.modelItemRef.itemIcon){
parentEl.style.backgroundImage='url(\''+this.modelItemRef.itemIcon+'\')';
parentEl.style.backgroundRepeat='no-repeat';
parentEl.style.backgroundPosition='left center';
}
if(this.modelItemRef.itemText){
var div=document.createElement('DIV');
div.className='DHTMLSuite_textContent';
div.innerHTML=this.modelItemRef.itemText;
div.className=this.cssPrefix+'menuItem_textContent';
div.id='menuItemText'+this.modelItemRef.id;
parentEl.appendChild(div);
}
if(this.modelItemRef.hasSubs){
var div=document.createElement('DIV');
div.className=this.cssPrefix+'menuItem_sub_arrowShowSub';
parentEl.appendChild(div);
div.id='DHTMLSuite_menuBar_arrow'+this.modelItemRef.id;
this.expandElement=div.id;
div.previousSibling.style.paddingRight='15px';
}
}
,
setCssPrefix:function(cssPrefix)
{
this.cssPrefix=cssPrefix;
}
,
setIcon:function(newPath)
{
this.modelItemRef.setIcon(newPath);
if(this.modelItemRef.type=='top'){
var div=document.getElementById('menuItemIcon'+this.modelItemRef.id);
var img=div.getElementsByTagName('IMG')[0];
if(!img){
img=document.createElement('IMG');
div.appendChild(img);
}
img.src=newPath;
if(!newPath)DHTMLSuite.discardElement(img);
}
if(this.modelItemRef.type=='sub'){
document.getElementById(this.divElement).style.backgroundImage='url(\''+newPath+'\')';
}
}
,
setText:function(newText)
{
this.modelItemRef.setText(newText);
document.getElementById('menuItemText'+this.modelItemRef.id).innerHTML=newText;
}
,
__clickMenuItem:function()
{
this.className=this.className.replace('_regular','_click');
this.className=this.className.replace('_over','_click');
}
,
__rolloverMenuItem:function()
{
this.className=this.className.replace('_regular','_over');
this.className=this.className.replace('_click','_over');
}
,
__rolloutMenuItem:function()
{
this.className=this.className.replace('_over','_regular');
}
,
setState:function(newState)
{
document.getElementById(this.divElement).className=this.cssPrefix+'menuItem_'+this.modelItemRef.type+'_'+newState;
this.modelItemRef.setState(newState);
}
,
getState:function()
{
var state=this.modelItemRef.getState();
if(!state){
if(document.getElementById(this.divElement).className.indexOf('_over')>=0)state='over';
if(document.getElementById(this.divElement).className.indexOf('_click')>=0)state='click';
this.modelItemRef.setState(state);
}
return state;
}
,
__setHasSub:function(hasSubs)
{
this.modelItemRef.hasSubs=hasSubs;
if(!hasSubs){
document.getElementById(this.cssPrefix+'menuBar_arrow'+this.modelItemRef.id).style.display='none';
}else{
document.getElementById(this.cssPrefix+'menuBar_arrow'+this.modelItemRef.id).style.display='block';
}
}
,
hide:function()
{
this.modelItemRef.setVisibility(false);
document.getElementById(this.divElement).style.display='none';
}
,
show:function()
{
this.modelItemRef.setVisibility(true);
document.getElementById(this.divElement).style.display='block';
}
,
__hideGroup:function()
{
if(this.modelItemRef.parentId){
document.getElementById(this.divElement).parentNode.style.visibility='hidden';
if(DHTMLSuite.clientInfoObj.isMSIE){
try{
var tmpId=document.getElementById(this.divElement).parentNode.id.replace(/[^0-9]/gi,'');
document.getElementById('DHTMLSuite_menuBarIframe_'+tmpId).style.visibility='hidden';
}catch(e){
}
}
}
}
,
__navigate:function(e)
{
if(document.all)e=event;
if(e){
var srcEl=DHTMLSuite.commonObj.getSrcElement(e);
if(srcEl.id.indexOf('arrow')>=0)return;
}
if(this.modelItemRef.state=='disabled')return;
if(this.modelItemRef.url){
location.href=this.modelItemRef.url;
}
if(this.modelItemRef.jsFunction){
try{
eval(this.modelItemRef.jsFunction);
}catch(e){
alert('Defined Javascript code for the menu item( '+this.modelItemRef.jsFunction+' )cannot be executed');
}
}
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.menuModelItem=function(){
var id;
var itemText;
var itemIcon;
var url;
var parentId;
var separator;
var jsFunction;
var depth;
var hasSubs;
var type;
var helpText;
var state;
var submenuWidth;
var visible;
this.state='regular';
}
DHTMLSuite.menuModelItem.prototype={
setMenuVars:function(id,itemText,itemIcon,url,parentId,helpText,jsFunction,type,submenuWidth)
{
this.id=id;
this.itemText=itemText;
this.itemIcon=itemIcon;
this.url=url;
this.parentId=parentId;
this.jsFunction=jsFunction;
this.separator=false;
this.depth=false;
this.hasSubs=false;
this.helpText=helpText;
this.submenuWidth=submenuWidth;
this.visible=true;
if(!type){
if(this.parentId)this.type='top';else this.type='sub';
}else this.type=type;
}
,
setAsSeparator:function(id,parentId)
{
this.id=id;
this.parentId=parentId;
this.separator=true;
this.visible=true;
if(this.parentId)this.type='top';else this.type='sub';
}
,
setVisibility:function(visible)
{
this.visible=visible;
}
,
getState:function()
{
return this.state;
}
,
setState:function(newState)
{
this.state=newState;
}
,
setSubMenuWidth:function(newWidth)
{
this.submenuWidth=newWidth;
}
,
setIcon:function(iconPath)
{
this.itemIcon=iconPath;
}
,
setText:function(newText)
{
this.itemText=newText;
}
}
DHTMLSuite.menuModel=function(){
var menuItems;
var menuItemsOrder;
var submenuType;
var mainMenuGroupWidth;
this.menuItems=new Object();
this.menuItemsOrder=new Array();
this.submenuType=new Array();
this.submenuType[1]='top';
for(var no=2;no<20;no++){
this.submenuType[no]='sub';
}
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
}
DHTMLSuite.menuModel.prototype={
addItem:function(id,itemText,itemIcon,url,parentId,helpText,jsFunction,type,submenuWidth)
{
if(!id)id=this.__getUniqueId();
try{
this.menuItems[id]=new DHTMLSuite.menuModelItem();
}catch(e){
alert('Error: You need to include dhtmlSuite-menuModel.js in your html file');
}
this.menuItems[id].setMenuVars(id,itemText,itemIcon,url,parentId,helpText,jsFunction,type,submenuWidth);
this.menuItemsOrder[this.menuItemsOrder.length]=id;
return this.menuItems[id];
}
,
addItemsFromMarkup:function(ulId)
{
if(!document.getElementById(ulId)){
alert('<UL> tag with id '+ulId+' does not exist');
return;
}
var ulObj=document.getElementById(ulId);
var liTags=ulObj.getElementsByTagName('LI');
for(var no=0;no<liTags.length;no++){
var id=liTags[no].id.replace(/[^0-9]/gi,'');
if(!id||this.menuItems[id])id=this.__getUniqueId();
try{
this.menuItems[id]=new DHTMLSuite.menuModelItem();
}catch(e){
alert('Error: You need to include dhtmlSuite-menuModel.js in your html file');
}
this.menuItemsOrder[this.menuItemsOrder.length]=id;
var parentId=0;
if(liTags[no].parentNode!=ulObj)parentId=liTags[no].parentNode.parentNode.id;
var type=liTags[no].getAttribute('itemType');
if(!type)type=liTags[no].itemType;
if(type=='separator'){
this.menuItems[id].setAsSeparator(id,parentId);
continue;
}
if(parentId)type='sub';else type='top';
var aTag=liTags[no].getElementsByTagName('A')[0];
if(!aTag){
continue;
}
if(aTag)var itemText=aTag.innerHTML;
var itemIcon=liTags[no].getAttribute('itemIcon');
var url=aTag.href;
if(url=='#'||url.substr(url.length-1,1)=='#')url='';
var jsFunction=liTags[no].getAttribute('jsFunction');
var submenuWidth=false;
var helpText=aTag.getAttribute('title');
if(!helpText)helpText=aTag.title;
this.menuItems[id].setMenuVars(id,itemText,itemIcon,url,parentId,helpText,jsFunction,type,submenuWidth);
}
var subUls=ulObj.getElementsByTagName('UL');
for(var no=0;no<subUls.length;no++){
var width=subUls[no].getAttribute('width');
if(!width)width=subUls[no].width;
if(width){
var id=subUls[no].parentNode.id.replace(/[^0-9]/gi,'');
this.setSubMenuWidth(id,width);
}
}
ulObj.style.display='none';
}
,
setSubMenuWidth:function(id,newWidth)
{
this.menuItems[id].setSubMenuWidth(newWidth);
}
,
setMainMenuGroupWidth:function(newWidth)
{
this.mainMenuGroupWidth=newWidth;
}
,
addSeparator:function(parentId)
{
id=this.__getUniqueId();
if(!parentId)parentId=0;
try{
this.menuItems[id]=new DHTMLSuite.menuModelItem();
}catch(e){
alert('Error: You need to include dhtmlSuite-menuModel.js in your html file');
}
this.menuItems[id].setAsSeparator(id,parentId);
this.menuItemsOrder[this.menuItemsOrder.length]=id;
return this.menuItems[id];
}
,
init:function()
{
this.__getDepths();
this.__setHasSubs();
}
,
setMenuItemVisibility:function(id,visible)
{
this.menuItems[id].setVisibility(visible);
}
,
setSubMenuType:function(depth,newType)
{
this.submenuType[depth]=newType;
this.__getDepths();
}
,
getItems:function(parentId,returnArray)
{
if(!parentId)return this.menuItems;
if(!returnArray)returnArray=new Array();
for(var no=0;no<this.menuItemsOrder.length;no++){
var id=this.menuItemsOrder[no];
if(!id)continue;
if(this.menuItems[id].parentId==parentId){
returnArray[returnArray.length]=this.menuItems[id];
if(this.menuItems[id].hasSubs)return this.getItems(this.menuItems[id].id,returnArray);
}
}
return returnArray;
}
,
__getUniqueId:function()
{
var num=Math.random()+'';
num=num.replace('.','');
num='99'+num;
num=num/1;
while(this.menuItems[num]){
num=Math.random()+'';
num=num.replace('.','');
num=num/1;
}
return num;
}
,
__getDepths:function()
{
for(var no=0;no<this.menuItemsOrder.length;no++){
var id=this.menuItemsOrder[no];
if(!id)continue;
this.menuItems[id].depth=1;
if(this.menuItems[id].parentId){
this.menuItems[id].depth=this.menuItems[this.menuItems[id].parentId].depth+1;
}
this.menuItems[id].type=this.submenuType[this.menuItems[id].depth];
}
}
,
__setHasSubs:function()
{
for(var no=0;no<this.menuItemsOrder.length;no++){
var id=this.menuItemsOrder[no];
if(!id)continue;
if(this.menuItems[id].parentId){
this.menuItems[this.menuItems[id].parentId].hasSubs=1;
}
}
}
,
__hasSubs:function(id)
{
for(var no=0;no<this.menuItemsOrder.length;no++){
var id=this.menuItemsOrder[no];
if(!id)continue;
if(this.menuItems[id].parentId==id)return true;
}
return false;
}
,
__deleteChildNodes:function(parentId,recursive)
{
var itemsToDeleteFromOrderArray=new Array();
for(var prop=0;prop<this.menuItemsOrder.length;prop++){
var id=this.menuItemsOrder[prop];
if(!id)continue;
if(this.menuItems[id].parentId==parentId&&parentId){
this.menuItems[id]=false;
itemsToDeleteFromOrderArray[itemsToDeleteFromOrderArray.length]=id;
this.__deleteChildNodes(id,true);
}
}
if(!recursive){
for(var prop=0;prop<itemsToDeleteFromOrderArray.length;prop++){
if(!itemsToDeleteFromOrderArray[prop])continue;
this.__deleteItemFromItemOrderArray(itemsToDeleteFromOrderArray[prop]);
}
}
this.__setHasSubs();
}
,
__deleteANode:function(id)
{
this.menuItems[id]=false;
this.__deleteItemFromItemOrderArray(id);
}
,
__deleteItemFromItemOrderArray:function(id)
{
for(var no=0;no<this.menuItemsOrder.length;no++){
var tmpId=this.menuItemsOrder[no];
if(!tmpId)continue;
if(this.menuItemsOrder[no]==id){
this.menuItemsOrder.splice(no,1);
return;
}
}
}
,
__appendMenuModel:function(newModel,parentId)
{
if(!newModel)return;
var items=newModel.getItems();
for(var no=0;no<newModel.menuItemsOrder.length;no++){
var id=newModel.menuItemsOrder[no];
if(!id)continue;
if(!items[id].parentId)items[id].parentId=parentId;
this.menuItems[id]=items[id];
for(var no2=0;no2<this.menuItemsOrder.length;no2++){
if(!this.menuItemsOrder[no2])continue;
if(this.menuItemsOrder[no2]==items[id].id){
this.menuItemsOrder.splice(no2,1);
}
}
this.menuItemsOrder[this.menuItemsOrder.length]=items[id].id;
}
this.__getDepths();
this.__setHasSubs();
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.paneSplitterPane=function(parentRef)
{
var divElement;
var divElCollapsed;
var divElCollapsedInner;
var contentDiv;
var headerDiv;
var titleSpan;
var paneModel;
var resizeDiv;
var tabDiv;
var divTransparentForResize;
var parentRef;
var divClose;
var divCollapse;
var divExpand;
var divRefresh;
var slideIsInProgress;
var reloadIntervalHandlers;
var contentScrollTopPositions;
this.contents=new Array();
this.reloadIntervalHandlers=new Object();
this.contentScrollTopPositions=new Object();
this.parentRef=parentRef;
var activeContentIndex;
this.activeContentIndex=false;
this.slideIsInProgress=false;
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.paneSplitterPane.prototype=
{
addDataSource:function(paneModelRef)
{
this.paneModel=paneModelRef;
}
,
addContent:function(paneContentModelObject,jsCodeToExecuteWhenComplete)
{
var retValue=this.paneModel.addContent(paneContentModelObject);
if(!retValue)return false;
this.__addOneContentDiv(paneContentModelObject,jsCodeToExecuteWhenComplete);
this.__updateTabContent();
this.__updateView();
if(this.paneModel.getCountContent()==1)this.showContent(paneContentModelObject.id);
return retValue
}
,
showContent:function(idOfContentObject)
{
for(var no=0;no<this.paneModel.contents.length;no++){
if(this.paneModel.contents[no].id==idOfContentObject){
this.__updatePaneView(no);
return;
}
}
}
,
loadContent:function(idOfContentObject,url,refreshAfterSeconds,internalCall,onCompleteJsCode)
{
if(!url)return;
for(var no=0;no<this.paneModel.contents.length;no++){
if(this.paneModel.contents[no].id==idOfContentObject){
if(internalCall&&!this.paneModel.contents[no].refreshAfterSeconds)return;
var ajaxWaitMsg=this.parentRef.waitMessage;
this.paneModel.contents[no].__setContentUrl(url);
if(refreshAfterSeconds&&!internalCall){
this.paneModel.contents[no].__setRefreshAfterSeconds(refreshAfterSeconds);
}
if(refreshAfterSeconds)this.__handleContentReload(idOfContentObject,refreshAfterSeconds);
try{
var dynContent=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
dynContent.setWaitMessage(ajaxWaitMsg);
dynContent.loadContent(this.paneModel.contents[no].htmlElementId,url,onCompleteJsCode);
dynContent=false;
return;
}
}
}
,
isUrlLoadedInPane:function(idOfContentObject,url)
{
var contentIndex=this.paneModel.__getIndexById(idOfContentObject);
if(contentIndex!==false){
if(this.paneModel.contents[contentIndex].contentUrl==url)return true;
}
return false;
}
,
reloadContent:function(idOfContentObject)
{
var contentIndex=this.paneModel.__getIndexById(idOfContentObject);
if(contentIndex!==false){
this.loadContent(idOfContentObject,this.paneModel.contents[contentIndex].contentUrl);
}
}
,
setRefreshAfterSeconds:function(idOfContentObject,refreshAfterSeconds)
{
for(var no=0;no<this.paneModel.contents.length;no++){
if(this.paneModel.contents[no].id==idOfContentObject){
if(!this.paneModel.contents[no].refreshAfterSeconds){
this.loadContent(idOfContentObject,this.paneModel.contents[no].contentUrl,refreshAfterSeconds);
}
this.paneModel.contents[no].__setRefreshAfterSeconds(refreshAfterSeconds);
this.__handleContentReload(idOfContentObject);
}
}
}
,
setContentTitle:function(idOfContent,newTitle)
{
var contentModelIndex=this.paneModel.__getIndexById(idOfContent);
if(contentModelIndex!==false){
var contentModelObj=this.paneModel.contents[contentModelIndex];
contentModelObj.__setTitle(newTitle);
this.__updateHeaderBar(this.activeContentIndex);
}
}
,
setContentTabTitle:function(idOfContent,newTitle)
{
var contentModelIndex=this.paneModel.__getIndexById(idOfContent);
if(contentModelIndex!==false){
var contentModelObj=this.paneModel.contents[contentModelIndex];
contentModelObj.__setTabTitle(newTitle);
this.__updateTabContent();
}
}
,
hidePane:function()
{
this.paneModel.__setVisible(false);
this.expand();
this.divElement.style.display='none';
this.__executeCallBack("hide",this.paneModel.contents[this.activeContentIndex]);
}
,
showPane:function()
{
this.paneModel.__setVisible(true);
this.divElement.style.display='block';
this.__executeCallBack("show",this.paneModel.contents[this.activeContentIndex]);
}
,
collapse:function()
{
this.__collapse();
if(!this.parentRef.dataModel.collapseButtonsInTitleBars)this.parentRef.__toggleCollapseExpandButton(this.paneModel.getPosition(),'collapse');
}
,
expand:function()
{
this.__expand();
if(!this.parentRef.dataModel.collapseButtonsInTitleBars)this.parentRef.__toggleCollapseExpandButton(this.paneModel.getPosition(),'expand');
}
,
getIdOfCurrentlyDisplayedContent:function()
{
return this.paneModel.contents[this.activeContentIndex].id;
}
,
getHtmlElIdOfCurrentlyDisplayedContent:function()
{
return this.paneModel.contents[this.activeContentIndex].htmlElementId;
}
,
__getSizeOfPaneInPixels:function()
{
var retArray=new Object();
retArray.width=this.divElement.offsetWidth;
retArray.height=this.divElement.offsetHeight;
return retArray;
}
,
__reloadDisplayedContent:function()
{
this.reloadContent(this.paneModel.contents[this.activeContentIndex].id);
}
,
__getReferenceTomainDivEl:function()
{
return this.divElement;
}
,
__executeResizeCallBack:function()
{
this.__executeCallBack('resize');
}
,
__executeCallBack:function(whichCallBackAction,contentObj)
{
var callbackString=false;
switch(whichCallBackAction){
case"show":
if(!this.paneModel.callbackOnShow)return;
callbackString=this.paneModel.callbackOnShow;
break;
case"collapse":
if(!this.paneModel.callbackOnCollapse)return;
callbackString=this.paneModel.callbackOnCollapse;
break;
case"expand":
if(!this.paneModel.callbackOnExpand)return;
callbackString=this.paneModel.callbackOnExpand;
break;
case"hide":
if(!this.paneModel.callbackOnHide)return;
callbackString=this.paneModel.callbackOnHide;
break;
case"slideIn":
if(!this.paneModel.callbackOnSlideIn)return;
callbackString=this.paneModel.callbackOnSlideIn;
break;
case"slideOut":
if(!this.paneModel.callbackOnSlideOut)return;
callbackString=this.paneModel.callbackOnSlideOut;
break;
case"closeContent":
if(!this.paneModel.callbackOnCloseContent)return;
callbackString=this.paneModel.callbackOnCloseContent;
break;
case"beforeCloseContent":
if(!this.paneModel.callbackOnBeforeCloseContent)return true;
callbackString=this.paneModel.callbackOnBeforeCloseContent;
break;
case"tabSwitch":
if(!this.paneModel.callbackOnTabSwitch)return;
callbackString=this.paneModel.callbackOnTabSwitch;
break;
case"resize":
if(!this.paneModel.callbackOnResize)return;
callbackString=this.paneModel.callbackOnResize;
break;
}
if(!callbackString)return;
if(!contentObj)contentObj=false;
callbackString=this.__getCallBackString(callbackString,whichCallBackAction,contentObj);
return this.__executeCallBackString(callbackString,contentObj);
}
,
__getCallBackString:function(callbackString,whichCallBackAction,contentObj)
{
if(callbackString.indexOf('(')>=0)return callbackString;
if(contentObj){
callbackString=callbackString+'(this.paneModel,"'+whichCallBackAction+'",contentObj)';
}else{
callbackString=callbackString+'(this.paneModel,"'+whichCallBackAction+'")';
}
callbackString=callbackString;
return callbackString;
}
,
__executeCallBackString:function(callbackString,contentObj)
{
try{
return eval(callbackString);
}catch(e){
alert('Could not execute specified call back function:\n'+callbackString+'\n\nError:\n'+e.name+'\n'+e.message+'\n'+'\nMake sure that there aren\'t any errors in your function.\nAlso remember that contentObj would not be present when you click close on the last tab\n(In case a close tab event triggered this callback function)');
}
}
,
__handleContentReload:function(id)
{
var ind=this.objectIndex;
var contentIndex=this.paneModel.__getIndexById(id);
if(contentIndex!==false){
var contentRef=this.paneModel.contents[contentIndex];
if(contentRef.refreshAfterSeconds){
if(this.reloadIntervalHandlers[id])clearInterval(this.reloadIntervalHandlers[id]);
this.reloadIntervalHandlers[id]=setInterval('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].loadContent("'+id+'","'+contentRef.contentUrl+'",'+contentRef.refreshAfterSeconds+',true)',(contentRef.refreshAfterSeconds*1000));
}else{
if(this.reloadIntervalHandlers[id])clearInterval(this.reloadIntervalHandlers[id]);
}
}
}
,
__createPane:function()
{
this.divElement=document.createElement('DIV');
this.divElement.style.position='absolute';
this.divElement.className='DHTMLSuite_pane';
this.divElement.id='DHTMLSuite_pane_'+this.paneModel.getPosition();
document.body.appendChild(this.divElement);
this.__createHeaderBar();
this.__createContentPane();
this.__createTabBar();
this.__createCollapsedPane();
this.__createTransparentDivForResize();
this.__updateView();
this.__addContentDivs();
this.__setSize();
}
,
__createTransparentDivForResize:function()
{
this.divTransparentForResize=document.createElement('DIV');
var ref=this.divTransparentForResize;
ref.style.opacity='0';
ref.style.display='none';
ref.style.filter='alpha(opacity=0)';
ref.style.position='absolute';
ref.style.left='0px';
ref.style.top=this.headerDiv.offsetHeight+'px';
ref.style.height='90%';
ref.style.width='100%';
ref.style.backgroundColor='#FFF';
ref.style.zIndex='1000';
this.divElement.appendChild(ref);
}
,
__createCollapsedPane:function()
{
var ind=this.objectIndex;
var pos=this.paneModel.getPosition();
var buttonSuffix='Vertical';
if(pos=='west'||pos=='east')buttonSuffix='Horizontal';
if(pos=='center')buttonSuffix='';
this.divElCollapsed=document.createElement('DIV');
var obj=this.divElCollapsed;
obj.className='DHTMLSuite_pane_collapsed_'+pos;
obj.style.visibility='hidden';
obj.style.position='absolute';
this.divElCollapsedInner=document.createElement('DIV');
this.divElCollapsedInner.className='DHTMLSuite_pane_collapsedInner';
this.divElCollapsedInner.onmouseover=this.__mouseoverHeaderButton;
this.divElCollapsedInner.onmouseout=this.__mouseoutHeaderButton;
this.divElCollapsedInner.onclick=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__slidePane(e);}
DHTMLSuite.commonObj.__addEventEl(this.divElCollapsedInner);
obj.appendChild(this.divElCollapsedInner);
var buttonDiv=document.createElement('DIV');
buttonDiv.className='buttonDiv';
this.divElCollapsedInner.appendChild(buttonDiv);
document.body.appendChild(obj);
if(this.parentRef.dataModel.collapseButtonsInTitleBars){
if(this.paneModel.getPosition()=='east'||this.paneModel.getPosition()=='west'){
this.divElCollapsedInner.style.width=(this.parentRef.paneSizeCollapsed-6)+'px';
this.divElCollapsed.style.width=(this.parentRef.paneSizeCollapsed)+'px';
if(this.paneModel.getPosition()=='east'){
this.divElCollapsedInner.style.marginLeft='3px';
}
}else{
this.divElCollapsedInner.style.height=(this.parentRef.paneSizeCollapsed-6)+'px';
this.divElCollapsed.style.height=(this.parentRef.paneSizeCollapsed)+'px';
buttonDiv.style.cssText='float:right;clear:both';
}
var pos=this.paneModel.getPosition();
this.divExpand=document.createElement('DIV');
if(pos=='south'||pos=='east')
this.divExpand.className='collapseButton'+buttonSuffix;
else
this.divExpand.className='expandButton'+buttonSuffix;
this.divExpand.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__expand();};
this.divExpand.onmouseover=this.__mouseoverHeaderButton;
this.divExpand.onmouseout=this.__mouseoutHeaderButton;
DHTMLSuite.commonObj.__addEventEl(this.divExpand);
buttonDiv.appendChild(this.divExpand);
}
}
,
__autoSlideInPane:function(e)
{
if(document.all)e=event;
var state=this.paneModel.__getState();
if(state=='collapsed'&&this.divElement.style.visibility!='hidden'){
if(!DHTMLSuite.commonObj.isObjectClicked(this.divElement,e))this.__slidePane(e,true);
}
}
,
__slidePane:function(e,forceSlide)
{
if(this.slideIsInProgress)return;
this.parentRef.paneZIndexCounter++;
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
if(src.className=='buttonDiv')src=src.parentNode;
if(src.className.indexOf('collapsed')<0&&!forceSlide)return;
this.slideIsInProgress=true;
var state=this.paneModel.__getState();
var hideWhenComplete=true;
if(this.divElement.style.visibility=='hidden'){
this.__executeCallBack('slideOut',this.paneModel.contents[this.activeContentIndex]);
this.__setSlideInitPosition();
this.divElement.style.visibility='visible';
this.divElement.style.zIndex=16000+this.parentRef.paneZIndexCounter;
this.divElCollapsed.style.zIndex=16000+this.parentRef.paneZIndexCounter;
var slideTo=this.__getSlideToCoordinates(true);
hideWhenComplete=false;
var slideSpeed=this.__getSlideSpeed(true);
}else{
this.__executeCallBack('slideIn',this.paneModel.contents[this.activeContentIndex]);
var slideTo=this.__getSlideToCoordinates(false);
var slideSpeed=this.__getSlideSpeed(false);
}
this.__processSlideByPixels(slideTo,slideSpeed*this.parentRef.slideSpeed,this.__getCurrentCoordinateInPixels(),hideWhenComplete);
}
,
__setSlideInitPosition:function()
{
var bw=DHTMLSuite.clientInfoObj.getBrowserWidth();
var bh=DHTMLSuite.clientInfoObj.getBrowserHeight();
var pos=this.paneModel.getPosition();
switch(pos){
case"west":
this.divElement.style.left=(0-this.paneModel.size)+'px';
break;
case"east":
this.divElement.style.left=bw+'px';
break;
case"north":
this.divElement.style.top=(0-this.paneModel.size)+'px';
break;
case"south":
this.divElement.style.top=bh+'px';
break;
}
}
,
__getCurrentCoordinateInPixels:function()
{
var pos=this.paneModel.getPosition();
var left=this.divElement.style.left.replace('px','')/1;
var top=this.divElement.style.top.replace('px','')/1;
switch(pos){
case"west":return left;
case"east":return left;
case"south":return top;
case"north":return top;
}
}
,
__getSlideSpeed:function(slideOut)
{
var pos=this.paneModel.getPosition();
switch(pos){
case"west":
case"north":
if(slideOut)return 1;else return-1;
break;
case"south":
case"east":
if(slideOut)return-1;else return 1;
}
}
,
__processSlideByPixels:function(slideTo,slidePixels,currentPos,hideWhenComplete)
{
var pos=this.paneModel.getPosition();
currentPos=currentPos+slidePixels;
var repeatSlide=true;
if(slidePixels>0&&currentPos>slideTo){
currentPos=slideTo;
repeatSlide=false;
}
if(slidePixels<0&&currentPos<slideTo){
currentPos=slideTo;
repeatSlide=false;
}
switch(pos){
case"west":
case"east":
this.divElement.style.left=currentPos+'px';
break;
case"north":
case"south":
this.divElement.style.top=currentPos+'px';
}
if(repeatSlide){
var ind=this.objectIndex;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__processSlideByPixels('+slideTo+','+slidePixels+','+currentPos+','+hideWhenComplete+')',10);
}else{
if(hideWhenComplete){
this.divElement.style.visibility='hidden';
this.divElement.style.zIndex=11000;
this.divElCollapsed.style.zIndex=12000;
}
this.slideIsInProgress=false;
}
}
,
__getSlideToCoordinates:function(slideOut)
{
var bw=DHTMLSuite.clientInfoObj.getBrowserWidth();
var bh=DHTMLSuite.clientInfoObj.getBrowserHeight();
var pos=this.paneModel.getPosition();
switch(pos){
case"west":
if(slideOut)
return this.parentRef.paneSizeCollapsed+this.parentRef.verticalSplitterSize;
else
return(0-this.paneModel.size);
case"east":
if(slideOut)
return bw-this.parentRef.paneSizeCollapsed-this.paneModel.size-this.parentRef.verticalSplitterSize-1;
else
return bw;
case"north":
if(slideOut)
return this.parentRef.paneSizeCollapsed+this.parentRef.horizontalSplitterSize;
else
return(0-this.paneModel.size);
case"south":
if(slideOut)
return bh-this.parentRef.paneSizeCollapsed-this.paneModel.size-this.parentRef.horizontalSplitterSize-1;
else
return bh;
}
}
,
__updateCollapsedSize:function()
{
var pos=this.paneModel.getPosition();
var size;
if(pos=='west'||pos=='east')size=this.divElCollapsed.offsetWidth;
if(pos=='north'||pos=='south')size=this.divElCollapsed.offsetHeight;
if(size)this.parentRef.__setPaneSizeCollapsed(size);
}
,
__createHeaderBar:function()
{
var ind=this.objectIndex;
var pos=this.paneModel.getPosition();
var buttonSuffix='Vertical';
if(pos=='west'||pos=='east')buttonSuffix='Horizontal';
if(pos=='center')buttonSuffix='';
this.headerDiv=document.createElement('DIV');
this.headerDiv.className='DHTMLSuite_paneHeader';
this.headerDiv.style.position='relative';
this.divElement.appendChild(this.headerDiv);
this.titleSpan=document.createElement('SPAN');
this.titleSpan.className='paneTitle';
this.headerDiv.appendChild(this.titleSpan);
var buttonDiv=document.createElement('DIV');
buttonDiv.style.position='absolute';
buttonDiv.style.right='0px';
buttonDiv.style.top='0px';
buttonDiv.className='DHTMLSuite_paneHeader_buttonDiv';
this.headerDiv.appendChild(buttonDiv);
this.divClose=document.createElement('DIV');
this.divClose.className='closeButton';
this.divClose.onmouseover=this.__mouseoverHeaderButton;
this.divClose.onmouseout=this.__mouseoutHeaderButton;
this.divClose.innerHTML='<span></span>';
this.divClose.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__close();};
DHTMLSuite.commonObj.__addEventEl(this.divClose);
buttonDiv.appendChild(this.divClose);
if(pos!='center'&&this.parentRef.dataModel.collapseButtonsInTitleBars){
this.divCollapse=document.createElement('DIV');
if(pos=='south'||pos=='east')
this.divCollapse.className='expandButton'+buttonSuffix;
else
this.divCollapse.className='collapseButton'+buttonSuffix;
this.divCollapse.innerHTML='<span></span>';
this.divCollapse.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapse();};
this.divCollapse.onmouseover=this.__mouseoverHeaderButton;
this.divCollapse.onmouseout=this.__mouseoutHeaderButton;
DHTMLSuite.commonObj.__addEventEl(this.divCollapse);
buttonDiv.appendChild(this.divCollapse);
}
this.divRefresh=document.createElement('DIV');
this.divRefresh.className='refreshButton';
this.divRefresh.onmouseover=this.__mouseoverHeaderButton;
this.divRefresh.onmouseout=this.__mouseoutHeaderButton;
this.divRefresh.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__reloadDisplayedContent();};
DHTMLSuite.commonObj.__addEventEl(this.divRefresh);
buttonDiv.appendChild(this.divRefresh);
this.headerDiv.onselectstart=function(){return false;};
}
,
__mouseoverHeaderButton:function()
{
if(this.className.indexOf('Over')==-1)this.className=this.className+'Over';
}
,
__mouseoutHeaderButton:function()
{
this.className=this.className.replace('Over','');
}
,
__close:function(e)
{
var id=this.paneModel.contents[this.activeContentIndex].id;
var ok=this.__getOnBeforeCloseResult(this.activeContentIndex);
if(!ok)return;
if(id){
this.__executeCallBack('closeContent',this.paneModel.contents[this.activeContentIndex]);
DHTMLSuite.discardElement(this.paneModel.contents[this.activeContentIndex].htmlElementId);
}
this.activeContentIndex=this.paneModel.__deleteContent(this.activeContentIndex);
if(this.activeContentIndex||this.activeContentIndex==0){
this.__executeCallBack('tabSwitch',this.paneModel.contents[this.activeContentIndex]);
}
this.__updatePaneView(this.activeContentIndex);
}
,
__closeAllClosableTabs:function()
{
for(var no=0;no<this.paneModel.contents.length;no++){
var closable=this.paneModel.contents[no].__getClosable();
if(closable){
var id=this.paneModel.contents[no].id;
DHTMLSuite.discardElement(this.paneModel.contents[no].htmlElementId);
this.activeContentIndex=this.paneModel.__deleteContent(no);
this.__updatePaneView(this.activeContentIndex);
no--;
}
}
}
,
__getOnBeforeCloseResult:function(contentIndex)
{
return this.__executeCallBack('beforeCloseContent',this.paneModel.contents[contentIndex]);
}
,
__deleteContentByIndex:function(contentIndex)
{
if(this.paneModel.getCountContent()==0)return;
if(!this.__getOnBeforeCloseResult(contentIndex))return;
var htmlId=this.paneModel.contents[contentIndex].htmlElementId;
if(htmlId){
try{
DHTMLSuite.discardElement(htmlId);
}catch(e){
}
}
var tmpIndex=this.paneModel.__deleteContent(contentIndex);
if(contentIndex==this.activeContentIndex)this.activeContentIndex=tmpIndex;
if(this.activeContentIndex>contentIndex)this.activeContentIndex--;
if(tmpIndex===false)this.activeContentIndex=false;
this.__updatePaneView(this.activeContentIndex);
}
,
__deleteContentById:function(id)
{
var index=this.paneModel.__getIndexById(id);
if(index!==false)this.__deleteContentByIndex(index);
}
,
__collapse:function()
{
this.__updateCollapsedSize();
this.paneModel.__setState('collapsed');
this.divElCollapsed.style.visibility='visible';
this.divElement.style.visibility='hidden';
this.__updateView();
this.parentRef.__hideResizeHandle(this.paneModel.getPosition());
this.parentRef.__positionPanes();
this.__executeCallBack("collapse",this.paneModel.contents[this.activeContentIndex]);
}
,
__expand:function()
{
this.paneModel.__setState('expanded');
this.divElCollapsed.style.visibility='hidden';
this.divElement.style.visibility='visible';
this.__updateView();
this.parentRef.__showResizeHandle(this.paneModel.getPosition());
this.parentRef.__positionPanes();
this.__executeCallBack("expand",this.paneModel.contents[this.activeContentIndex]);
}
,
__updateHeaderBar:function(index)
{
if(index===false){
this.divClose.style.display='none';
this.divRefresh.style.display='none';
try{
if(this.paneModel.getPosition()!='center'&&this.paneModel.collapsable)this.divCollapse.style.display='block';else this.divCollapse.style.display='none';
}catch(e){
}
this.titleSpan.innerHTML='';
return;
}
this.divClose.style.display='block';
this.divRefresh.style.display='block';
if(this.divCollapse)this.divCollapse.style.display='block';
this.titleSpan.innerHTML=this.paneModel.contents[index].title;
var contentObj=this.paneModel.contents[index];
if(!contentObj.closable)this.divClose.style.display='none';
if(!contentObj.displayRefreshButton||!contentObj.contentUrl)this.divRefresh.style.display='none';
if(!this.paneModel.collapsable){
if(this.divCollapse)this.divCollapse.style.display='none';
}
}
,
__showButtons:function()
{
var div=this.headerDiv.getElementsByTagName('DIV')[0];
div.style.visibility='visible';
}
,
__hideButtons:function()
{
var div=this.headerDiv.getElementsByTagName('DIV')[0];
div.style.visibility='hidden';
}
,
__updateView:function()
{
if(this.paneModel.getCountContent()>0&&this.activeContentIndex===false)this.activeContentIndex=0;
this.tabDiv.style.display='block';
this.headerDiv.style.display='block';
var pos=this.paneModel.getPosition();
if(pos=='south'||pos=='north')this.divElCollapsed.style.height=this.parentRef.paneSizeCollapsed;
if(this.paneModel.getCountContent()<2)this.tabDiv.style.display='none';
if(this.activeContentIndex!==false)if(!this.paneModel.contents[this.activeContentIndex].title)this.headerDiv.style.display='none';
if(this.paneModel.state=='expanded')this.__showButtons();else this.__hideButtons();
this.__setSize();
}
,
__createContentPane:function()
{
this.contentDiv=document.createElement('DIV');
this.contentDiv.className='DHTMLSuite_paneContent';
this.contentDiv.id='DHTMLSuite_paneContent'+this.paneModel.getPosition();
if(!this.paneModel.scrollbars)this.contentDiv.style.overflow='hidden';
this.divElement.appendChild(this.contentDiv);
}
,
__createTabBar:function()
{
this.tabDiv=document.createElement('DIV');
this.tabDiv.className='DHTMLSuite_paneTabs';
this.divElement.appendChild(this.tabDiv);
this.__updateTabContent();
}
,
__updateTabContent:function()
{
this.tabDiv.innerHTML='';
var tableObj=document.createElement('TABLE');
tableObj.style.padding='0px';
tableObj.style.margin='0px';
tableObj.cellPadding=0;
tableObj.cellSpacing=0;
this.tabDiv.appendChild(tableObj);
var tbody=document.createElement('TBODY');
tableObj.appendChild(tbody);
var row=tbody.insertRow(0);
var contents=this.paneModel.getContents();
var ind=this.objectIndex;
for(var no=0;no<contents.length;no++){
var cell=row.insertCell(-1);
var divTag=document.createElement('DIV');
divTag.className='paneSplitterInactiveTab';
cell.appendChild(divTag);
var aTag=document.createElement('A');
aTag.title=contents[no].tabTitle;
contents[no].tabTitle=contents[no].tabTitle+'';
aTag.innerHTML=contents[no].tabTitle.replace(' ','&nbsp;')+'';
aTag.id='paneTabLink'+no;
aTag.href='#';
aTag.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__tabClick(e);};
divTag.appendChild(aTag);
DHTMLSuite.commonObj.__addEventEl(aTag);
divTag.appendChild(document.createElement('SPAN'));
}
this.__updateTabView(0);
}
,
__updateTabView:function(activeTab)
{
var tabDivs=this.tabDiv.getElementsByTagName('DIV');
for(var no=0;no<tabDivs.length;no++){
if(no==activeTab){
tabDivs[no].className='paneSplitterActiveTab';
}else tabDivs[no].className='paneSplitterInactiveTab';
}
}
,
__tabClick:function(e)
{
if(document.all)e=event;
var inputObj=DHTMLSuite.commonObj.getSrcElement(e);
if(inputObj.tagName!='A')inputObj=inputObj.parentNode;
var numIdClickedTab=inputObj.id.replace(/[^0-9]/gi,'');
if(numIdClickedTab!=this.activeContentIndex)this.__updatePaneContentScrollTopPosition(this.activeContentIndex,numIdClickedTab);
this.__updatePaneView(numIdClickedTab);
this.__executeCallBack("tabSwitch",this.paneModel.contents[this.activeContentIndex]);
return false;
}
,
__updatePaneContentScrollTopPosition:function(idOfContentToHide,idOfContentToShow)
{
var newScrollTop=0;
if(this.contentScrollTopPositions[idOfContentToShow])newScrollTop=this.contentScrollTopPositions[idOfContentToShow];
var contentParentContainer=document.getElementById(this.paneModel.contents[idOfContentToHide].htmlElementId).parentNode;
this.contentScrollTopPositions[idOfContentToHide]=contentParentContainer.scrollTop;
setTimeout('document.getElementById("'+contentParentContainer.id+'").scrollTop='+newScrollTop,20);
}
,
__addContentDivs:function(onCompleteJsCode)
{
var contents=this.paneModel.getContents();
for(var no=0;no<contents.length;no++){
this.__addOneContentDiv(this.paneModel.contents[no],onCompleteJsCode);
}
this.__updatePaneView(this.activeContentIndex);
}
,
__addOneContentDiv:function(contentObj,onCompleteJsCode)
{
var htmlElementId=contentObj.htmlElementId;
var contentUrl=contentObj.contentUrl;
var refreshAfterSeconds=contentObj.refreshAfterSeconds;
if(htmlElementId){
try{
this.contentDiv.appendChild(document.getElementById(htmlElementId));
document.getElementById(htmlElementId).className='DHTMLSuite_paneContentInner';
document.getElementById(htmlElementId).style.display='none';
}catch(e){
}
}
if(contentUrl){
if(!contentObj.htmlElementId||htmlElementId.indexOf('dynamicCreatedDiv__')==-1){
if(!document.getElementById(htmlElementId)){
this.__createAContentDivDynamically(contentObj);
this.loadContent(contentObj.id,contentUrl,refreshAfterSeconds,false,onCompleteJsCode);
}
}
}
}
,
__createAContentDivDynamically:function(contentObj)
{
var d=new Date();
var divId='dynamicCreatedDiv__'+d.getSeconds()+(Math.random()+'').replace('.','');
if(!document.getElementById(contentObj.id))divId=contentObj.id;
contentObj.__setIdOfContentElement(divId);
var div=document.createElement('DIV');
div.id=divId;
div.className='DHTMLSuite_paneContentInner';
if(contentObj.contentUrl)div.innerHTML=this.parentRef.waitMessage;
this.contentDiv.appendChild(div);
div.style.display='none';
}
,
__updatePaneView:function(index)
{
if(!index&&index!==0)index=this.activeContentIndex;
this.__updateTabContent();
this.__updateView();
this.__updateHeaderBar(index);
this.__showHideContentDiv(index);
this.__updateTabView(index);
this.activeContentIndex=index;
}
,
__showHideContentDiv:function(index)
{
if(index!==false){
var htmlElementId=this.paneModel.contents[this.activeContentIndex].htmlElementId;
try{
document.getElementById(htmlElementId).style.display='none';
}catch(e){
}
var htmlElementId=this.paneModel.contents[index].htmlElementId;
if(htmlElementId){
try{
document.getElementById(htmlElementId).style.display='block';
}catch(e){
}
}
}
}
,
__setSize:function(recursive)
{
var pos=this.paneModel.getPosition().toLowerCase();
if(pos=='west'||pos=='east'){
this.divElement.style.width=this.paneModel.size+'px';
}
if(pos=='north'||pos=='south'){
this.divElement.style.height=this.paneModel.size+'px';
this.divElement.style.width='100%';
}
try{
this.contentDiv.style.height=(this.divElement.clientHeight-this.tabDiv.offsetHeight-this.headerDiv.offsetHeight)+'px';
}catch(e){
}
if(!recursive){
window.obj=this;
setTimeout('window.obj.__setSize(true)',100);
}
}
,
__setTopPosition:function(newTop)
{
this.divElement.style.top=newTop+'px';
}
,
__setLeftPosition:function(newLeft)
{
this.divElement.style.left=newLeft+'px';
}
,
__setWidth:function(newWidth)
{
if(this.paneModel.getPosition()=='west'||this.paneModel.getPosition()=='east')this.paneModel.setSize(newWidth);
newWidth=newWidth+'';
if(newWidth.indexOf('%')==-1)newWidth=Math.max(1,newWidth)+'px';
this.divElement.style.width=newWidth;
}
,
__setHeight:function(newHeight)
{
if(this.paneModel.getPosition()=='north'||this.paneModel.getPosition()=='south')this.paneModel.setSize(newHeight);
this.divElement.style.height=Math.max(1,newHeight)+'px';
this.__setSize();
}
,
__showTransparentDivForResize:function()
{
this.divTransparentForResize.style.display='block';
var ref=this.divTransparentForResize;
ref.style.height=this.contentDiv.clientHeight+'px';
ref.style.width=this.contentDiv.clientWidth+'px';
}
,
__hideTransparentDivForResize:function()
{
this.divTransparentForResize.style.display='none';
}
}
DHTMLSuite.paneSplitter=function(){
var dataModel;
var panes;
var panesAssociative;
var paneContent;
var layoutCSS;
var horizontalSplitterSize;
var horizontalSplitterBorderSize;
var verticalSplitterSize;
var paneSplitterHandles;
var paneSplitterHandleOnResize;
var resizeInProgress;
var resizeCounter;
var currentResize;
var currentResize_min;
var currentResize_max;
var paneSizeCollapsed;
var paneBorderLeftPlusRight;
var slideSpeed;
var waitMessage;
var collapseExpandButtons;
var paneZIndexCounter;
this.collapseExpandButtons=new Object();
this.resizeCounter=-1;
this.horizontalSplitterSize=6;
this.verticalSplitterSize=6;
this.paneBorderLeftPlusRight=2;
this.slideSpeed=10;
this.horizontalSplitterBorderSize=1;
this.resizeInProgress=false;
this.paneSplitterHandleOnResize=false;
this.paneSizeCollapsed=18;
this.paneSplitterHandles=new Object();
this.dataModel=false;
this.layoutCSS='pane-splitter.css';
this.waitMessage='Loading content-please wait';
this.panes=new Array();
this.panesAssociative=new Object();
this.paneZIndexCounter=1;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.paneSplitter.prototype=
{
addModel:function(newModel)
{
this.dataModel=newModel;
}
,
setLayoutCss:function(layoutCSS)
{
this.layoutCSS=layoutCSS;
}
,
setAjaxWaitMessage:function(newWaitMessage)
{
this.waitMessage=newWaitMessage;
}
,
setSizeOfPane:function(panePosition,newSize)
{
if(!this.panesAssociative[panePosition.toLowerCase()])return;
if(panePosition=='east'||panePosition=='west'){
this.panesAssociative[panePosition.toLowerCase()].__setWidth(newSize);
}
if(panePosition=='north'||panePosition=='south'){
this.panesAssociative[panePosition.toLowerCase()].__setHeight(newSize);
}
this.__positionPanes();
}
,
setSlideSpeed:function(slideSpeed)
{
this.slideSpeed=slideSpeed;
}
,
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
if(this.dataModel.collapseButtonsInTitleBars)this.paneSizeCollapsed=25;
this.__createPanes();
this.__positionPanes();
this.__createResizeHandles();
this.__addEvents();
this.__initCollapsePanes();
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+this.objectIndex+"].__positionPanes();",100);
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+this.objectIndex+"].__positionPanes();",500);
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+this.objectIndex+"].__positionPanes();",1500);
}
,
isUrlLoadedInPane:function(id,url)
{
var ref=this.__getPaneReferenceFromContentId(id);
if(ref){
return ref.isUrlLoadedInPane(id,url);
}else return false;
}
,
loadContent:function(id,url,refreshAfterSeconds,onCompleteJsCode)
{
var ref=this.__getPaneReferenceFromContentId(id);
if(ref){
ref.loadContent(id,url,refreshAfterSeconds,false,onCompleteJsCode);
}
}
,
reloadContent:function(id)
{
var ref=this.__getPaneReferenceFromContentId(id);
if(ref){
ref.reloadContent(id);
}
}
,
setRefreshAfterSeconds:function(idOfContentObject,refreshAfterSeconds)
{
var ref=this.__getPaneReferenceFromContentId(idOfContentObject);
if(ref){
ref.setRefreshAfterSeconds(idOfContentObject,refreshAfterSeconds);
}
}
,
setContentTabTitle:function(idOfContentObject,newTitle)
{
var ref=this.__getPaneReferenceFromContentId(idOfContentObject);
if(ref)ref.setContentTabTitle(idOfContentObject,newTitle);
}
,
setContentTitle:function(idOfContentObject,newTitle)
{
var ref=this.__getPaneReferenceFromContentId(idOfContentObject);
if(ref)ref.setContentTitle(idOfContentObject,newTitle);
}
,
showContent:function(id)
{
var ref=this.__getPaneReferenceFromContentId(id);
if(ref)ref.showContent(id);
}
,
closeAllClosableTabs:function(panePosition)
{
if(this.panesAssociative[panePosition.toLowerCase()])return this.panesAssociative[panePosition.toLowerCase()].__closeAllClosableTabs();else return false;
}
,
addContent:function(panePosition,contentModel,onCompleteJsCode)
{
if(this.panesAssociative[panePosition.toLowerCase()])return this.panesAssociative[panePosition.toLowerCase()].addContent(contentModel,onCompleteJsCode);else return false;
}
,
getState:function(panePosition)
{
if(this.panesAssociative[panePosition.toLowerCase()])return this.panesAssociative[panePosition.toLowerCase()].paneModel.__getState();
}
,
deleteContentById:function(id)
{
var ref=this.__getPaneReferenceFromContentId(id);
if(ref)ref.__deleteContentById(id);
}
,
deleteContentByIndex:function(panePosition,contentIndex)
{
if(this.panesAssociative[panePosition]){
this.panesAssociative[panePosition].__deleteContentByIndex(contentIndex);
}
}
,
hidePane:function(panePosition)
{
if(this.panesAssociative[panePosition]&&panePosition!='center'){
this.panesAssociative[panePosition].hidePane();
if(this.paneSplitterHandles[panePosition])this.paneSplitterHandles[panePosition].style.display='none';
this.__positionPanes();
}else return false;
}
,
showPane:function(panePosition)
{
if(this.panesAssociative[panePosition]&&panePosition!='center'){
this.panesAssociative[panePosition].showPane();
if(this.paneSplitterHandles[panePosition])this.paneSplitterHandles[panePosition].style.display='block';
this.__positionPanes();
}else return false;
}
,
getReferenceToMainDivElOfPane:function(panePosition)
{
if(this.panesAssociative[panePosition])return this.panesAssociative[panePosition].__getReferenceTomainDivEl();
return false;
}
,
getIdOfCurrentlyDisplayedContent:function(panePosition)
{
if(this.panesAssociative[panePosition])return this.panesAssociative[panePosition].getIdOfCurrentlyDisplayedContent();
return false;
}
,
getHtmlElIdOfCurrentlyDisplayedContent:function(panePosition)
{
if(this.panesAssociative[panePosition])return this.panesAssociative[panePosition].getHtmlElIdOfCurrentlyDisplayedContent();
return false;
}
,
getSizeOfPaneInPixels:function(panePosition)
{
if(this.panesAssociative[panePosition])return this.panesAssociative[panePosition].__getSizeOfPaneInPixels();
return false;
}
,
expandPane:function(panePosition)
{
if(panePosition=='center')return;
if(this.panesAssociative[panePosition])this.panesAssociative[panePosition].__expand();
if(!this.dataModel.collapseButtonsInTitleBars)this.__toggleCollapseExpandButton(panePosition,'expand');
}
,
collapsePane:function(panePosition)
{
if(panePosition=='center')return;
if(this.panesAssociative[panePosition])this.panesAssociative[panePosition].__collapse();
if(!this.dataModel.collapseButtonsInTitleBars)this.__toggleCollapseExpandButton(panePosition,'collapse');
}
,
__setPaneSizeCollapsed:function(newSize)
{
return;
if(newSize>this.paneSizeCollapsed){
this.paneSizeCollapsed=newSize;
}
}
,
__createPanes:function()
{
var dataObjects=this.dataModel.getItems();
for(var no=0;no<dataObjects.length;no++){
var index=this.panes.length;
this.panes[index]=new DHTMLSuite.paneSplitterPane(this);
this.panes[index].addDataSource(dataObjects[no]);
this.panes[index].__createPane();
this.panesAssociative[dataObjects[no].position.toLowerCase()]=this.panes[index];
}
}
,
__collapseAPane:function(e,panePosition)
{
var ind=this.objectIndex;
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
src.className=src.className.replace(' DHTMLSuite_collapseExpandOver','');
this.__toggleCollapseExpandButton(panePosition,'collapse');
if(this.panesAssociative[panePosition])this.panesAssociative[panePosition].__collapse();
src.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__expandAPane(e,panePosition);};
}
,
__toggleCollapseExpandButton:function(panePosition,state)
{
var src=this.collapseExpandButtons[panePosition];
var ind=this.objectIndex;
if(state=='expand'){
switch(panePosition){
case"east":
src.className=src.className.replace('Left','Right');
src.parentNode.className=src.parentNode.className.replace(' DHTMLSuite_paneSplitter_vertical_noresize','');
break;
case"west":
src.className=src.className.replace('Right','Left');
src.parentNode.className=src.parentNode.className.replace(' DHTMLSuite_paneSplitter_vertical_noresize','');
break;
case"south":
src.className=src.className.replace('Up','Down');
src.parentNode.className=src.parentNode.className.replace(' DHTMLSuite_paneSplitter_horizontal_noresize','');
break;
case"north":
src.className=src.className.replace('Down','Up');
src.parentNode.className=src.parentNode.className.replace(' DHTMLSuite_paneSplitter_horizontal_noresize','');
break;
}
src.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapseAPane(e,panePosition);};
}
if(state=='collapse'){
switch(panePosition){
case"west":
src.className=src.className.replace('Left','Right');
src.parentNode.className=src.parentNode.className+' DHTMLSuite_paneSplitter_vertical_noresize';
break;
case"east":
src.className=src.className.replace('Right','Left');
src.parentNode.className=src.parentNode.className+' DHTMLSuite_paneSplitter_vertical_noresize';
break;
case"north":
src.className=src.className.replace('Up','Down');
src.parentNode.className=src.parentNode.className+' DHTMLSuite_paneSplitter_horizontal_noresize';
break;
case"south":
src.className=src.className.replace('Down','Up');
src.parentNode.className=src.parentNode.className+' DHTMLSuite_paneSplitter_horizontal_noresize';
break;
}
src.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__expandAPane(e,panePosition);};
}
}
,
__expandAPane:function(e,panePosition)
{
var ind=this.objectIndex;
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
src.className=src.className.replace(' DHTMLSuite_collapseExpandOver','');
this.__toggleCollapseExpandButton(panePosition,'expand');
if(this.panesAssociative[panePosition])this.panesAssociative[panePosition].__expand();
src.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapseAPane(e,panePosition);};
}
,
__createResizeHandles:function()
{
var ind=this.objectIndex;
if(this.panesAssociative['north']&&(this.panesAssociative['north'].paneModel.resizable||(this.panesAssociative['north'].paneModel.collapsable&&!this.dataModel.collapseButtonsInTitleBars))){
this.paneSplitterHandles['north']=document.createElement('DIV');
var obj=this.paneSplitterHandles['north'];
obj.className='DHTMLSuite_paneSplitter_horizontal';
obj.innerHTML='<span></span>';
obj.style.position='absolute';
obj.style.height=this.horizontalSplitterSize+'px';
obj.style.width='100%';
obj.style.zIndex=10000;
obj.setAttribute('resizeHandle','1');
DHTMLSuite.commonObj.addEvent(obj,'mousedown',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__initResizePane(e,'north');});
document.body.appendChild(obj);
if(!this.dataModel.collapseButtonsInTitleBars){
var subElement=document.createElement('DIV');
subElement.className='DHTMLSuite_resizeButtonUp';
subElement.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapseAPane(e,'north');};
subElement.onmouseover=this.__mouseoverCollapseButton;
subElement.onmouseout=this.__mouseoutCollapseButton;
subElement.innerHTML='<span></span>';
DHTMLSuite.commonObj.__addEventEl(subElement);
obj.appendChild(subElement);
this.collapseExpandButtons['north']=subElement;
if(this.panesAssociative['north'].paneModel.state=='collapsed')this.__toggleCollapseExpandButton('north','collapse');
if(!this.panesAssociative['north'].paneModel.collapsable){
subElement.style.display='none';
obj.className=obj.className+' DHTMLSuite_paneSplitter_horizontal_expInTitle';
}
}else{
obj.className=obj.className+' DHTMLSuite_paneSplitter_horizontal_expInTitle';
}
if(!this.panesAssociative['north'].paneModel.resizable)obj.className=obj.className+' DHTMLSuite_paneSplitter_horizontal_noresize';
}
if(this.panesAssociative['west']){
this.paneSplitterHandles['west']=document.createElement('DIV');
var obj=this.paneSplitterHandles['west'];
obj.innerHTML='<span></span>';
obj.className='DHTMLSuite_paneSplitter_vertical';
obj.style.position='absolute';
obj.style.width=this.verticalSplitterSize+'px';
obj.style.zIndex=11000;
obj.setAttribute('resizeHandle','1');
DHTMLSuite.commonObj.addEvent(obj,'mousedown',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__initResizePane(e,'west');});
document.body.appendChild(obj);
if(!this.dataModel.collapseButtonsInTitleBars){
var subElement=document.createElement('DIV');
subElement.className='DHTMLSuite_resizeButtonLeft';
subElement.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapseAPane(e,'west');};
DHTMLSuite.commonObj.__addEventEl(subElement);
subElement.onmouseover=this.__mouseoverCollapseButton;
subElement.onmouseout=this.__mouseoutCollapseButton;
subElement.innerHTML='<span></span>';
obj.appendChild(subElement);
this.collapseExpandButtons['west']=subElement;
if(this.panesAssociative['west'].paneModel.state=='collapsed')this.__toggleCollapseExpandButton('west','collapse');
if(!this.panesAssociative['west'].paneModel.collapsable){
subElement.style.display='none';
obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_expInTitle';
}
}else{
obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_expInTitle';
}
if(!this.panesAssociative['west'].paneModel.resizable){
obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_noresize';
}
}
if(this.panesAssociative['east']){
this.paneSplitterHandles['east']=document.createElement('DIV');
var obj=this.paneSplitterHandles['east'];
obj.innerHTML='<span></span>';
obj.className='DHTMLSuite_paneSplitter_vertical';
obj.style.position='absolute';
obj.style.width=this.verticalSplitterSize+'px';
obj.style.zIndex=11000;
obj.setAttribute('resizeHandle','1');
DHTMLSuite.commonObj.addEvent(obj,'mousedown',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__initResizePane(e,'east');});
document.body.appendChild(obj);
if(!this.dataModel.collapseButtonsInTitleBars){
var subElement=document.createElement('DIV');
subElement.className='DHTMLSuite_resizeButtonRight';
subElement.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapseAPane(e,'east');};
subElement.onmouseover=this.__mouseoverCollapseButton;
subElement.onmouseout=this.__mouseoutCollapseButton;
subElement.innerHTML='<span></span>';
DHTMLSuite.commonObj.__addEventEl(subElement);
obj.appendChild(subElement);
this.collapseExpandButtons['east']=subElement;
if(this.panesAssociative['east'].paneModel.state=='collapsed')this.__toggleCollapseExpandButton('east','collapse');
if(!this.panesAssociative['east'].paneModel.collapsable){
subElement.style.display='none';
obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_expInTitle';
}
}else{
obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_expInTitle';
}
if(!this.panesAssociative['east'].paneModel.resizable)obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_noresize';
}
if(this.panesAssociative['south']&&(this.panesAssociative['south'].paneModel.resizable||(this.panesAssociative['south'].paneModel.collapsable&&!this.dataModel.collapseButtonsInTitleBars))){
this.paneSplitterHandles['south']=document.createElement('DIV');
var obj=this.paneSplitterHandles['south'];
obj.innerHTML='<span></span>';
obj.className='DHTMLSuite_paneSplitter_horizontal';
obj.style.position='absolute';
obj.style.height=this.horizontalSplitterSize+'px';
obj.style.width='100%';
obj.setAttribute('resizeHandle','1');
obj.style.zIndex=10000;
DHTMLSuite.commonObj.addEvent(obj,'mousedown',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__initResizePane(e,'south');});
document.body.appendChild(obj);
if(!this.dataModel.collapseButtonsInTitleBars){
var subElement=document.createElement('DIV');
subElement.style.position='absolute';
subElement.className='DHTMLSuite_resizeButtonDown';
subElement.onclick=function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__collapseAPane(e,'south');};
subElement.onmouseover=this.__mouseoverCollapseButton;
subElement.onmouseout=this.__mouseoutCollapseButton;
subElement.innerHTML='<span></span>';
DHTMLSuite.commonObj.__addEventEl(subElement);
obj.appendChild(subElement);
this.collapseExpandButtons['south']=subElement;
if(this.panesAssociative['south'].paneModel.state=='collapsed')this.__toggleCollapseExpandButton('south','collapse');
if(!this.panesAssociative['south'].paneModel.collapsable){
subElement.style.display='none';
obj.className=obj.className+' DHTMLSuite_paneSplitter_horizontal_expInTitle';
}
}else{
obj.className=obj.className+' DHTMLSuite_paneSplitter_horizontal_expInTitle';
}
if(!this.panesAssociative['south'].paneModel.resizable)obj.className=obj.className+' DHTMLSuite_paneSplitter_vertical_noresize';
}
this.paneSplitterHandleOnResize=document.createElement('DIV');
var obj=this.paneSplitterHandleOnResize;
obj.innerHTML='<span></span>';
obj.className='DHTMLSuite_paneSplitter_onResize';
obj.style.position='absolute';
obj.style.zIndex=955000;
obj.style.display='none';
document.body.appendChild(obj);
}
,
__mouseoverCollapseButton:function()
{
this.className=this.className+' DHTMLSuite_collapseExpandOver';
}
,
__mouseoutCollapseButton:function()
{
this.className=this.className.replace(' DHTMLSuite_collapseExpandOver','');
}
,
__getPaneReferenceFromContentId:function(id)
{
for(var no=0;no<this.panes.length;no++){
var contents=this.panes[no].paneModel.getContents();
for(var no2=0;no2<contents.length;no2++){
if(contents[no2].id==id)return this.panes[no];
}
}
return false;
}
,
__initCollapsePanes:function()
{
for(var no=0;no<this.panes.length;no++){
if(this.panes[no].paneModel.state=='collapsed'){
this.panes[no].__collapse();
}
}
}
,
__getMinimumPos:function(pos)
{
var browserWidth=DHTMLSuite.clientInfoObj.getBrowserWidth();
var browserHeight=DHTMLSuite.clientInfoObj.getBrowserHeight();
if(pos=='west'||pos=='north'){
return	this.panesAssociative[pos].paneModel.minSize;
}else{
if(pos=='east')return	browserWidth-this.panesAssociative[pos].paneModel.maxSize;
if(pos=='south')return	browserHeight-this.panesAssociative[pos].paneModel.maxSize;
}
}
,
__getMaximumPos:function(pos)
{
var browserWidth=DHTMLSuite.clientInfoObj.getBrowserWidth();
var browserHeight=DHTMLSuite.clientInfoObj.getBrowserHeight();
if(pos=='west'||pos=='north'){
return	this.panesAssociative[pos].paneModel.maxSize;
}else{
if(pos=='east')return	browserWidth-this.panesAssociative[pos].paneModel.minSize;
if(pos=='south')return	browserHeight-this.panesAssociative[pos].paneModel.minSize;
}
}
,
__initResizePane:function(e,pos)
{
if(document.all)e=event;
var obj=DHTMLSuite.commonObj.getSrcElement(e);
var attr=obj.getAttribute('resizeHandle');
if(!attr)attr=obj.resizeHandle;
if(!attr)return;
if(obj.className.indexOf('noresize')>=0)return;
this.currentResize=pos;
this.currentResize_min=this.__getMinimumPos(pos);
this.currentResize_max=this.__getMaximumPos(pos);
this.paneSplitterHandleOnResize.style.left=this.paneSplitterHandles[pos].style.left;
this.paneSplitterHandleOnResize.style.top=this.paneSplitterHandles[pos].style.top;
this.paneSplitterHandleOnResize.style.width=this.paneSplitterHandles[pos].offsetWidth+'px';
this.paneSplitterHandleOnResize.style.height=this.paneSplitterHandles[pos].offsetHeight+'px';
this.paneSplitterHandleOnResize.style.display='block';
this.resizeCounter=0;
DHTMLSuite.commonObj.__setTextSelOk(false);
this.__timerResizePane(pos);
}
,
__timerResizePane:function(pos)
{
if(this.resizeCounter>=0&&this.resizeCounter<5){
this.resizeCounter++;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+this.objectIndex+'].__timerResizePane()',2);
return;
}
if(this.resizeCounter==5){
this.__showTransparentDivForResize('show');
}
}
,
__showTransparentDivForResize:function()
{
if(DHTMLSuite.clientInfoObj.isOpera)return;
if(this.panesAssociative['west'])this.panesAssociative['west'].__showTransparentDivForResize();
if(this.panesAssociative['south'])this.panesAssociative['south'].__showTransparentDivForResize();
if(this.panesAssociative['east'])this.panesAssociative['east'].__showTransparentDivForResize();
if(this.panesAssociative['north'])this.panesAssociative['north'].__showTransparentDivForResize();
if(this.panesAssociative['center'])this.panesAssociative['center'].__showTransparentDivForResize();
}
,
__hideTransparentDivForResize:function()
{
if(this.panesAssociative['west'])this.panesAssociative['west'].__hideTransparentDivForResize();
if(this.panesAssociative['south'])this.panesAssociative['south'].__hideTransparentDivForResize();
if(this.panesAssociative['east'])this.panesAssociative['east'].__hideTransparentDivForResize();
if(this.panesAssociative['north'])this.panesAssociative['north'].__hideTransparentDivForResize();
if(this.panesAssociative['center'])this.panesAssociative['center'].__hideTransparentDivForResize();
}
,
__resizePane:function(e)
{
if(document.all)e=event;
if(DHTMLSuite.clientInfoObj.isMSIE&&e.button!=1)this.__endResize();
if(this.resizeCounter==5){
if(this.currentResize=='west'||this.currentResize=='east'){
var leftPos=e.clientX;
if(leftPos<this.currentResize_min)leftPos=this.currentResize_min;
if(leftPos>this.currentResize_max)leftPos=this.currentResize_max;
this.paneSplitterHandleOnResize.style.left=leftPos+'px';
}else{
var topPos=e.clientY;
if(topPos<this.currentResize_min)topPos=this.currentResize_min;
if(topPos>this.currentResize_max)topPos=this.currentResize_max;
this.paneSplitterHandleOnResize.style.top=topPos+'px';
}
}
}
,
__endResize:function()
{
if(this.resizeCounter==5){
this.__hideTransparentDivForResize();
var browserWidth=DHTMLSuite.clientInfoObj.getBrowserWidth();
var browserHeight=DHTMLSuite.clientInfoObj.getBrowserHeight();
var obj=this.panesAssociative[this.currentResize];
switch(this.currentResize){
case"west":
obj.__setWidth(this.paneSplitterHandleOnResize.style.left.replace('px','')/1-2);
break;
case"north":
obj.__setHeight(this.paneSplitterHandleOnResize.style.top.replace('px','')/1);
break;
case"east":
obj.__setWidth(browserWidth-this.paneSplitterHandleOnResize.style.left.replace('px','')/1-8);
break;
case"south":
obj.__setHeight(browserHeight-this.paneSplitterHandleOnResize.style.top.replace('px','')/1-7);
break;
}
this.__positionPanes();
obj.__executeResizeCallBack();
this.paneSplitterHandleOnResize.style.display='none';
this.resizeCounter=-1;
DHTMLSuite.commonObj.__setTextSelOk(true);
}
}
,
__hideResizeHandle:function(pos){
if(!this.paneSplitterHandles[pos])return;
switch(pos){
case"east":
case"west":
this.paneSplitterHandles[pos].className=this.paneSplitterHandles[pos].className+' DHTMLSuite_paneSplitter_vertical_noresize';
break;
case"north":
case"south":
this.paneSplitterHandles[pos].className=this.paneSplitterHandles[pos].className+' DHTMLSuite_paneSplitter_horizontal_noresize';
}
}
,
__showResizeHandle:function(pos){
if(!this.paneSplitterHandles[pos])return;
switch(pos){
case"east":
case"west":
this.paneSplitterHandles[pos].className=this.paneSplitterHandles[pos].className.replace(' DHTMLSuite_paneSplitter_vertical_noresize','');
break;
case"north":
case"south":
this.paneSplitterHandles[pos].className=this.paneSplitterHandles[pos].className.replace(' DHTMLSuite_paneSplitter_horizontal_noresize','');
}
}
,
__positionResizeHandles:function()
{
if(this.paneSplitterHandles['north']){
if(this.panesAssociative['north'].paneModel.state=='expanded'){
this.paneSplitterHandles['north'].style.top=this.panesAssociative['north'].divElement.style.height.replace('px','')+'px';
}else{
this.paneSplitterHandles['north'].style.top=this.paneSizeCollapsed+'px';
}
}
var heightHandler=this.panesAssociative['center'].divElement.offsetHeight+1;
var topPos=0;
if(this.panesAssociative['center'])topPos+=this.panesAssociative['center'].divElement.style.top.replace('px','')/1;
if(this.paneSplitterHandles['west']){
if(this.paneSplitterHandles['east'])heightHandler+=this.horizontalSplitterBorderSize/2;
if(this.panesAssociative['west'].paneModel.state=='expanded'){
this.paneSplitterHandles['west'].style.left=this.panesAssociative['west'].divElement.offsetWidth+'px';
}else{
this.paneSplitterHandles['west'].style.left=this.paneSizeCollapsed+'px';
}
this.paneSplitterHandles['west'].style.height=heightHandler+'px';
this.paneSplitterHandles['west'].style.top=topPos+'px';
}
if(this.paneSplitterHandles['east']){
var leftPos=this.panesAssociative['center'].divElement.style.left.replace('px','')/1+this.panesAssociative['center'].divElement.offsetWidth;
this.paneSplitterHandles['east'].style.left=leftPos+'px';
this.paneSplitterHandles['east'].style.height=heightHandler+'px';
this.paneSplitterHandles['east'].style.top=topPos+'px';
}
if(this.paneSplitterHandles['south']){
var topPos=this.panesAssociative['south'].divElement.style.top.replace('px','')/1;
topPos=topPos-this.horizontalSplitterSize-this.horizontalSplitterBorderSize;
this.paneSplitterHandles['south'].style.top=topPos+'px';
}
this.resizeInProgress=false;
}
,
__positionPanes:function()
{
if(this.resizeInProgress)return;
var ind=this.objectIndex;
this.resizeInProgress=true;
var browserWidth=DHTMLSuite.clientInfoObj.getBrowserWidth();
var browserHeight=DHTMLSuite.clientInfoObj.getBrowserHeight();
var posTopMiddlePanes=0;
if(this.panesAssociative['north']&&this.panesAssociative['north'].paneModel.visible){
if(this.panesAssociative['north'].paneModel.state=='expanded'){
posTopMiddlePanes=this.panesAssociative['north'].divElement.offsetHeight;
this.panesAssociative['north'].__setHeight(this.panesAssociative['north'].divElement.offsetHeight);
}else{
posTopMiddlePanes+=this.paneSizeCollapsed;
}
if(this.paneSplitterHandles['north'])posTopMiddlePanes+=(this.horizontalSplitterSize+this.horizontalSplitterBorderSize);
}
if(this.panesAssociative['center'])this.panesAssociative['center'].__setTopPosition(posTopMiddlePanes);
if(this.panesAssociative['west'])this.panesAssociative['west'].__setTopPosition(posTopMiddlePanes);
if(this.panesAssociative['east'])this.panesAssociative['east'].__setTopPosition(posTopMiddlePanes);
if(this.panesAssociative['west'])this.panesAssociative['west'].divElCollapsed.style.top=posTopMiddlePanes+'px';
if(this.panesAssociative['east'])this.panesAssociative['east'].divElCollapsed.style.top=posTopMiddlePanes+'px';
var posLeftCenterPane=0;
if(this.panesAssociative['west']){
if(this.panesAssociative['west'].paneModel.state=='expanded'){
posLeftCenterPane=this.panesAssociative['west'].divElement.offsetWidth;
this.panesAssociative['west'].__setLeftPosition(0);
}else{
posLeftCenterPane+=this.paneSizeCollapsed;
}
posLeftCenterPane+=(this.verticalSplitterSize);
}
this.panesAssociative['center'].__setLeftPosition(posLeftCenterPane);
var sizeCenterPane=browserWidth;
if(this.panesAssociative['west']&&this.panesAssociative['west'].paneModel.visible){
if(this.panesAssociative['west'].paneModel.state=='expanded')
sizeCenterPane-=this.panesAssociative['west'].divElement.offsetWidth;
else
sizeCenterPane-=this.paneSizeCollapsed;
}
if(this.panesAssociative['east']&&this.panesAssociative['east'].paneModel.visible){
if(this.panesAssociative['east'].paneModel.state=='expanded')
sizeCenterPane-=this.panesAssociative['east'].divElement.offsetWidth;
else{
sizeCenterPane-=this.paneSizeCollapsed;
if(DHTMLSuite.clientInfoObj.isOldMSIE)sizeCenterPane-=4;
}
}
sizeCenterPane-=this.paneBorderLeftPlusRight;
if(this.paneSplitterHandles['west'])sizeCenterPane-=(this.verticalSplitterSize);
if(this.paneSplitterHandles['east'])sizeCenterPane-=(this.verticalSplitterSize);
this.panesAssociative['center'].__setWidth(sizeCenterPane);
var posEastPane=posLeftCenterPane+this.panesAssociative['center'].divElement.offsetWidth;
if(this.paneSplitterHandles['east'])posEastPane+=(this.verticalSplitterSize);
if(this.panesAssociative['east']){
if(this.panesAssociative['east'].paneModel.state=='expanded')this.panesAssociative['east'].__setLeftPosition(posEastPane);
this.panesAssociative['east'].divElCollapsed.style.left='';
this.panesAssociative['east'].divElCollapsed.style.right='0px';
}
var heightMiddleFrames=browserHeight;
if(this.panesAssociative['north']&&this.panesAssociative['north'].paneModel.visible){
if(this.panesAssociative['north'].paneModel.state=='expanded'){
heightMiddleFrames-=this.panesAssociative['north'].divElement.offsetHeight;
}else
heightMiddleFrames-=this.paneSizeCollapsed;
if(this.paneSplitterHandles['north'])heightMiddleFrames-=(this.horizontalSplitterSize+this.horizontalSplitterBorderSize);
}
if(this.panesAssociative['south']&&this.panesAssociative['south'].paneModel.visible){
if(this.panesAssociative['south'].paneModel.state=='expanded'){
heightMiddleFrames-=this.panesAssociative['south'].divElement.offsetHeight;
}else
heightMiddleFrames-=this.paneSizeCollapsed;
if(this.paneSplitterHandles['south'])heightMiddleFrames-=(this.horizontalSplitterSize+this.horizontalSplitterBorderSize);
}
if(this.panesAssociative['center'])this.panesAssociative['center'].__setHeight(heightMiddleFrames);
if(this.panesAssociative['west'])this.panesAssociative['west'].__setHeight(heightMiddleFrames);
if(this.panesAssociative['east'])this.panesAssociative['east'].__setHeight(heightMiddleFrames);
var posSouth=0;
if(this.panesAssociative['north']){
if(this.panesAssociative['north'].paneModel.state=='expanded'){
posSouth=this.panesAssociative['north'].divElement.offsetHeight;
}else
posSouth=this.paneSizeCollapsed;
}
posSouth+=heightMiddleFrames;
if(this.paneSplitterHandles['south']){
posSouth+=(this.horizontalSplitterSize+this.horizontalSplitterBorderSize);
}
if(this.paneSplitterHandles['north']){
posSouth+=(this.horizontalSplitterSize+this.horizontalSplitterBorderSize);
}
if(this.panesAssociative['south']){
this.panesAssociative['south'].__setTopPosition(posSouth);
this.panesAssociative['south'].divElCollapsed.style.top=posSouth+'px';
this.panesAssociative['south'].__setWidth('100%');
}
try{
if(this.panesAssociative['west']){
this.panesAssociative['west'].divElCollapsed.style.height=(heightMiddleFrames)+'px';
this.panesAssociative['west'].divElCollapsedInner.style.height=(heightMiddleFrames-1)+'px';
}
}catch(e){
}
if(this.panesAssociative['east']){
try{
this.panesAssociative['east'].divElCollapsed.style.height=heightMiddleFrames+'px';
this.panesAssociative['east'].divElCollapsedInner.style.height=(heightMiddleFrames-1)+'px';
}catch(e){
}
}
if(this.panesAssociative['south']){
this.panesAssociative['south'].divElCollapsed.style.width=browserWidth+'px';
if(this.panesAssociative['south'].paneModel.state=='collapsed'&&this.panesAssociative['south'].divElCollapsed.offsetHeight){
var rest=browserHeight-this.panesAssociative['south'].divElCollapsed.style.top.replace('px','')/1-this.panesAssociative['south'].divElCollapsed.offsetHeight;
if(rest>0)this.panesAssociative['south'].divElCollapsed.style.height=(this.panesAssociative['south'].divElCollapsed.offsetHeight+rest)+'px';
}
}
if(this.panesAssociative['north']){
this.panesAssociative['north'].divElCollapsed.style.width=browserWidth+'px';
}
this.__positionResizeHandles();
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__positionResizeHandles()',50);
}
,
__autoSlideInPanes:function(e)
{
if(document.all)e=event;
if(this.panesAssociative['south'])this.panesAssociative['south'].__autoSlideInPane(e);
if(this.panesAssociative['west'])this.panesAssociative['west'].__autoSlideInPane(e);
if(this.panesAssociative['north'])this.panesAssociative['north'].__autoSlideInPane(e);
if(this.panesAssociative['east'])this.panesAssociative['east'].__autoSlideInPane(e);
}
,
__addEvents:function()
{
var ind=this.objectIndex;
DHTMLSuite.commonObj.addEvent(window,'resize',function(){DHTMLSuite.variableStorage.arrayDSObjects[ind].__positionPanes();});
DHTMLSuite.commonObj.addEvent(document.documentElement,'mouseup',function(){DHTMLSuite.variableStorage.arrayDSObjects[ind].__endResize();});
DHTMLSuite.commonObj.addEvent(document.documentElement,'mousemove',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__resizePane(e);});
DHTMLSuite.commonObj.addEvent(document.documentElement,'click',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__autoSlideInPanes(e);});
document.documentElement.onselectstart=function(){return DHTMLSuite.commonObj.__isTextSelOk();};
DHTMLSuite.commonObj.__addEventEl(window);
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.paneSplitterModel=function(arrayOfProperties)
{
var panes;
var collapseButtonsInTitleBars;
this.collapseButtonsInTitleBars=false;
this.panes=new Array();
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
this.__setInitProps(arrayOfProperties);
}
DHTMLSuite.paneSplitterModel.prototype=
{
addPane:function(paneModelRef)
{
this.panes[this.panes.length]=paneModelRef;
}
,
getItems:function()
{
return this.panes;
}
,
__setInitProps:function(propArray)
{
if(!propArray)return;
if(propArray.collapseButtonsInTitleBars||propArray.collapseButtonsInTitleBars===false)this.collapseButtonsInTitleBars=propArray.collapseButtonsInTitleBars;
}
}
DHTMLSuite.paneSplitterPaneModel=function(inputArray)
{
var id;
var position;
var size;
var minSize;
var maxSize;
var resizable;
var visible;
var scrollbars;
var contents;
var collapsable;
var state;
var callbackOnCollapse;
var callbackOnHide;
var callbackOnShow;
var callbackOnExpand;
var callbackOnSlideOut;
var callbackOnSlideIn;
var callbackOnCloseContent;
var callbackOnBeforeCloseContent;
var callbackOnTabSwitch;
var callbackOnResize;
this.contents=new Array();
this.scrollbars=true;
this.resizable=true;
this.collapsable=true;
this.state='expanded';
this.visible=true;
if(inputArray)this.setData(inputArray);
}
DHTMLSuite.paneSplitterPaneModel.prototype=
{
setData:function(inputArray)
{
if(inputArray["collapsable"])inputArray["collapsable"]=eval(inputArray["collapsable"]);
if(inputArray["id"])this.id=inputArray["id"];
if(inputArray["position"])this.position=inputArray["position"];
if(inputArray["resizable"]===false||inputArray["resizable"]===true)this.resizable=inputArray["resizable"];
if(inputArray["size"])this.size=inputArray["size"];
if(inputArray["minSize"])this.minSize=inputArray["minSize"];
if(inputArray["maxSize"])this.maxSize=inputArray["maxSize"];
if(inputArray["visible"]===false||inputArray["visible"]===true)this.visible=inputArray["visible"];
if(inputArray["collapsable"]===false||inputArray["collapsable"]===true)this.collapsable=inputArray["collapsable"];
if(inputArray["scrollbars"]===false||inputArray["scrollbars"]===true)this.scrollbars=inputArray["scrollbars"];
if(inputArray["state"])this.state=inputArray["state"];
if(inputArray["callbackOnCollapse"])this.callbackOnCollapse=inputArray["callbackOnCollapse"];
if(inputArray["callbackOnHide"])this.callbackOnHide=inputArray["callbackOnHide"];
if(inputArray["callbackOnShow"])this.callbackOnShow=inputArray["callbackOnShow"];
if(inputArray["callbackOnExpand"])this.callbackOnExpand=inputArray["callbackOnExpand"];
if(inputArray["callbackOnSlideIn"])this.callbackOnSlideIn=inputArray["callbackOnSlideIn"];
if(inputArray["callbackOnSlideOut"])this.callbackOnSlideOut=inputArray["callbackOnSlideOut"];
if(inputArray["callbackOnCloseContent"])this.callbackOnCloseContent=inputArray["callbackOnCloseContent"];
if(inputArray["callbackOnBeforeCloseContent"])this.callbackOnBeforeCloseContent=inputArray["callbackOnBeforeCloseContent"];
if(inputArray["callbackOnTabSwitch"])this.callbackOnTabSwitch=inputArray["callbackOnTabSwitch"];
if(inputArray["callbackOnResize"])this.callbackOnResize=inputArray["callbackOnResize"];
}
,
setSize:function(newSizeInPixels)
{
this.size=newSizeInPixels;
}
,
addContent:function(paneSplitterContentObj)
{
for(var no=0;no<this.contents.length;no++){
if(this.contents[no].id==paneSplitterContentObj.id)return false;
}
this.contents[this.contents.length]=paneSplitterContentObj;
return true;
}
,
getContents:function()
{
return this.contents;
}
,
getCountContent:function()
{
return this.contents.length;
}
,
getPosition:function()
{
return this.position.toLowerCase();
}
,
__setState:function(state)
{
this.state=state;
}
,
__getState:function(state)
{
return this.state;
}
,
__deleteContent:function(indexOfContentObjectToDelete)
{
try{
this.contents.splice(indexOfContentObjectToDelete,1);
}catch(e)
{
}
var retVal=indexOfContentObjectToDelete;
if(this.contents.length>(indexOfContentObjectToDelete-1))retVal--;
if(retVal<0&&this.contents.length==0)return false;
if(retVal<0)retVal=0;
return retVal;
}
,
__getIndexById:function(id)
{
for(var no=0;no<this.contents.length;no++){
if(this.contents[no].id==id)return no;
}
return false;
}
,
__setVisible:function(visible)
{
this.visible=visible;
}
}
DHTMLSuite.paneSplitterContentModel=function(inputArray)
{
var id;
var htmlElementId;
var title;
var tabTitle;
var closable;
var contentUrl;
this.closable=true;
var refreshAfterSeconds;
var displayRefreshButton;
this.displayRefreshButton=false;
this.refreshAfterSeconds=0;
if(inputArray)this.setData(inputArray);
}
DHTMLSuite.paneSplitterContentModel.prototype=
{
setData:function(inputArray)
{
if(inputArray["id"])this.id=inputArray["id"];else this.id=inputArray['htmlElementId'];
if(inputArray["closable"]===false||inputArray["closable"]===true)this.closable=inputArray["closable"];
if(inputArray["displayRefreshButton"]===false||inputArray["displayRefreshButton"])this.displayRefreshButton=inputArray["displayRefreshButton"];
if(inputArray["title"])this.title=inputArray["title"];
if(inputArray["tabTitle"])this.tabTitle=inputArray["tabTitle"];
if(inputArray["contentUrl"])this.contentUrl=inputArray["contentUrl"];
if(inputArray["htmlElementId"])this.htmlElementId=inputArray["htmlElementId"];
if(inputArray["refreshAfterSeconds"])this.refreshAfterSeconds=inputArray["refreshAfterSeconds"];
}
,
__setTitle:function(newTitle)
{
this.title=newTitle;
}
,
__setTabTitle:function(newTabTitle)
{
this.tabTitle=newTabTitle;
}
,
__setIdOfContentElement:function(htmlElementId)
{
this.htmlElementId=htmlElementId;
}
,
__setRefreshAfterSeconds:function(refreshAfterSeconds)
{
this.refreshAfterSeconds=refreshAfterSeconds;
}
,
__setContentUrl:function(contentUrl)
{
this.contentUrl=contentUrl;
}
,
__getClosable:function()
{
return this.closable;
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.dynamicContent=function(){
var enableCache;
var jsCache;
var ajaxObjects;
var waitMessage;
this.enableCache=true;
this.jsCache=new Object();
this.ajaxObjects=new Array();
this.waitMessage='Loading content-please wait...';
this.waitImage='dynamic-content/ajax-loader-darkblue.gif';
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.dynamicContent.prototype={
loadContent:function(divId,url,functionToCallOnLoaded)
{
var ind=this.objectIndex;
if(this.enableCache&&this.jsCache[url]){
document.getElementById(divId).innerHTML=this.jsCache[url];
DHTMLSuite.commonObj.__evaluateJs(divId);
DHTMLSuite.commonObj.__evaluateCss(divId);
if(functionToCallOnLoaded)eval(functionToCallOnLoaded);
return;
}
var ajaxIndex=0;
var waitMessageToShow='';
if(this.waitImage){
waitMessageToShow=waitMessageToShow+'<div style="text-align:center;padding:10px"><img src="'+DHTMLSuite.configObj.imagePath+this.waitImage+'" border="0" alt=""></div>';
}
if(this.waitMessage){
waitMessageToShow=waitMessageToShow+'<div style="text-align:center">'+this.waitMessage+'</div>';
}
try{
document.getElementById(divId).innerHTML=waitMessageToShow;
}catch(e){
}
waitMessageToShow=false;
var ajaxIndex=this.ajaxObjects.length;
try{
this.ajaxObjects[ajaxIndex]=new sack();
}catch(e){
alert('Could not create ajax object. Please make sure that ajax.js is included');
}
if(url.indexOf('?')>=0){
this.ajaxObjects[ajaxIndex].method='GET';
var string=url.substring(url.indexOf('?'));
url=url.replace(string,'');
string=string.replace('?','');
var items=string.split(/&/g);
for(var no=0;no<items.length;no++){
var tokens=items[no].split('=');
if(tokens.length==2){
this.ajaxObjects[ajaxIndex].setVar(tokens[0],tokens[1]);
}
}
url=url.replace(string,'');
}
this.ajaxObjects[ajaxIndex].requestFile=url;
this.ajaxObjects[ajaxIndex].onCompletion=function(){DHTMLSuite.variableStorage.arrayDSObjects[ind].__ajax_showContent(divId,ajaxIndex,url,functionToCallOnLoaded);};
this.ajaxObjects[ajaxIndex].onError=function(){DHTMLSuite.variableStorage.arrayDSObjects[ind].__ajax_displayError(divId,ajaxIndex,url,functionToCallOnLoaded);};
this.ajaxObjects[ajaxIndex].runAJAX();
}
,
setWaitMessage:function(newWaitMessage)
{
this.waitMessage=newWaitMessage;
}
,
setWaitImage:function(newWaitImage)
{
this.waitImage=newWaitImage;
}
,
setCache:function(enableCache)
{
this.enableCache=enableCache;
}
,
__ajax_showContent:function(divId,ajaxIndex,url,functionToCallOnLoaded)
{
document.getElementById(divId).innerHTML='';
document.getElementById(divId).innerHTML=this.ajaxObjects[ajaxIndex].response;
if(this.enableCache){
this.jsCache[url]=document.getElementById(divId).innerHTML+'';
}
DHTMLSuite.commonObj.__evaluateJs(divId);
DHTMLSuite.commonObj.__evaluateCss(divId);
if(functionToCallOnLoaded)eval(functionToCallOnLoaded);
this.ajaxObjects[ajaxIndex]=null;
return false;
}
,
__ajax_displayError:function(divId,ajaxIndex,url,functionToCallOnLoaded)
{
document.getElementById(divId).innerHTML='<h2>Message from DHTMLSuite.dynamicContent</h2><p>The ajax request for '+url+' failed</p>';
}
}

function sack(file){
this.xmlhttp=null;
this.resetData=function(){
this.method="POST";
this.queryStringSeparator="?";
this.argumentSeparator="&";
this.URLString="";
this.encodeURIString=true;
this.execute=false;
this.element=null;
this.elementObj=null;
this.requestFile=file;
this.vars=new Object();
this.responseStatus=new Array(2);
};
this.resetFunctions=function(){
this.onLoading=function(){};
this.onLoaded=function(){};
this.onInteractive=function(){};
this.onCompletion=function(){};
this.onError=function(){};
this.onFail=function(){};
};
this.reset=function(){
this.resetFunctions();
this.resetData();
};
this.createAJAX=function(){
try{
this.xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");
}catch(e1){
try{
this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}catch(e2){
this.xmlhttp=null;
}
}
if(!this.xmlhttp){
if(typeof XMLHttpRequest!="undefined"){
this.xmlhttp=new XMLHttpRequest();
}else{
this.failed=true;
}
}
};
this.setVar=function(name,value){
this.vars[name]=Array(value,false);
};
this.encVar=function(name,value,returnvars){
if(true==returnvars){
return Array(encodeURIComponent(name),encodeURIComponent(value));
}else{
this.vars[encodeURIComponent(name)]=Array(encodeURIComponent(value),true);
}
}
this.processURLString=function(string,encode){
encoded=encodeURIComponent(this.argumentSeparator);
regexp=new RegExp(this.argumentSeparator+"|"+encoded);
varArray=string.split(regexp);
for(i=0;i<varArray.length;i++){
urlVars=varArray[i].split("=");
if(true==encode){
this.encVar(urlVars[0],urlVars[1]);
}else{
this.setVar(urlVars[0],urlVars[1]);
}
}
}
this.createURLString=function(urlstring){
if(this.encodeURIString&&this.URLString.length){
this.processURLString(this.URLString,true);
}
if(urlstring){
if(this.URLString.length){
this.URLString+=this.argumentSeparator+urlstring;
}else{
this.URLString=urlstring;
}
}
this.setVar("rndval",new Date().getTime());
urlstringtemp=new Array();
for(key in this.vars){
if(false==this.vars[key][1]&&true==this.encodeURIString){
encoded=this.encVar(key,this.vars[key][0],true);
delete this.vars[key];
this.vars[encoded[0]]=Array(encoded[1],true);
key=encoded[0];
}
urlstringtemp[urlstringtemp.length]=key+"="+this.vars[key][0];
}
if(urlstring){
this.URLString+=this.argumentSeparator+urlstringtemp.join(this.argumentSeparator);
}else{
this.URLString+=urlstringtemp.join(this.argumentSeparator);
}
}
this.runResponse=function(){
eval(this.response);
}
this.runAJAX=function(urlstring){
if(this.failed){
this.onFail();
}else{
this.createURLString(urlstring);
if(this.element){
this.elementObj=document.getElementById(this.element);
}
if(this.xmlhttp){
var self=this;
if(this.method=="GET"){
totalurlstring=this.requestFile+this.queryStringSeparator+this.URLString;
this.xmlhttp.open(this.method,totalurlstring,true);
}else{
this.xmlhttp.open(this.method,this.requestFile,true);
try{
this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
}catch(e){}
}
this.xmlhttp.onreadystatechange=function(){
switch(self.xmlhttp.readyState){
case 1:
self.onLoading();
break;
case 2:
self.onLoaded();
break;
case 3:
self.onInteractive();
break;
case 4:
self.response=self.xmlhttp.responseText;
self.responseXML=self.xmlhttp.responseXML;
self.responseStatus[0]=self.xmlhttp.status;
self.responseStatus[1]=self.xmlhttp.statusText;
if(self.execute){
self.runResponse();
}
if(self.elementObj){
elemNodeName=self.elementObj.nodeName;
elemNodeName=elemNodeName.toLowerCase();
if(elemNodeName=="input"
||elemNodeName=="select"
||elemNodeName=="option"
||elemNodeName=="textarea"){
self.elementObj.value=self.response;
}else{
self.elementObj.innerHTML=self.response;
}
}
if(self.responseStatus[0]=="200"){
self.onCompletion();
}else{
self.onError();
}
self.URLString="";
delete self.xmlhttp['onreadystatechange'];
self.xmlhttp=null;
self.responseStatus=null;
self.response=null;
self.responseXML=null;
break;
}
};
this.xmlhttp.send(this.URLString);
}
}
};
this.reset();
this.createAJAX();
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.windowModel=function(arrayOfProperties)
{
var id;
var title;
var icon;
var isDragable;
var isResizable;
var isMinimizable;
var isClosable;
var xPos;
var yPos;
var width;
var height;
var cookieName;
var state;
var activeTabId;
var tabsVisible;
var zIndex;
var minWidth;
var maxWidth;
var minHeight;
var maxHeight;
var isVisible;
var callbackOnClose;
var windowsTheme;
var windowContents;
this.windowContents=new Array();
this.isDragable=true;
this.isMinimizable=true;
this.isResizable=true;
this.isClosable=true;
this.windowsTheme=false;
this.isVisible=true;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file\n'+e.message);
}
if(arrayOfProperties)this.__setInitialWindowProperties(arrayOfProperties);
}
DHTMLSuite.windowModel.prototype={
createWindowModelFromMarkUp:function(referenceToHTMLElement)
{
referenceToHTMLElement=DHTMLSuite.commonObj.getEl(referenceToHTMLElement);
if(!referenceToHTMLElement){
alert('Error in windowModel class-Could not get a reference to element '+referenceToHTMLElement);
return;
}
this.id=referenceToHTMLElement.id;
var properties=referenceToHTMLElement.getAttribute('windowProperties');
if(!properties)properties=referenceToHTMLElement.windowProperties;
this.__setInitialWindowProperties(DHTMLSuite.commonObj.getAssociativeArrayFromString(properties));
var subDivs=referenceToHTMLElement.getElementsByTagName('DIV');
for(var no=0;no<subDivs.length;no++){
if(subDivs[no].className.toLowerCase()=='dhtmlsuite_windowcontent'){
var index=this.windowContents.length;
this.windowContents[index]=new DHTMLSuite.windowTabModel();
this.windowContents[index].__createContentModelFromHTMLElement(subDivs[no]);
}
}
}
,
__setInitialWindowProperties:function(props)
{
if(props.isClosable)props.isClosable=eval(props.isClosable);
if(props.isDragable)props.isDragable=eval(props.isDragable);
if(props.isResizable)props.isResizable=eval(props.isResizable);
if(props.isMinimizable)props.isMinimizable=eval(props.isMinimizable);
if(props.isVisible)props.isVisible=eval(props.isVisible);
if(props.cookieName)this.cookieName=props.cookieName;
if(props.title)this.title=props.title;
if(props.icon)this.icon=props.icon;
if(props.width)this.width=props.width;
if(props.height)this.height=props.height;
if(props.isMinimizable||props.isMinimizable===false||props.isMinimizable===0)this.isMinimizable=props.isMinimizable;
if(props.isClosable||props.isClosable==false)this.isClosable=props.isClosable;
if(props.state)this.state=props.state;
if(props.xPos)this.xPos=props.xPos;
if(props.yPos)this.yPos=props.yPos;
if(props.activeTabId)this.activeTabId=props.activeTabId;
if(props.minWidth)this.minWidth=props.minWidth;
if(props.maxWidth)this.maxWidth=props.maxWidth;
if(props.minHeight)this.minHeight=props.minHeight;
if(props.maxHeight)this.maxHeight=props.maxHeight;
if(props.windowsTheme)this.windowsTheme=props.windowsTheme;
if(props.callbackOnClose)this.callbackOnClose=props.callbackOnClose;
if(props.isResizable||props.isResizable==false)this.isResizable=props.isResizable;
if(props.isDragable||props.isDragable==false)this.isDragable=props.isDragable;
if(props.isVisible||props.isVisible==false)this.isVisible=props.isVisible;
}
,
__getTitle:function()
{
return this.title;
}
,
__getContentObjects:function()
{
return this.windowContents;
}
,
__setActiveTabIdAutomatically:function()
{
for(var no=0;no<this.windowContents.length;no++){
if(!this.windowContents[no].isDeleted){
this.activeTabId=this.windowContents[no].id;
return;
}
}
}
,
__setContentUrl:function(contentId,url)
{
for(var no=0;no<this.windowContents.length;no++){
if(this.windowContents[no].id==contentId){
this.windowContents[no].__setContentUrl(url);
return true;
}
}
return false;
}
,
__getContentObjectById:function(contentId)
{
for(var no=0;no<this.windowContents.length;no++){
if(this.windowContents[no].id==contentId)return this.windowContents[no];
}
return false;
}
,
__setWidth:function(newWidth)
{
if(this.minWidth&&newWidth/1<this.minWidth/1)newWidth=this.minWidth;
if(this.maxWidth&&newWidth/1>this.maxWidth/1)newWidth=this.maxWidth;
this.width=newWidth;
}
,
__setHeight:function(newHeight)
{
if(this.minHeight&&newHeight/1<this.minHeight/1)newHeight=this.minHeight;
if(this.maxHeight&&newHeight/1>this.maxHeight/1)newHeight=this.maxHeight;
this.height=newHeight;
}
,
__setXPos:function(newXPos)
{
if(newXPos>DHTMLSuite.clientInfoObj.getBrowserWidth()){
newXPos=DHTMLSuite.clientInfoObj.getBrowserWidth()-30;
}
this.xPos=newXPos;
}
,
__setYPos:function(newYPos)
{
if(newYPos>DHTMLSuite.clientInfoObj.getBrowserHeight()){
newYPos=DHTMLSuite.clientInfoObj.getBrowserHeight()-30;
}
this.yPos=newYPos;
}
,
__setActiveTabId:function(newActiveTabId)
{
var index=this.__getIndexOfTabById(newActiveTabId);
if(index!==false&&!this.__getIsDeleted(newActiveTabId)){
this.activeTabId=newActiveTabId;
return;
}
this.__setActiveTabIdAutomatically();
}
,
__setZIndex:function(zIndex)
{
this.zIndex=zIndex;
}
,
__setState:function(state)
{
this.state=state;
}
,
__getWidth:function()
{
return this.width;
}
,
__getHeight:function()
{
return this.height;
}
,
__getXPos:function()
{
if(this.xPos>DHTMLSuite.clientInfoObj.getBrowserWidth()){
xPos=DHTMLSuite.clientInfoObj.getBrowserWidth()-30;
}
return this.xPos;
}
,
__getYPos:function()
{
return this.yPos;
}
,
__getActiveTabId:function()
{
return this.activeTabId;
}
,
__getZIndex:function()
{
if(!this.zIndex)return 0;
return this.zIndex;
}
,
__getState:function()
{
return this.state;
}
,
__deleteTab:function(idOfTab)
{
var index=this.__getIndexOfTabById(idOfTab);
if(index!==false){
this.windowContents[index].__setDeleted(true);
return true;
}
return false;
}
,
__restoreTab:function(idOfTab)
{
var index=this.__getIndexOfTabById(idOfTab);
if(index!==false){
this.windowContents[index].__setDeleted(false);
return true;
}
return false;
}
,
__getIndexOfTabById:function(idOfTab)
{
for(var no=0;no<this.windowContents.length;no++){
if(this.windowContents[no].id==idOfTab)return no;
}
return false;
}
,
__getIsDeleted:function(idOfTab)
{
var index=this.__getIndexOfTabById(idOfTab);
if(index!==false){
return this.windowContents[index].isDeleted;
}
}
,
addTab:function(properties)
{
for(var no=0;no<this.windowContents.length;no++){
if(this.windowContents[no].id==properties.id)return false;
}
var newIndex=this.windowContents.length;
this.windowContents[newIndex]=new DHTMLSuite.windowTabModel(properties);
return this.windowContents[newIndex];
}
}
DHTMLSuite.windowTabModel=function(tabProperties)
{
var tabTitle;
var textContent;
var id;
var htmlElementId;
var contentUrl;
var isDeleted;
var overflow;
this.overflow='auto';
if(tabProperties)this.__setInitProps(tabProperties);
}
DHTMLSuite.windowTabModel.prototype=
{
__createContentModelFromHTMLElement:function(elementReference)
{
elementReference=DHTMLSuite.commonObj.getEl(elementReference);
this.textContent=elementReference.innerHTML;
var properties=elementReference.getAttribute('tabProperties');
if(!properties)properties=referenceToHTMLElement.tabProperties;
this.id=elementReference.id;
this.htmlElementId=elementReference.id;
this.__setInitProps(DHTMLSuite.commonObj.getAssociativeArrayFromString(properties));
}
,
__setInitProps:function(arrayOfProperties)
{
if(arrayOfProperties.tabTitle)this.tabTitle=arrayOfProperties.tabTitle;
if(arrayOfProperties.contentUrl)this.contentUrl=arrayOfProperties.contentUrl;
if(arrayOfProperties.id)this.id=arrayOfProperties.id;
if(arrayOfProperties.textContent)this.textContent=arrayOfProperties.textContent;
if(arrayOfProperties.htmlElementId)this.htmlElementId=arrayOfProperties.htmlElementId;
if(arrayOfProperties.isDeleted)this.htmlElementId=arrayOfProperties.isDeleted;
if(arrayOfProperties.overflow)this.overflow=arrayOfProperties.overflow;
if(this.id&&!this.htmlElementId)this.htmlElementId=this.id;
}
,
__setContentUrl:function(url)
{
this.contentUrl=url;
}
,
__setDeleted:function(isDeleted)
{
this.isDeleted=isDeleted;
}
}
DHTMLSuite.windowWidget=function(windowModel)
{
var windowModel;
var layoutCSS;
var objectIndex;
var divElement;
var divElInner;
var divTitleBar;
var divElContent;
var divCloseButton;
var divMinimizeButton;
var divStatusBarTxt;
var divTitleIcon;
var divResizeHandle;
var iframeEl;
var divElementTitle_txt;
var referenceToDragDropObject;
var contentDivs;
var resizeObj;
var slideSpeed;
var layoutOffsetHeightForTheStatusBar;
var scrollPositions;
this.scrollPositions=new Object();
this.layoutOffsetHeightForTheStatusBar=8;
this.layoutCSS='window.css';
this.contentDivs=new Object();
this.slideSpeed=25;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
if(windowModel)this.addWindowModel(windowModel);
}
DHTMLSuite.windowWidget.prototype={
show:function()
{
this.windowModel.isVisible=true;
this.divElement.style.visibility='visible';
this.divElement.style.display='block';
if(this.iframeEl)this.iframeEl.style.visibility='visible';
}
,
addWindowModel:function(windowModel)
{
this.windowModel=windowModel;
if(windowModel.windowsTheme)this.setLayoutThemeWindows();
}
,
setLayoutThemeWindows:function()
{
this.setLayoutCss('window-theme-windows.css');
this.layoutOffsetHeightForTheStatusBar=1;
}
,
appendContent:function(idOfTab,contentReference)
{
contentReference=DHTMLSuite.commonObj.getEl(contentReference);
try{
document.getElementById(idOfTab).appendChild(contentReference);
}catch(e){
}
}
,
setLayoutCss:function(cssFileName)
{
this.layoutCSS=cssFileName;
if(cssFileName=='window-theme-windows.css')this.layoutOffsetHeightForTheStatusBar=1;
}
,
setStatusBarText:function(text)
{
this.divStatusBarTxt.innerHTML=text;
}
,
setSlideSpeed:function(slideSpeed)
{
this.slideSpeed=slideSpeed;
}
,
init:function()
{
var ind=this.objectIndex;
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
this.__getWindowPropertiesFromCookie();
if(!this.windowModel.activeTabId)this.windowModel.__setActiveTabIdAutomatically();
this.__createPrimaryDivElements();
this.__createiframeEl();
this.__createTitleBar();
this.__createTabRow();
this.__createContentArea();
this.__createStatusBar();
this.__initiallyPopulateContentArea();
this.__displayActiveContent();
this.__populateTabRow();
this.__populateTitleBar();
this.__showHideButtonElements();
this.__makeWindowDragable();
this.__makeWindowResizable();
this.__initiallySetPositionAndSizeOfWindow();
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__setSizeOfDivElements()",200);
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__setSizeOfDivElements()",500);
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__setSizeOfDivElements()",1000);
setTimeout("DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__setSizeOfDivElements()",2000);
}
,
loadContent:function(idOfWindowContentObject,url)
{
this.windowModel.__setContentUrl(idOfWindowContentObject,url);
try{
var dynContent=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
var ref=this.windowModel.__getContentObjectById(idOfWindowContentObject);
if(ref)dynContent.loadContent(ref.htmlElementId,url);
}
,
activateTab:function(idOfContent)
{
var c=this.__getActiveContentElement();
this.scrollPositions[this.windowModel.activeTabId]=c.parentNode.scrollTop;
this.windowModel.__setActiveTabId(idOfContent);
this.__setLayoutOfTabs();
this.__displayActiveContent();
this.__saveCookie();
}
,
setLayoutOffsetHeightForTheStatusBar:function(layoutOffsetHeightForTheStatusBar)
{
this.layoutOffsetHeightForTheStatusBar=layoutOffsetHeightForTheStatusBar;
}
,
deleteTab:function(idOfTab)
{
this.windowModel.__deleteTab(idOfTab);
if(this.windowModel.__getActiveTabId()==idOfTab)this.windowModel.__setActiveTabIdAutomatically();
this.__populateTabRow();
this.__setLayoutOfTabs();
this.__displayActiveContent();
}
,
restoreTab:function(idOfTab)
{
this.windowModel.__restoreTab(idOfTab);
this.__populateTabRow();
this.__setLayoutOfTabs();
this.__displayActiveContent();
}
,
addTab:function(tabProperties)
{
var contentObj=this.windowModel.addTab(tabProperties);
if(contentObj){
this.__createContentForATab(contentObj);
this.__populateTabRow();
this.__setLayoutOfTabs();
this.__displayActiveContent();
}
}
,
setWidthOfWindow:function(newWidth)
{
this.windowModel.__setWidth(newWidth);
this.divElement.style.width=this.windowModel.__getWidth()+'px';
this.__updateWindowModel();
}
,
setHeightOfWindow:function(newHeight)
{
this.windowModel.__setHeight(newHeight);
this.divElement.style.height=this.windowModel.__getHeight()+'px';
this.__setSizeOfDivElements();
this.__updateWindowModel();
}
,
__createPrimaryDivElements:function()
{
this.divElement=document.createElement('DIV');
this.divElement.className='DHTMLSuite_window';
document.body.appendChild(this.divElement);
if(!this.windowModel.isVisible)this.divElement.style.visibility='hidden';
this.divElInner=document.createElement('DIV');
this.divElInner.className='DHTMLSuite_windowInnerDiv';
this.divElInner.style.position='relative';
this.divElInner.style.left='0px';
this.divElInner.style.top='0px';
this.divElInner.style.zIndex=5;
this.divElement.appendChild(this.divElInner);
}
,
__createiframeEl:function()
{
if(DHTMLSuite.clientInfoObj.isMSIE){
this.iframeEl=document.createElement('<IFRAME src="about:blank" frameborder=0>');
this.iframeEl.style.position='absolute';
this.iframeEl.style.top='0px';
this.iframeEl.style.left='0px';
this.iframeEl.style.width='105%';
this.iframeEl.style.height='105%';
this.iframeEl.style.zIndex=1;
this.iframeEl.style.visibility='visible';
if(!this.windowModel.isVisible)this.iframeEl.style.visibility='hidden';
this.divElement.appendChild(this.iframeEl);
}
}
,
__createTitleBar:function()
{
var ind=this.objectIndex;
this.divTitleBar=document.createElement('DIV');
this.divTitleBar.className='DHTMLSuite_windowTitleBar';
this.divElInner.appendChild(this.divTitleBar);
var buttonDiv=document.createElement('DIV');
buttonDiv.className='DHTMLSuite_windowButtonDiv';
this.divTitleBar.appendChild(buttonDiv);
if(this.windowModel.icon){
var iconDiv=document.createElement('DIV');
iconDiv.style.position='absolute';
iconDiv.className='DHTMLSuite_windowIcon';
iconDiv.style.backgroundImage='url("'+this.windowModel.icon+'")';
iconDiv.style.backgroundPosition='left center';
iconDiv.style.backgroundRepeat='no-repeat';
iconDiv.style.left='0px';
iconDiv.style.top='0px';
var img=document.createElement('IMG');
img.style.visibility='hidden';
img.src=this.windowModel.icon;
iconDiv.appendChild(img);
this.divTitleIcon=iconDiv;
this.divTitleBar.appendChild(iconDiv);
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__repositionTitleText()',50);
}
this.divCloseButton=document.createElement('DIV');
this.divCloseButton.onmouseover=this.__mouseoverCloseButton;
this.divCloseButton.onmouseout=this.__mouseoutCloseButton;
this.divCloseButton.className='DHTMLSuite_windowCloseButton';
this.divCloseButton.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].close();}
this.divCloseButton.innerHTML='<span></span>';
buttonDiv.appendChild(this.divCloseButton);
DHTMLSuite.commonObj.__addEventEl(this.divCloseButton);
if(this.windowModel.isMinimizable){
this.divMinimizeButton=document.createElement('DIV');
this.divMinimizeButton.onmouseover=this.__mouseoverMinimizeButton;
this.divMinimizeButton.onmouseout=this.__mouseoutMinimizeButton;
this.divMinimizeButton.className='DHTMLSuite_windowMinimizeButton';
this.divMinimizeButton.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].minimizeWindow();}
this.divMinimizeButton.innerHTML='<span></span>';
buttonDiv.appendChild(this.divMinimizeButton);
DHTMLSuite.commonObj.__addEventEl(this.divMinimizeButton);
this.divMaximizeButton=document.createElement('DIV');
this.divMaximizeButton.onmouseover=this.__mouseoverMaximizeButton;
this.divMaximizeButton.onmouseout=this.__mouseoutMaximizeButton;
this.divMaximizeButton.className='DHTMLSuite_windowMaximizeButton';
this.divMaximizeButton.onclick=function(){return DHTMLSuite.variableStorage.arrayDSObjects[ind].maximizeWindow();}
this.divMaximizeButton.innerHTML='<span></span>';
buttonDiv.appendChild(this.divMaximizeButton);
this.divMaximizeButton.style.display='none';
DHTMLSuite.commonObj.__addEventEl(this.divMaximizeButton);
}
this.divElementTitle_txt=document.createElement('DIV');
this.divElementTitle_txt.className='DHTMLSuite_windowTitleInTitleBar';
this.divTitleBar.onselectstart=function(){return false;};
this.divTitleBar.appendChild(this.divElementTitle_txt);
DHTMLSuite.commonObj.__addEventEl(this.divTitleBar);
}
,
__repositionTitleText:function()
{
this.divElementTitle_txt.style.marginLeft=(this.divTitleIcon.clientWidth)+'px';
}
,
__createTabRow:function()
{
this.divElementTabRow=document.createElement('DIV');
this.divElementTabRow.className='DHTMLSuite_windowTabRow';
this.divElInner.appendChild(this.divElementTabRow);
}
,
__createContentArea:function()
{
this.divElContent=document.createElement('DIV');
this.divElContent.className='DHTMLSuite_windowContent';
this.divElContent.style.overflow='auto';
this.divElInner.appendChild(this.divElContent);
}
,
__createStatusBar:function()
{
this.divStatusBar=document.createElement('DIV');
this.divStatusBar.className='DHTMLSuite_windowStatusBar';
this.divElInner.appendChild(this.divStatusBar);
this.divResizeHandle=document.createElement('DIV');
this.divResizeHandle.className='DHTMLSuite_windowResizeHandle';
this.divResizeHandle.innerHTML='<span></span>';
this.divStatusBar.appendChild(this.divResizeHandle);
this.divStatusBarTxt=document.createElement('DIV');
this.divStatusBarTxt.className='DHTMLSuite_windowStatusBarText';
this.divStatusBar.appendChild(this.divStatusBarTxt);
}
,
__populateTitleBar:function()
{
this.divElementTitle_txt.innerHTML=this.windowModel.__getTitle();
}
,
__initiallyPopulateContentArea:function()
{
var contentObjects=this.windowModel.__getContentObjects();
for(var no=0;no<contentObjects.length;no++){
this.__createContentForATab(contentObjects[no]);
}
}
,
__createContentForATab:function(contentObj)
{
if(contentObj.htmlElementId){
if(document.getElementById(contentObj.htmlElementId)){
this.contentDivs[contentObj.id]=document.getElementById(contentObj.htmlElementId);
}else{
this.contentDivs[contentObj.id]=document.createElement('DIV');
this.contentDivs[contentObj.id].id=contentObj.htmlElementId;
}
this.divElContent.appendChild(this.contentDivs[contentObj.id]);
}
if(contentObj.contentUrl){
this.loadContent(contentObj.id,contentObj.contentUrl);
}
if(contentObj.textContent){
this.contentDivs[contentObj.id].innerHTML=contentObj.textContent;
}
this.contentDivs[contentObj.id].className='DHTMLSuite_windowContentInner';
this.contentDivs[contentObj.id].style.display='none';
}
,
__getActiveContentElement:function()
{
var contentObjects=this.windowModel.__getContentObjects();
for(var no=0;no<contentObjects.length;no++){
if(contentObjects[no].id==this.windowModel.activeTabId){
return this.contentDivs[contentObjects[no].id];
}
}
}
,
__displayActiveContent:function()
{
var contentObjects=this.windowModel.__getContentObjects();
for(var no=0;no<contentObjects.length;no++){
if(contentObjects[no].id==this.windowModel.activeTabId){
this.contentDivs[contentObjects[no].id].style.display='block';
if(this.scrollPositions[contentObjects[no].id]){
this.contentDivs[contentObjects[no].id].parentNode.scrollTop=this.scrollPositions[contentObjects[no].id];
}
try{
this.divElContent.style.overflow=contentObjects[no].overflow;
}catch(e){
}
}else{
this.contentDivs[contentObjects[no].id].style.display='none';
}
}
}
,
__populateTabRow:function()
{
var ind=this.objectIndex;
this.divElementTabRow.innerHTML='';
var contentObjects=this.windowModel.__getContentObjects();
if(DHTMLSuite.clientInfoObj.isMSIE){
var table=document.createElement('<TABLE cellpadding="0" cellspacing="0" border="0">');
}else{
var table=document.createElement('TABLE');
table.setAttribute('cellpadding',0);
table.setAttribute('cellspacing',0);
table.setAttribute('border',0);
}
this.divElementTabRow.appendChild(table);
var tbody=document.createElement('TBODY');
table.appendChild(tbody);
var row=tbody.insertRow(0);
for(var no=0;no<contentObjects.length;no++){
if(!this.windowModel.__getIsDeleted(contentObjects[no].id)){
var cell=row.insertCell(-1);
cell.className='DHTMLSuite_windowATab';
cell.id='windowTab_'+contentObjects[no].id;
cell.setAttribute('contentId',contentObjects[no].id);
cell.onclick=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__activateTabByClick(e);};
DHTMLSuite.commonObj.__addEventEl(cell);
var innerDiv=document.createElement('DIV');
innerDiv.className='DHTMLSuite_windowATabInnerDiv';
innerDiv.innerHTML=contentObjects[no].tabTitle;
cell.appendChild(innerDiv);
}
}
this.__setLayoutOfTabs();
}
,
__clearActiveAndInactiveStylingFromTabs:function()
{
var cells=this.divElementTabRow.getElementsByTagName('TD');
var divs=this.divElementTabRow.getElementsByTagName('DIV');
for(var no=0;no<cells.length;no++){
cells[no].className=cells[no].className.replace('DHTMLSuite_windowActiveTabCell','');
cells[no].className=cells[no].className.replace('DHTMLSuite_windowInactiveTabCell','');
cells[no].style.left='0px';
}
for(var no=0;no<divs.length;no++){
divs[no].className=divs[no].className.replace(' DHTMLSuite_windowActiveTabCellContent','');
divs[no].className=divs[no].className.replace(' DHTMLSuite_windowInactiveTabCellContent','');
}
}
,
__setLayoutOfTabs:function()
{
this.__clearActiveAndInactiveStylingFromTabs();
var cells=this.divElementTabRow.getElementsByTagName('TD');
var contentObjects=this.windowModel.__getContentObjects();
var activeTabIndex=0;
for(var no=0;no<cells.length;no++){
if(cells[no].id=='windowTab_'+this.windowModel.activeTabId){
activeTabIndex=no;
break;
}
}
var leftPadding=0;
if(activeTabIndex>0){
leftPadding=-7;
}
cells[0].style.zIndex=1;
for(var no=1;no<activeTabIndex;no++){
cells[no].style.left=leftPadding+'px';
cells[no].style.zIndex=no+1;
leftPadding-=7;
}
for(var no=activeTabIndex;no<cells.length;no++){
cells[no].style.left=leftPadding+'px';
cells[no].style.zIndex=100-no;
leftPadding-=7;
}
cells[activeTabIndex].style.zIndex=200;
for(var no=0;no<cells.length;no++){
var div=cells[no].getElementsByTagName('DIV')[0];
if(no==activeTabIndex){
cells[no].className=cells[no].className+' DHTMLSuite_windowActiveTabCell';
div.className=div.className+' DHTMLSuite_windowActiveTabCellContent';
}else{
cells[no].className=cells[no].className+' DHTMLSuite_windowInactiveTabCell';
div.className=div.className+' DHTMLSuite_windowInactiveTabCellContent';
}
}
}
,
__setSizeOfDivElements:function()
{
try{
this.divElContent.style.height=(this.divElement.clientHeight-(this.divTitleBar.offsetHeight+this.divStatusBar.offsetHeight+this.divElementTabRow.offsetHeight+this.layoutOffsetHeightForTheStatusBar))+'px';
if(DHTMLSuite.clientInfoObj.isMSIE&&DHTMLSuite.clientInfoObj.navigatorVersion<7){
this.divElContent.style.width=this.divStatusBar.clientWidth+'px';
}
}catch(e){
this.divElContent.style.height='1px';
}
try{
if(this.windowModel.__getState()=='minimized')this.divElement.style.height=(this.divTitleBar.offsetHeight+this.divElementTabRow.offsetHeight+this.divStatusBar.offsetHeight)+'px';
}catch(e)
{
}
}
,
__activateTabByClick:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
if(src.tagName.toLowerCase()=='div')src=src.parentNode;
var idOfContent=src.getAttribute('contentId');
this.activateTab(idOfContent);
}
,
__updateWindowModel:function()
{
this.windowModel.__setWidth(this.divElement.style.width.replace('px','')/1);
if(this.windowModel.__getState()!='minimized')this.windowModel.__setHeight(this.divElement.style.height.replace('px','')/1);
this.windowModel.__setXPos(this.divElement.style.left.replace('px','')/1);
this.windowModel.__setYPos(this.divElement.style.top.replace('px','')/1);
this.windowModel.__setZIndex(this.divElement.style.zIndex);
this.__saveCookie();
}
,
__saveCookie:function()
{
if(!this.windowModel.cookieName)return;
var cookieValue='width:'+this.windowModel.__getWidth();
cookieValue+=',height:'+this.windowModel.__getHeight();
cookieValue+=',xPos:'+this.windowModel.__getXPos();
cookieValue+=',yPos:'+this.windowModel.__getYPos();
cookieValue+=',zIndex:'+this.divElement.style.zIndex;
cookieValue+=',activeTabId:'+this.windowModel.__getActiveTabId();
cookieValue+=',state:'+this.windowModel.__getState();
DHTMLSuite.commonObj.setCookie(this.windowModel.cookieName,cookieValue,500);
}
,
__getWindowPropertiesFromCookie:function()
{
if(!this.windowModel.cookieName)return;
var cookieValue=DHTMLSuite.commonObj.getCookie(this.windowModel.cookieName);
var propertyArray=DHTMLSuite.commonObj.getAssociativeArrayFromString(cookieValue);
if(!propertyArray)return;
if(propertyArray.width)this.windowModel.__setWidth(propertyArray.width);
if(propertyArray.height)this.windowModel.__setHeight(propertyArray.height);
if(propertyArray.xPos)this.windowModel.__setXPos(propertyArray.xPos);
if(propertyArray.yPos)this.windowModel.__setYPos(propertyArray.yPos);
if(propertyArray.zIndex)this.windowModel.__setZIndex(propertyArray.zIndex);
if(propertyArray.state)this.windowModel.__setState(propertyArray.state);
if(propertyArray.activeTabId)this.windowModel.__setActiveTabId(propertyArray.activeTabId);
}
,
__initiallySetPositionAndSizeOfWindow:function()
{
this.divElement.style.position='absolute';
var width=this.windowModel.__getWidth();
var height=this.windowModel.__getHeight();
var xPos=this.windowModel.__getXPos();
var yPos=this.windowModel.__getYPos();
var zIndex=this.windowModel.__getZIndex();
var state=this.windowModel.__getState();
if(width&&width!='0')this.divElement.style.width=width+'px';
if(height&&height!='0')this.divElement.style.height=height+'px';
if(xPos)this.divElement.style.left=xPos+'px';
if(yPos)this.divElement.style.top=yPos+'px';
if(zIndex)this.divElement.style.zIndex=zIndex;
if(state&&state=='minimized')this.minimizeWindow();
}
,
__deleteTabByClick:function()
{
}
,
__makeWindowResizable:function()
{
if(!this.windowModel.isResizable){
this.divResizeHandle.style.visibility='hidden';
return;
}
var ind=this.objectIndex;
try{
this.resizeObj=new DHTMLSuite.resize({minWidth:this.windowModel.minWidth,minHeight:this.windowModel.minHeight,maxWidth:this.windowModel.maxWidth,maxHeight:this.windowModel.maxHeight});
}catch(e){
alert('You need to include dhtmlSuite-resize.js');
}
this.resizeObj.setElementRoResize(this.divElement);
this.resizeObj.addResizeHandle(this.divResizeHandle,'southeast');
this.resizeObj.setCallbackOnBeforeResize('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__isOkToResize');
this.resizeObj.setCallbackOnAfterResize('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__updateWindowModel');
this.resizeObj.setCallbackOnDuringResize('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__setSizeOfDivElements');
this.resizeObj.init();
this.divStatusBarTxt.onselectstart=function(){return false;};
this.divStatusBar.onselectstart=function(){return false;};
DHTMLSuite.commonObj.__addEventEl(this.divStatusBarTxt);
DHTMLSuite.commonObj.__addEventEl(this.divStatusBar);
}
,
__isOkToResize:function()
{
if(this.windowModel.__getState()=='minimized')return false;
return true;
}
,
__makeWindowDragable:function()
{
var ind=this.objectIndex;
if(this.windowModel.isDragable){
try{
this.referenceToDragDropObject=new DHTMLSuite.dragDropSimple({elementReference:this.divElement,cloneNode:false});
}catch(e){
alert('You need to include dhtmlSuite-dragDropSimple.js');
}
this.referenceToDragDropObject.setCallbackOnAfterDrag('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__updateWindowModel');
this.referenceToDragDropObject.setCallbackOnBeforeDrag('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__updateWindowModel');
this.referenceToDragDropObject.addDragHandle(this.divTitleBar);
this.divTitleBar.style.cursor='move';
this.referenceToDragDropObject.__setNewCurrentZIndex(this.windowModel.__getZIndex());
}
}
,
deleteWindow:function()
{
this.close();
}
,
close:function()
{
this.windowModel.isVisible=true;
this.divElement.style.visibility='hidden';
this.divElement.style.display='none';
if(this.iframeEl)this.iframeEl.style.visibility='hidden';
this.__handleCallback('onClose');
}
,
purge:function()
{
DHTMLSuite.discardElement(this.divElement);
}
,
getDivElement:function()
{
return this.divElement;
}
,
restoreWindow:function()
{
this.show();
}
,
__handleCallback:function(action)
{
var callbackString='';
switch(action){
case"onClose":
callbackString=this.windowModel.callbackOnClose;
break;
}
if(callbackString){
var ind=this.objectIndex;
callbackString=callbackString+'(DHTMLSuite.variableStorage.arrayDSObjects['+ind+'])';
return eval(callbackString);
}
}
,
minimizeWindow:function()
{
this.windowModel.__setState('minimized');
this.divElContent.style.display='none';
this.divStatusBar.style.display='none';
this.divElementTabRow.style.display='none';
this.divMinimizeButton.style.display='none';
this.divMaximizeButton.style.display='block';
this.__setSizeOfDivElements();
this.__saveCookie();
}
,
maximizeWindow:function()
{
this.windowModel.__setState('maximized');
this.divElContent.style.display='block';
this.divStatusBar.style.display='block';
this.divElementTabRow.style.display='block';
this.divMinimizeButton.style.display='block';
this.divMaximizeButton.style.display='none';
this.divElement.style.height=this.windowModel.__getHeight()+'px';
this.__setSizeOfDivElements();
this.__saveCookie();
}
,
slideWindowToXAndY:function(toX,toY)
{
var slideFactors=this.__getSlideFactors(toX,toY);
var slideDirections=this.__getSlideDirections(toX,toY);
var slideTo=new Object();
slideTo.x=toX;
slideTo.y=toY;
var currentPos=new Object();
currentPos.x=this.windowModel.__getXPos();
currentPos.y=this.windowModel.__getYPos();
if(currentPos.x==slideTo.x&&currentPos.y==slideTo.y)return;
this.__performSlide(slideTo,currentPos,slideFactors,slideDirections);
}
,
__performSlide:function(slideTo,currentPos,slideFactors,slideDirections)
{
var ind=this.objectIndex;
currentPos.x=currentPos.x/1+(this.slideSpeed*slideFactors.y*slideDirections.x);
currentPos.y=currentPos.y/1+(this.slideSpeed*slideFactors.x*slideDirections.y);
repeatSlide=false;
if(slideDirections.x<0){
if(currentPos.x<=slideTo.x){
currentPos.x=slideTo.x;
}else{
repeatSlide=true;
}
}else{
if(currentPos.x>=slideTo.x){
currentPos.x=slideTo.x;
}else{
repeatSlide=true;
}
}
if(slideDirections.y<0){
if(currentPos.y<=slideTo.y){
currentPos.y=slideTo.y;
}else{
repeatSlide=true;
}
}else{
if(currentPos.y>=slideTo.y){
currentPos.y=slideTo.y;
}else{
repeatSlide=true;
}
}
this.divElement.style.left=Math.round(currentPos.x)+'px';
this.divElement.style.top=Math.round(currentPos.y)+'px';
if(repeatSlide){
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__performSlide({x:'+slideTo.x+',y:'+slideTo.y+'},{x:'+currentPos.x+',y:'+currentPos.y+'},{x:'+slideFactors.x+',y:'+slideFactors.y+'},{ x:'+slideDirections.x+',y:'+slideDirections.y+'})',10);
}else{
this.__updateWindowModel();
}
}
,
__getSlideFactors:function(toX,toY)
{
var retArray=new Object();
var currentX=this.windowModel.__getXPos();
var currentY=this.windowModel.__getYPos();
var distance_x=Math.abs(toX-currentX);
var distance_y=Math.abs(toY-currentY);
if(distance_x<distance_y){
retArray.x=distance_y/distance_x;
retArray.y=1;
}else{
retArray.y=distance_x/distance_y;
retArray.x=1;
}
return retArray;
}
,
__getSlideDirections:function(toX,toY)
{
var retArray=new Object();
if(toX<this.windowModel.__getXPos())retArray.x=-1;else retArray.x=1;
if(toY<this.windowModel.__getYPos())retArray.y=-1;else retArray.y=1;
return retArray;
}
,
__showHideButtonElements:function()
{
if(this.windowModel.isClosable)this.divCloseButton.style.display='block';else this.divCloseButton.style.display='none';
}
,
__mouseoverCloseButton:function()
{
this.className=this.className+' DHTMLSuite_windowCloseButtonOver';
}
,
__mouseoutCloseButton:function()
{
this.className=this.className.replace(' DHTMLSuite_windowCloseButtonOver','');
}
,
__mouseoverMinimizeButton:function()
{
this.className=this.className+' DHTMLSuite_windowMinimizeButtonOver';
}
,
__mouseoutMinimizeButton:function()
{
this.className=this.className.replace(' DHTMLSuite_windowMinimizeButtonOver','');
}
,
__mouseoverMaximizeButton:function()
{
this.className=this.className+' DHTMLSuite_windowMaximizeButtonOver';
}
,
__mouseoutMaximizeButton:function()
{
this.className=this.className.replace(' DHTMLSuite_windowMaximizeButtonOver','');
}
}
DHTMLSuite.windowCollection=function(){
var windowWidgets;
var spaceBetweenEachWindowWhenCascaded;
var numberOfColumnsWhenTiled;
var divWindowsArea;
this.windowWidgets=new Array();
this.spaceBetweenEachWindowWhenCascaded=20;
this.numberOfColumnsWhenTiled=2;
}
DHTMLSuite.windowCollection.prototype=
{
addWindow:function(windowWidgetReference)
{
this.windowWidgets[this.windowWidgets.length]=windowWidgetReference;
}
,
tile:function()
{
this.windowWidgets=this.windowWidgets.sort(this.__sortItems);
var browserWidth=DHTMLSuite.clientInfoObj.getBrowserWidth()-20;
var browserHeight=DHTMLSuite.clientInfoObj.getBrowserHeight()-20;
var offsetX=10;
var offsetY=10;
if(this.divWindowsArea){
browserWidth=this.divWindowsArea.clientWidth;
browserHeight=this.divWindowsArea .clientHeight;
offsetX=DHTMLSuite.commonObj.getLeftPos(this.divWindowsArea);
offsetY=DHTMLSuite.commonObj.getTopPos(this.divWindowsArea);
}
var windowWidth=Math.floor(browserWidth/this.numberOfColumnsWhenTiled);
var windowHeight=Math.floor(browserHeight/Math.ceil(this.windowWidgets.length/this.numberOfColumnsWhenTiled));
for(var no=0;no<this.windowWidgets.length;no++){
this.windowWidgets[no].setWidthOfWindow(windowWidth);
this.windowWidgets[no].setHeightOfWindow(windowHeight-5);
var xPos=offsetX+(windowWidth*(no%this.numberOfColumnsWhenTiled));
var yPos=offsetY+(windowHeight*Math.floor((no)/this.numberOfColumnsWhenTiled));
this.windowWidgets[no].slideWindowToXAndY(xPos,yPos);
}
}
,
cascade:function()
{
this.windowWidgets=this.windowWidgets.sort(this.__sortItems);
var browserWidth=DHTMLSuite.clientInfoObj.getBrowserWidth()-50;
var browserHeight=DHTMLSuite.clientInfoObj.getBrowserHeight()-50;
var offsetX=10;
var offsetY=10;
if(this.divWindowsArea){
browserWidth=this.divWindowsArea.clientWidth;
browserHeight=this.divWindowsArea .clientHeight;
offsetX=DHTMLSuite.commonObj.getLeftPos(this.divWindowsArea);
offsetY=DHTMLSuite.commonObj.getTopPos(this.divWindowsArea);
}
var windowWidth=browserWidth-((this.windowWidgets.length-1)*this.spaceBetweenEachWindowWhenCascaded);
var windowHeight=browserHeight-((this.windowWidgets.length-1)*this.spaceBetweenEachWindowWhenCascaded);
for(var no=0;no<this.windowWidgets.length;no++){
this.windowWidgets[no].setWidthOfWindow(windowWidth);
this.windowWidgets[no].setHeightOfWindow(windowHeight);
this.windowWidgets[no].slideWindowToXAndY(offsetX+this.spaceBetweenEachWindowWhenCascaded*(no),offsetY+this.spaceBetweenEachWindowWhenCascaded*(no));
}
}
,
minimize:function()
{
for(var no=0;no<this.windowWidgets.length;no++){
this.windowWidgets[no].minimizeWindow();
}
}
,
maximize:function()
{
for(var no=0;no<this.windowWidgets.length;no++){
this.windowWidgets[no].maximizeWindow();
}
}
,
setNumberOfColumnsWhenTiled:function(numberOfColumnsWhenTiled)
{
this.numberOfColumnsWhenTiled=numberOfColumnsWhenTiled;
}
,
setDivWindowsArea:function(divWindowsArea)
{
divWindowsArea=DHTMLSuite.commonObj.getEl(divWindowsArea);
this.divWindowsArea=divWindowsArea;
}
,
__sortItems:function(a,b)
{
return a.windowModel.__getZIndex()/1-b.windowModel.__getZIndex()/1;
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.resize=function(propertyArray)
{
var resizeWhichElement;
var resizeHandles;
this.resizeHandles=new Array();
var preserveRatio;
var minWidth;
var maxWidth;
var minHeight;
var maxHeight;
var callbackOnBeforeResize;
var callbackOnAfterResize;
var callbackOnDuringResize;
var resizeTimer;
var resizeInWhichDirections;
var resizeHandleelativePath;
var objectIndex;
var mouseStartPos;
var initElementSize;
var currentResizeDirection;
var classNameOfResizeHandles;
var layoutCSS;
var resizeHandlerOffsetInPixels;
var elementToResizeIsAbsolutePositioned;
var sizeOfWidthRelativeToHeight;
this.minWidth=0;
this.minHeight=0;
this.maxWidth=150000;
this.maxHeight=150000;
this.classNameOfResizeHandles='DHTMLSuite_resize_handle';
this.layoutCSS='resize.css';
this.resizeHandleelativePath='resize/small_square.gif';
this.resizeTimer=-1;
this.mouseStartPos=new Object();
this.initElementSize=new Object();
this.resizeHandlerOffsetInPixels=4;
this.elementToResizeIsAbsolutePositioned=false;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
if(propertyArray)this.__setInitProps(propertyArray);
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.resize.prototype=
{
setLayoutCss:function(cssFileName)
{
this.layoutCSS=cssFileName;
}
,
setCssClassNameForResizeHandles:function(classNameOfResizeHandles)
{
this.classNameOfResizeHandles=classNameOfResizeHandles;
}
,
setElementRoResize:function(elementReference)
{
elementReference=DHTMLSuite.commonObj.getEl(elementReference);
this.resizeWhichElement=elementReference;
}
,
addResizeHandle:function(resizeHandle,direction)
{
resizeHandle=DHTMLSuite.commonObj.getEl(resizeHandle);
var index=this.resizeHandles.length;
this.resizeHandles[index]=new Object();
this.resizeHandles[index].element=resizeHandle;
this.resizeHandles[index].direction=direction;
}
,
setMinWidthInPixels:function(pixels)
{
this.minWidth=pixels;
}
,
setMaxWidthInPixels:function(pixels)
{
this.maxWidth=pixels;
}
,
setMinHeightInPixels:function(pixels)
{
this.minHeight=pixels;
}
,
setMaxHeightInPixels:function(pixels)
{
this.maxHeight=pixels;
}
,
setCallbackOnBeforeResize:function(functionName)
{
this.callbackOnBeforeResize=functionName;
}
,
setCallbackOnAfterResize:function(functionName)
{
this.callbackOnAfterResize=functionName;
}
,
setCallbackOnDuringResize:function(functionName)
{
this.callbackOnDuringResize=functionName;
}
,
setResizeHandlerOffsetInPixels:function(offsetInPx)
{
this.resizeHandlerOffsetInPixels=offsetInPx;
}
,
setIsResizeElementAbsolutePositioned:function(absolutePositioned)
{
this.elementToResizeIsAbsolutePositioned=absolutePositioned;
}
,
getReferenceToResizedElement:function()
{
return this.resizeWhichElement;
}
,
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
this.__setAspectRatio();
this.__createResizeHandlesAutomatically();
this.__setCursorOfResizeHandles();
this.__addEventsToResizeHandles();
this.__addBasicEvents();
}
,
__setAspectRatio:function()
{
this.sizeOfWidthRelativeToHeight=this.resizeWhichElement.offsetWidth/this.resizeWhichElement.offsetHeight;
}
,
__setInitProps:function(propertyArray)
{
if(propertyArray.minWidth)this.minWidth=propertyArray.minWidth;
if(propertyArray.maxWidth)this.maxWidth=propertyArray.maxWidth;
if(propertyArray.minHeight)this.minHeight=propertyArray.minHeight;
if(propertyArray.maxHeight)this.maxHeight=propertyArray.maxHeight;
if(propertyArray.preserveRatio)this.preserveRatio=propertyArray.preserveRatio;
if(propertyArray.callbackOnBeforeResize)this.callbackOnBeforeResize=propertyArray.callbackOnBeforeResize;
if(propertyArray.callbackOnAfterResize)this.callbackOnAfterResize=propertyArray.callbackOnAfterResize;
if(propertyArray.callbackOnDuringResize)this.callbackOnDuringResize=propertyArray.callbackOnDuringResize;
if(propertyArray.resizeInWhichDirections)this.resizeInWhichDirections=propertyArray.resizeInWhichDirections;
}
,
__createResizeHandlesAutomatically:function()
{
if(this.resizeHandles.length>0)return;
if(!this.resizeInWhichDirections||this.resizeInWhichDirections=='all')this.resizeInWhichDirections='west,east,north,south,southeast,southwest,northwest,northeast';
var directions=this.resizeInWhichDirections.split(/,/g);
for(var no=0;no<directions.length;no++){
this.resizeHandles[no]=new Object();
this.resizeHandles[no].element=document.createElement('DIV');
this.resizeHandles[no].element.className=this.classNameOfResizeHandles;
this.resizeWhichElement.appendChild(this.resizeHandles[no].element);
this.resizeHandles[no].direction=directions[no];
var el=this.resizeHandles[no].element;
el.style.position='absolute';
el.style.top='50%';
el.style.left='50%';
if(directions[no].indexOf('west')>=0)el.style.left=(0-this.resizeHandlerOffsetInPixels)+'px';
if(directions[no].indexOf('east')>=0){
el.style.right=(0-this.resizeHandlerOffsetInPixels)+'px';
el.style.left='';
}
if(directions[no].indexOf('north')>=0)el.style.top=(0-this.resizeHandlerOffsetInPixels)+'px';
if(directions[no].indexOf('south')>=0){
el.style.bottom=(0-this.resizeHandlerOffsetInPixels)+'px';
el.style.top='';
}
if(el.style.top=='50%')el.style.marginTop='-'+Math.round(el.offsetHeight/2)+'px';
if(el.style.left=='50%')el.style.marginLeft='-'+Math.round(el.offsetWidth/2)+'px';
}
}
,
__setCursorOfResizeHandles:function()
{
for(var no=0;no<this.resizeHandles.length;no++){
switch(this.resizeHandles[no].direction){
case"west":
case"east":
this.resizeHandles[no].element.style.cursor='e-resize';
break;
case"north":
case"south":
this.resizeHandles[no].element.style.cursor='s-resize';
break;
case"northeast":
this.resizeHandles[no].element.style.cursor='ne-resize';
break;
case"northwest":
this.resizeHandles[no].element.style.cursor='nw-resize';
break;
case"southwest":
this.resizeHandles[no].element.style.cursor='sw-resize';
break;
case"southeast":
this.resizeHandles[no].element.style.cursor='se-resize';
break;
}
}
}
,
__addEventsToResizeHandles:function()
{
var ind=this.objectIndex;
for(var no=0;no<this.resizeHandles.length;no++){
this.resizeHandles[no].element.onmousedown=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__initResize(e);}
this.resizeHandles[no].element.onselectstart=function(){return false;};
DHTMLSuite.commonObj.__addEventEl(this.resizeHandles[no].element);
this.resizeHandles[no].element.setAttribute('resizeInDirection',this.resizeHandles[no].direction);
this.resizeHandles[no].element.resizeInDirection=this.resizeHandles[no].direction;
}
}
,
__addBasicEvents:function()
{
var ind=this.objectIndex;
DHTMLSuite.commonObj.addEvent(document.documentElement,'mousemove',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__processResize(e);},ind);
DHTMLSuite.commonObj.addEvent(document.documentElement,'mouseup',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__endResize(e);},ind);
if(!document.documentElement.onselectstart)document.documentElement.onselectstart=function(){return DHTMLSuite.commonObj.__isTextSelOk();};
}
,
__initResize:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
if(this.callbackOnBeforeResize){
var ok=this.__handleCallback('beforeResize');
if(!ok)return;
}
DHTMLSuite.commonObj.__setTextSelOk(false);
this.resizeTimer=0;
this.mouseStartPos.x=e.clientX;
this.mouseStartPos.y=e.clientY;
this.initElementSize.width=this.resizeWhichElement.offsetWidth;
this.initElementSize.height=this.resizeWhichElement.offsetHeight;
this.initElementSize.top=this.resizeWhichElement.style.top.replace('px','')/1;
if(this.elementToResizeIsAbsolutePositioned&&!this.initElementSize.top)this.initElementSize.top=DHTMLSuite.commonObj.getTopPos(this.resizeWhichElement);
this.initElementSize.left=this.resizeWhichElement.style.left.replace('px','')/1;
if(this.elementToResizeIsAbsolutePositioned&&!this.initElementSize.left)this.initElementSize.left=DHTMLSuite.commonObj.getLeftPos(this.resizeWhichElement);
this.currentResizeDirection=src.getAttribute('resizeInDirection');
this.__delayBeforeResize();
return false;
}
,
__delayBeforeResize:function()
{
if(this.resizeTimer>=0&&this.resizeTimer<5){
var ind=this.objectIndex;
this.resizeTimer++;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__delayBeforeResize()',20);
return;
}
}
,
__processResize:function(e)
{
if(document.all)e=event;
if(this.resizeTimer<5)return;
if(DHTMLSuite.clientInfoObj.isMSIE&&e.button!=1)return this.__endResize();
var newWidth=this.initElementSize.width;
var newHeight=this.initElementSize.height;
var newTop=this.initElementSize.top;
var newLeft=this.initElementSize.left;
switch(this.currentResizeDirection){
case"east":
case"northeast":
case"southeast":
newWidth=(this.initElementSize.width+e.clientX-this.mouseStartPos.x);
break;
}
switch(this.currentResizeDirection){
case"south":
case"southeast":
case"southwest":
newHeight=(this.initElementSize.height+e.clientY-this.mouseStartPos.y)
break;
}
if(this.currentResizeDirection.indexOf('north')>=0){
newTop=this.initElementSize.top+e.clientY-this.mouseStartPos.y;
newHeight=newHeight-(newTop-this.initElementSize.top);
if(this.preserveRatio&&this.currentResizeDirection=='north')newWidth=Math.round(newHeight*this.sizeOfWidthRelativeToHeight);
if(newHeight<this.minHeight){
newTop-=(this.minHeight-newHeight);
}
}
if(this.currentResizeDirection.indexOf('west')>=0){
newLeft=this.initElementSize.left+e.clientX-this.mouseStartPos.x;
newWidth=newWidth-(newLeft-this.initElementSize.left);
if(this.preserveRatio&&this.currentResizeDirection=='west')newHeight=Math.round(newWidth/this.sizeOfWidthRelativeToHeight);
if(newWidth<this.minWidth){
newLeft-=(this.minWidth-newWidth);
}
if(newWidth>this.maxWidth){
newLeft+=(newWidth-this.maxWidth);
}
}
if(newWidth<this.minWidth)newWidth=this.minWidth;
if(newHeight<this.minHeight)newHeight=this.minHeight;
if(this.maxWidth&&newWidth>this.maxWidth)newWidth=this.maxWidth;
if(this.maxHeight&&newHeight>this.maxHeight)newHeight=this.maxHeight;
if(this.currentResizeDirection.indexOf('east')>=0&&this.preserveRatio){
newHeight=Math.round(newWidth/this.sizeOfWidthRelativeToHeight);
}
if(this.currentResizeDirection.indexOf('south')>=0&&this.preserveRatio){
newWidth=Math.round(newHeight*this.sizeOfWidthRelativeToHeight);
}
if(this.currentResizeDirection=='northwest'&&this.preserveRatio){
if(newWidth/newHeight>this.sizeOfWidthRelativeToHeight){
newHeight=Math.round(newWidth/this.sizeOfWidthRelativeToHeight);
}else{
newWidth=Math.round(newHeight*this.sizeOfWidthRelativeToHeight);
}
}
this.resizeWhichElement.style.width=newWidth+'px';
this.resizeWhichElement.style.height=newHeight+'px';
this.resizeWhichElement.style.top=newTop+'px';
this.resizeWhichElement.style.left=newLeft+'px';
if(this.callbackOnDuringResize)this.__handleCallback('duringResize');
}
,
__endResize:function(e)
{
DHTMLSuite.commonObj.__setTextSelOk(true);
if(this.resizeTimer==5){
this.__handleCallback('afterResize');
}
this.resizeTimer=-1;
}
,
__handleCallback:function(action)
{
var ind=this.objectIndex;
var callbackString='';
switch(action){
case"afterResize":
callbackString=this.callbackOnAfterResize;
break;
case"duringResize":
callbackString=this.callbackOnDuringResize;
break;
case"beforeResize":
callbackString=this.callbackOnBeforeResize;
break;
}
if(callbackString)callbackString=callbackString+'(DHTMLSuite.variableStorage.arrayDSObjects['+ind+'])';
try{
return eval(callbackString);
}catch(e){
alert('Could not execute call back string after resize');
}
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
var DHTMLSuite_dragDropSimple_curZIndex=100000;
var DHTMLSuite_dragDropSimple_curObjIndex=false;
DHTMLSuite.dragDropSimple=function(propertyArray)
{
var divElement;
var dragTimer;
var cloneNode;
this.cloneNode=true;
var callbackOnAfterDrag;
var callbackOnBeforeDrag;
var callbackOnDuringDrag;
var mouse_x;
var mouse_y;
var positionSet;
var dragHandle;
var allowMoveX;
var allowMoveY;
var maxY;
var minY;
var minX;
var maxX;
var initialXPos;
var initialYPos;
this.positionSet=false;
this.dragHandle=new Array();
var initOffsetX;
var initOffsetY;
this.allowMoveX=true;
this.allowMoveY=true;
this.maxY=false;
this.maxX=false;
this.minX=false;
this.minY=false;
this.callbackOnAfterDrag=false;
this.callbackOnBeforeDrag=false;
this.dragStatus=-1;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
this.__setInitProps(propertyArray);
this.__init();
}
DHTMLSuite.dragDropSimple.prototype={
__setInitProps:function(props)
{
if(props.cloneNode===false||props.cloneNode)this.cloneNode=props.cloneNode;
if(props.allowMoveX===false||props.allowMoveX)this.allowMoveX=props.allowMoveX;
if(props.allowMoveY===false||props.allowMoveY)this.allowMoveY=props.allowMoveY;
if(props.minY||props.minY===0)this.minY=props.minY;
if(props.maxY||props.maxY===0)this.maxY=props.maxY;
if(props.minX||props.minX===0)this.minX=props.minX;
if(props.maxX||props.maxX===0)this.maxX=props.maxX;
if(!props.initOffsetX)props.initOffsetX=0;
if(!props.initOffsetY)props.initOffsetY=0;
this.initOffsetX=props.initOffsetX;
this.initOffsetY=props.initOffsetY;
if(props.callbackOnBeforeDrag)this.callbackOnBeforeDrag=props.callbackOnBeforeDrag;
if(props.callbackOnAfterDrag)this.callbackOnAfterDrag=props.callbackOnAfterDrag;
if(props.callbackOnDuringDrag)this.callbackOnDuringDrag=props.callbackOnDuringDrag;
props.elementReference=DHTMLSuite.commonObj.getEl(props.elementReference);
this.divElement=props.elementReference;
this.initialXPos=DHTMLSuite.commonObj.getLeftPos(this.divElement);
this.initialYPos=DHTMLSuite.commonObj.getTopPos(this.divElement);
if(props.dragHandle)this.dragHandle[this.dragHandle.length]=DHTMLSuite.commonObj.getEl(props.dragHandle)
}
,
__init:function()
{
var ind=this.objectIndex;
this.divElement.objectIndex=ind;
this.divElement.setAttribute('objectIndex',ind);
this.divElement.style.padding='0px';
if(this.allowMoveX){
this.divElement.style.left=(DHTMLSuite.commonObj.getLeftPos(this.divElement)+this.initOffsetX)+'px';
}
if(this.allowMoveY){
this.divElement.style.top=(DHTMLSuite.commonObj.getTopPos(this.divElement)+this.initOffsetY)+'px';
}
this.divElement.style.position='absolute';
this.divElement.style.margin='0px';
if(this.divElement.style.zIndex&&this.divElement.style.zIndex/1>DHTMLSuite_dragDropSimple_curZIndex)DHTMLSuite_dragDropSimple_curZIndex=this.divElement.style.zIndex/1;
DHTMLSuite_dragDropSimple_curZIndex=DHTMLSuite_dragDropSimple_curZIndex/1+1;
this.divElement.style.zIndex=DHTMLSuite_dragDropSimple_curZIndex;
if(this.cloneNode){
var copy=this.divElement.cloneNode(true);
this.divElement.parentNode.insertBefore(copy,this.divElement);
copy.style.visibility='hidden';
document.body.appendChild(this.divElement);
}
DHTMLSuite.commonObj.addEvent(this.divElement,'mousedown',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__initDragProcess(e);},ind);
DHTMLSuite.commonObj.addEvent(document.documentElement,'mousemove',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__moveDragableElement(e);},ind);
DHTMLSuite.commonObj.addEvent(document.documentElement,'mouseup',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__stopDragProcess(e);},ind);
if(!document.documentElement.onselectstart)document.documentElement.onselectstart=function(){return DHTMLSuite.commonObj.__isTextSelOk();};
}
,
setCallbackOnAfterDrag:function(functionName)
{
this.callbackOnAfterDrag=functionName;
}
,
setCallbackOnBeforeDrag:function(functionName)
{
this.callbackOnBeforeDrag=functionName;
}
,
addDragHandle:function(dragHandle)
{
this.dragHandle[this.dragHandle.length]=dragHandle;
}
,
__initDragProcess:function(e)
{
if(document.all)e=event;
var ind=this.objectIndex;
DHTMLSuite_dragDropSimple_curObjIndex=ind;
var thisObject=DHTMLSuite.variableStorage.arrayDSObjects[ind];
if(!DHTMLSuite.commonObj.isObjectClicked(thisObject.divElement,e))return;
if(thisObject.divElement.style.zIndex&&thisObject.divElement.style.zIndex/1>DHTMLSuite_dragDropSimple_curZIndex)DHTMLSuite_dragDropSimple_curZIndex=thisObject.divElement.style.zIndex/1;
DHTMLSuite_dragDropSimple_curZIndex=DHTMLSuite_dragDropSimple_curZIndex/1+1;
thisObject.divElement.style.zIndex=DHTMLSuite_dragDropSimple_curZIndex;
if(thisObject.callbackOnBeforeDrag){
thisObject.__handleCallback('beforeDrag',e);
}
if(thisObject.dragHandle.length>0){
var objectFound;
for(var no=0;no<thisObject.dragHandle.length;no++){
if(!objectFound)objectFound=DHTMLSuite.commonObj.isObjectClicked(thisObject.dragHandle[no],e);
}
if(!objectFound)return;
}
DHTMLSuite.commonObj.__setTextSelOk(false);
thisObject.mouse_x=e.clientX;
thisObject.mouse_y=e.clientY;
thisObject.el_x=thisObject.divElement.style.left.replace('px','')/1;
thisObject.el_y=thisObject.divElement.style.top.replace('px','')/1;
thisObject.dragTimer=0;
thisObject.__waitBeforeDragProcessStarts();
return false;
}
,
__waitBeforeDragProcessStarts:function()
{
var ind=this.objectIndex;
if(this.dragTimer>=0&&this.dragTimer<5){
this.dragTimer++;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__waitBeforeDragProcessStarts()',5);
}
}
,
__moveDragableElement:function(e)
{
if(document.all)e=event;
var ind=this.objectIndex;
var thisObj=DHTMLSuite.variableStorage.arrayDSObjects[ind];
if(DHTMLSuite.clientInfoObj.isMSIE&&e.button!=1)return thisObj.__stopDragProcess();
if(thisObj.dragTimer==5){
if(thisObj.allowMoveX){
var leftPos=(e.clientX-this.mouse_x+this.el_x);
if(this.maxX!==false){
if(leftPos+document.documentElement.scrollLeft>this.initialXPos+this.maxX){
leftPos=this.initialXPos+this.maxX;
}
}
if(this.minX!==false)
{
if(leftPos+document.documentElement.scrollLeft<this.initialXPos+this.minX){
leftPos=this.initialXPos+this.minX;
}
}
thisObj.divElement.style.left=leftPos+'px';
}
if(thisObj.allowMoveY){
var topPos=(e.clientY-thisObj.mouse_y+thisObj.el_y);
if(this.maxY!==false){
if(topPos>this.initialYPos+this.maxY){
topPos=this.initialYPos+this.maxY;
}
}
if(this.minY!==false)
{
if(topPos<this.initialYPos+this.minY){
topPos=this.initialYPos+this.minY;
}
}
thisObj.divElement.style.top=topPos+'px';
}
if(this.callbackOnDuringDrag)this.__handleCallback('duringDrag',e);
}
return false;
}
,
__stopDragProcess:function(e)
{
var ind=this.objectIndex;
DHTMLSuite.commonObj.__setTextSelOk(true);
var thisObj=DHTMLSuite.variableStorage.arrayDSObjects[ind];
if(thisObj.dragTimer==5){
thisObj.__handleCallback('afterDrag',e);
}
thisObj.dragTimer=-1;
}
,
__handleCallback:function(action,e)
{
var callbackString='';
switch(action){
case"afterDrag":
callbackString=this.callbackOnAfterDrag;
break;
case"beforeDrag":
callbackString=this.callbackOnBeforeDrag;
break;
case"duringDrag":
callbackString=this.callbackOnDuringDrag;
break;
}
if(callbackString){
callbackString=callbackString+'(e)';
try{
eval(callbackString);
}catch(e){
alert('Could not execute callback function('+callbackString+')after drag');
}
}
}
,
__setNewCurrentZIndex:function(zIndex)
{
if(zIndex>DHTMLSuite_dragDropSimple_curZIndex){
DHTMLSuite_dragDropSimple_curZIndex=zIndex/1+1;
}
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.infoPanel=function(){
var xpPanel_slideActive;
var xpPanel_slideSpeed;
var xpPanel_onlyOneExpandedPane;
var savedActivePane;
var savedActiveSub;
var xpPanel_currentDirection;
var cookieNames;
var layoutCSS;
var arrayOfPanes;
var dynamicContentObj;
var paneHeights;
var currentlyExpandedPane=false;
this.xpPanel_slideActive=true;
this.xpPanel_slideSpeed=20;
this.xpPanel_onlyOneExpandedPane=false;
this.savedActivePane=false;
this.savedActiveSub=false;
this.xpPanel_currentDirection=new Object();
this.cookieNames=new Array();
this.currentlyExpandedPane=false;
this.layoutCSS='info-pane.css';
this.arrayOfPanes=new Array();
this.paneHeights=new Object();
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
try{
this.dynamicContentObj=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
}
DHTMLSuite.infoPanel.prototype={
addPane:function(idOfPane,labelOfPane,state,nameOfCookie,width)
{
var index=this.arrayOfPanes.length;
this.arrayOfPanes[index]=[idOfPane,labelOfPane,state,nameOfCookie,width];
}
,
addContentToPane:function(idOfPane,pathToExternalFile)
{
var obj=document.getElementById(idOfPane);
var subDivs=obj.getElementsByTagName('DIV');
for(var no=0;no<subDivs.length;no++){
if(subDivs[no].className=='DHTMLSuite_infoPaneContent'){
window.refToThisPane=this;
this.__slidePane(this.xpPanel_slideSpeed,subDivs[no].id);
this.dynamicContentObj.loadContent(subDivs[no].id,pathToExternalFile,"window.refToThisPane.__resizeAndRepositionPane('"+idOfPane+"')");
if(subDivs[no].parentNode.style.display=='none'||subDivs[no].parentNode.style.height=='0px'){
var topBarObj=DHTMLSuite.domQueryObj.getElementsByClassName('DHTMLSuite_infoPaneTopBar',subDivs[no].parentNode.parentNode);
this.__showHidePaneContent(topBarObj[0]);
}
return;
}
}
}
,
addStaticContentToPane:function(idOfPane,newContent)
{
var obj=document.getElementById(idOfPane);
var subDivs=obj.getElementsByTagName('DIV');
for(var no=0;no<subDivs.length;no++){
if(subDivs[no].className=='DHTMLSuite_infoPaneContent'){
window.refToThisPane=this;
this.__slidePane(this.xpPanel_slideSpeed,subDivs[no].id);
subDivs[no].innerHTML=newContent;
if(subDivs[no].parentNode.style.display=='none'||subDivs[no].parentNode.style.height=='0px'){
var topBarObj=DHTMLSuite.domQueryObj.getElementsByClassName('DHTMLSuite_infoPaneTopBar',subDivs[no].parentNode.parentNode);
this.__showHidePaneContent(topBarObj[0]);
}
this.__resizeAndRepositionPane(idOfPane);
return;
}
}
}
,
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
for(var no=0;no<this.arrayOfPanes.length;no++){
var tmpDiv=document.getElementById(this.arrayOfPanes[no][0]);
tmpDiv.className='DHTMLSuite_panel';
var panelTitle=this.arrayOfPanes[no][1];
var panelDisplayed=this.arrayOfPanes[no][2];
var nameOfCookie=this.arrayOfPanes[no][3];
var widthOfPane=this.arrayOfPanes[no][4];
if(widthOfPane)tmpDiv.style.width=widthOfPane;
var outerContentDiv=document.createElement('DIV');
var contentDiv=tmpDiv.getElementsByTagName('DIV')[0];
contentDiv.className='DHTMLSuite_infoPaneContent';
contentDiv.id='infoPaneContent'+no;
outerContentDiv.appendChild(contentDiv);
this.cookieNames[this.cookieNames.length]=nameOfCookie;
outerContentDiv.id='paneContent'+no;
outerContentDiv.className='DHTMLSuite_panelContent';
outerContentDiv.style.backgroundImage='url(\''+DHTMLSuite.configObj.imagePath+'info-pane/xp-info-pane-bg_pane_right.gif'+'\')';
var topBar=document.createElement('DIV');
topBar.onselectstart=function(){return false;};
topBar.className='DHTMLSuite_infoPane_topBar';
topBar.style.position='relative';
DHTMLSuite.commonObj.__addEventEl(topBar);
var span=document.createElement('SPAN');
span.innerHTML=panelTitle;
topBar.appendChild(span);
topBar.style.backgroundImage='url(\''+DHTMLSuite.configObj.imagePath+'info-pane/xp-info-pane-bg_panel_top_right.gif'+'\')';
window.refToXpPane=this;
topBar.onclick=function(){window.refToXpPane.__showHidePaneContent(this)};
if(document.all)topBar.ondblclick=function(){window.refToXpPane.__showHidePaneContent(this)};;
topBar.onmouseover=this.__mouseoverTopbar;
topBar.onmouseout=this.__mouseoutTopbar;
topBar.style.position='relative';
var btnDiv=document.createElement('DIV');
btnDiv.className='DHTMLSuite_infoPane_topBar_button';
topBar.appendChild(btnDiv);
if(nameOfCookie){
cookieValue=DHTMLSuite.commonObj.getCookie(nameOfCookie);
if(cookieValue)panelDisplayed=cookieValue==1?true:false;
}
if(!panelDisplayed){
outerContentDiv.style.height='0px';
contentDiv.style.top=0-contentDiv.offsetHeight+'px';
if(document.all)outerContentDiv.style.display='none';
btnDiv.className=btnDiv.className+' DHTMLSuite_infoPane_topBar_buttonDown';
}
topBar.className='DHTMLSuite_infoPaneTopBar';
topBar.id='infoPane_topBar'+no;
tmpDiv.appendChild(topBar);
tmpDiv.appendChild(outerContentDiv);
}
}
,
__resizeAndRepositionPane:function(idOfPane)
{
var obj=document.getElementById(idOfPane);
var subDivs=obj.getElementsByTagName('DIV');
for(var no=0;no<subDivs.length;no++){
if(subDivs[no].className=='DHTMLSuite_panelContent'){
subDivs[no].style.overflow='auto';
subDivs[no].style.height='';
var contentDiv=subDivs[no].getElementsByTagName('DIV')[0];
var tmpHeight=subDivs[no].clientHeight;
tmpHeight=subDivs[no].offsetHeight;
subDivs[no].style.height=tmpHeight+'px';
if(tmpHeight)this.paneHeights[subDivs[no].id]=tmpHeight;
subDivs[no].style.top='0px';
subDivs[no].style.overflow='hidden';
var subSub=subDivs[no].getElementsByTagName('DIV')[0];
subSub.style.top='0px';
}
}
}
,
__showHidePaneContent:function(inputObj,methodWhenFinished)
{
var div=inputObj.getElementsByTagName('div')[0];
var numericId=inputObj.id.replace(/[^0-9]/g,'');
var obj=document.getElementById('paneContent'+numericId);
if(div.className.indexOf('DHTMLSuite_infoPane_topBar_buttonDown')==-1){
this.currentlyExpandedPane=false;
div.className=div.className+' DHTMLSuite_infoPane_topBar_buttonDown';
if(this.xpPanel_slideActive){
obj.style.display='block';
this.xpPanel_currentDirection[obj.id]=(this.xpPanel_slideSpeed*-1);
this.__slidePane((this.xpPanel_slideSpeed*-1),obj.id,methodWhenFinished);
}else{
obj.style.display='none';
}
if(this.cookieNames[numericId])DHTMLSuite.commonObj.setCookie(this.cookieNames[numericId],'0',100000);
}else{
if(inputObj){
if(this.currentlyExpandedPane&&this.xpPanel_onlyOneExpandedPane)this.__showHidePaneContent(this.currentlyExpandedPane);
this.currentlyExpandedPane=inputObj;
}
div.className=div.className.replace(' DHTMLSuite_infoPane_topBar_buttonDown','');
if(this.xpPanel_slideActive){
if(document.all){
obj.style.display='block';
}
this.xpPanel_currentDirection[obj.id]=this.xpPanel_slideSpeed;
this.__slidePane(this.xpPanel_slideSpeed,obj.id,methodWhenFinished);
}else{
obj.style.display='block';
subDiv=obj.getElementsByTagName('DIV')[0];
obj.style.height=subDiv.offsetHeight+'px';
}
if(this.cookieNames[numericId])DHTMLSuite.commonObj.setCookie(this.cookieNames[numericId],'1',100000);
}
return true;
}
,
__slidePane:function(slideValue,id,methodWhenFinished)
{
if(slideValue!=this.xpPanel_currentDirection[id]){
return false;
}
var activePane=document.getElementById(id);
if(activePane==this.savedActivePane){
var subDiv=this.savedActiveSub;
}else{
var subDiv=activePane.getElementsByTagName('DIV')[0];
}
this.savedActivePane=activePane;
this.savedActiveSub=subDiv;
var height=activePane.offsetHeight;
var innerHeight=subDiv.offsetHeight;
if(this.paneHeights[activePane.id])innerHeight=this.paneHeights[activePane.id];
height+=slideValue;
if(height<0)height=0;
if(height>innerHeight)height=innerHeight;
if(document.all){
activePane.style.filter='alpha(opacity='+Math.round((height/innerHeight)*100)+')';
}else{
var opacity=(height/innerHeight);
if(opacity==0)opacity=0.01;
if(opacity==1)opacity=0.99;
activePane.style.opacity=opacity;
}
window.refToThisInfoPane=this;
if(slideValue<0){
activePane.style.height=height+'px';
subDiv.style.top=height-innerHeight+'px';
if(height>0){
setTimeout('window.refToThisInfoPane.__slidePane('+slideValue+',"'+id+'","'+methodWhenFinished+'")',10);
}else{
if(document.all)activePane.style.display='none';
if(methodWhenFinished)eval(methodWhenFinished);
}
}else{
subDiv.style.top=height-innerHeight+'px';
activePane.style.height=height+'px';
if(height<innerHeight){
setTimeout('window.refToThisInfoPane.__slidePane('+slideValue+',"'+id+'","'+methodWhenFinished+'")',10);
}else{
if(methodWhenFinished)eval(methodWhenFinished);
}
}
}
,
__mouseoverTopbar:function()
{
var div=this.getElementsByTagName('DIV')[0];
div.className=div.className+' DHTMLSuite_infoPaneButton_over';
var span=this.getElementsByTagName('SPAN')[0];
span.className='DHTMLSuite_infoPanelOver';
}
,
__mouseoutTopbar:function()
{
var div=this.getElementsByTagName('DIV')[0];
div.className=div.className.replace(' DHTMLSuite_infoPaneButton_over','');
var span=this.getElementsByTagName('SPAN')[0];
span.className='';
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.modalMessage=function(props)
{
var url;
var htmlOfModalMessage;
var domRef;
var divs_transparentDiv;
var divs_content;
var iframeEl;
var layoutCss;
var width;
var height;
var isModal;
var existingBodyOverFlowStyle;
var dynContentObj;
var cssClassOfMessageBox;
var shadowDivVisible;
var shadowOffset;
var objectIndex;
this.url='';
this.htmlOfModalMessage='';
this.layoutCss='modal-message.css';
this.height=200;
this.width=400;
this.cssClassOfMessageBox=false;
this.shadowDivVisible=true;
this.shadowOffset=5;
this.isModal=true;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
var ind=this.objectIndex;
DHTMLSuite.commonObj.addEvent(window,"resize",function(){DHTMLSuite.variableStorage.arrayDSObjects[ind].__resizeTransparentDiv();});
if(props)this.__setInitialProps(props);
}
DHTMLSuite.modalMessage.prototype={
__setInitialProps:function(props)
{
if(props.url)this.setSource(props.url);
if(props.htmlOfModalMessage)this.setHtmlContent(props.htmlOfModalMessage);
if(props.domRef)this.setDomReference(props.domRef);
if(props.width)this.width=props.width;
if(props.height)this.height=props.height;
if(props.cssClassOfMessageBox)this.cssClassOfMessageBox=props.cssClassOfMessageBox;
if(props.shadowOffset)this.shadowOffset=props.shadowOffset;
if(props.shadowDivVisible)this.shadowDivVisible=props.shadowDivVisible;
if(props.isModal||props.isModal===false||props.isModal===0)this.isModal=props.isModal;
if(props.waitMessage)this.setWaitMessage(waitMessage);
}
,
setIsModal:function(isModal)
{
this.isModal=isModal;
}
,
setSource:function(urlOfSource)
{
if(urlOfSource)this.__clearProperties();
this.url=urlOfSource;
}
,
setHtmlContent:function(newHtmlContent)
{
if(newHtmlContent)this.__clearProperties();
this.htmlOfModalMessage=newHtmlContent;
}
,
setDomReference:function(domRef)
{
if(domRef)this.__clearProperties();
if(domRef)domRef=DHTMLSuite.commonObj.getEl(domRef);
if(domRef){
domRef=domRef.cloneNode(true);
}
this.domRef=domRef;
}
,
setSize:function(width,height)
{
if(width)this.width=width;
if(height)this.height=height;
}
,
setCssClassMessageBox:function(newCssClass)
{
this.cssClassOfMessageBox=newCssClass;
if(this.divs_content){
if(this.cssClassOfMessageBox)
this.divs_content.className=this.cssClassOfMessageBox;
else
this.divs_content.className='modalDialog_contentDiv';
}
}
,
setShadowOffset:function(newShadowOffset)
{
this.shadowOffset=newShadowOffset
}
,
setWaitMessage:function(newMessage)
{
if(!this.dynContentObj){
try{
this.dynContentObj=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
}
this.dynContentObj.setWaitMessage(newMessage);
}
,
setWaitImage:function(newImage)
{
if(!this.dynContentObj){
try{
this.dynContentObj=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
}
this.dynContentObj.setWaitImage(newImage);
}
,
setCache:function(cacheStatus)
{
if(!this.dynContentObj){
try{
this.dynContentObj=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
}
this.dynContentObj.setCache(cacheStatus);
}
,
display:function()
{
var ind=this.objectIndex;
if(!this.divs_transparentDiv){
DHTMLSuite.commonObj.loadCSS(this.layoutCss);
this.__createDivElements();
}
this.__resizeAndPositionDivElements();
if(this.isModal){
this.divs_transparentDiv.style.display='block';
}else{
this.divs_transparentDiv.style.display='none';
}
this.divs_content.style.display='block';
this.divs_shadow.style.display='block';
if(this.iframeEl){
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].iframeEl.style.display="block"',150);
}
this.__resizeAndPositionDivElements();
window.refToThisModalBoxObj=this;
setTimeout('window.refToThisModalBoxObj.__resizeAndPositionDivElements()',100);
this.__addHTMLContent();
}
,
setShadowDivVisible:function(visible)
{
this.shadowDivVisible=visible;
}
,
close:function()
{
document.documentElement.style.overflow='';
this.divs_transparentDiv.style.display='none';
this.divs_content.style.display='none';
this.divs_shadow.style.display='none';
if(this.iframeEl)this.iframeEl.style.display='none';
}
,
__clearProperties:function()
{
if(this.domRef)DHTMLSuite.discardElement(this.domRef);
this.domRef=null;
this.url=false;
this.htmlOfModalMessage=false;
}
,
__createDivElements:function()
{
this.divs_transparentDiv=document.createElement('DIV');
this.divs_transparentDiv.className='DHTMLSuite_modalDialog_transparentDivs';
this.divs_transparentDiv.style.left='0px';
this.divs_transparentDiv.style.top='0px';
document.body.appendChild(this.divs_transparentDiv);
if(!document.getElementById('DHTMLSuite_modalBox_contentDiv')){
this.divs_content=document.createElement('DIV');
this.divs_content.className='DHTMLSuite_modalDialog_contentDiv';
this.divs_content.id='DHTMLSuite_modalBox_contentDiv';
document.body.appendChild(this.divs_content);
}else{
this.divs_content=document.getElementById('DHTMLSuite_modalBox_contentDiv');
}
this.divs_shadow=document.createElement('DIV');
this.divs_shadow.className='DHTMLSuite_modalDialog_contentDiv_shadow';
document.body.appendChild(this.divs_shadow);
if(DHTMLSuite.clientInfoObj.isMSIE){
this.iframeEl=document.createElement('<iframe frameborder=0 src="about:blank" scrolling="no">');
this.iframeEl.style.filter='alpha(opacity=0)';
this.iframeEl.style.cssText='filter:alpha(opacity=0)';
this.iframeEl.style.position='absolute';
this.iframeEl.style.zIndex=100001;
this.iframeEl.style.display='none';
this.iframeEl.style.left='0px';
this.iframeEl.style.top='0px';
document.body.appendChild(this.iframeEl);
}
}
,
__resizeAndPositionDivElements:function()
{
var topOffset=Math.max(document.body.scrollTop,document.documentElement.scrollTop);
if(this.cssClassOfMessageBox)
this.divs_content.className=this.cssClassOfMessageBox;
else
this.divs_content.className='DHTMLSuite_modalDialog_contentDiv';
if(!this.divs_transparentDiv)return;
var bodyWidth=DHTMLSuite.clientInfoObj.getBrowserWidth();
var bodyHeight=DHTMLSuite.clientInfoObj.getBrowserHeight();
this.divs_content.style.width=this.width+'px';
this.divs_content.style.height=this.height+'px';
var tmpWidth=this.divs_content.offsetWidth;
var tmpHeight=this.divs_content.offsetHeight;
this.divs_content.style.left=Math.ceil((bodyWidth-tmpWidth)/2)+'px';;
this.divs_content.style.top=(Math.ceil((bodyHeight-tmpHeight)/2)+topOffset)+'px';
this.divs_shadow.style.left=(this.divs_content.style.left.replace('px','')/1+this.shadowOffset)+'px';
this.divs_shadow.style.top=(this.divs_content.style.top.replace('px','')/1+this.shadowOffset)+'px';
this.divs_shadow.style.height=tmpHeight+'px';
this.divs_shadow.style.width=tmpWidth+'px';
if(!this.shadowDivVisible)this.divs_shadow.style.display='none';
this.__resizeTransparentDiv();
}
,
__resizeTransparentDiv:function()
{
if(!this.divs_transparentDiv)return;
var divHeight=DHTMLSuite.clientInfoObj.getBrowserHeight();
var divWidth=DHTMLSuite.clientInfoObj.getBrowserWidth();
this.divs_transparentDiv.style.height=divHeight+'px';
this.divs_transparentDiv.style.width=divWidth+'px';
if(this.iframeEl){
this.iframeEl.style.width=this.divs_transparentDiv.style.width;
this.iframeEl.style.height=this.divs_transparentDiv.style.height;
}
}
,
__addHTMLContent:function()
{
if(!this.dynContentObj){
try{
this.dynContentObj=new DHTMLSuite.dynamicContent();
}catch(e){
alert('You need to include dhtmlSuite-dynamicContent.js');
}
}
if(this.url){
this.dynContentObj.loadContent('DHTMLSuite_modalBox_contentDiv',this.url);
}
if(this.htmlOfModalMessage){
this.divs_content.innerHTML=this.htmlOfModalMessage;
}
if(this.domRef){
this.divs_content.innerHTML='';
this.divs_content.appendChild(this.domRef);
var dis=DHTMLSuite.commonObj.getStyle(this.domRef,'display');
if(dis=='none')this.domRef.style.display='block';
this.domRef.style.visibility='visible';
}
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.colorPalette=function(propertyArray)
{
var divElement;
var layoutCSS;
var colors;
var colorHelper;
var width;
var callbackOnColorClick;
var objectIndex;
var currentColor;
try{
this.colorHelper=new DHTMLSuite.colorUtil();
}catch(e){
alert('You need to include dhtmlSuite-colorUtil.js');
}
this.layoutCSS='color-palette.css';
this.colors=new Array();
this.currentColor=new Object();
if(propertyArray)this.__setInitProps(propertyArray);
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.colorPalette.prototype=
{
setCallbackOnColorClick:function(functionName)
{
this.callbackOnColorClick=functionName;
}
,
__setInitProps:function(propertyArray)
{
if(propertyArray.width){
propertyArray.width=propertyArray.width+'';
if(propertyArray.width.match(/^[^0-9]*?$/)){
propertyArray.width=propertyArray.width+'px';
}
this.width=propertyArray.width;
}
if(propertyArray.callbackOnColorClick)this.callbackOnColorClick=propertyArray.callbackOnColorClick;
}
,
addAllWebColors:function()
{
var colors=this.colorHelper.getAllWebColors();
for(var no=0;no<colors.length;no++){
this.colors[this.colors.length]=['#'+colors[no],'#'+colors[no]];
}
}
,
addAllNamedColors:function()
{
var colors=this.colorHelper.getAllNamedColors();
for(var no=0;no<colors.length;no++){
this.colors[this.colors.length]=['#'+colors[no][1],colors[no][0]];
}
}
,
addGrayScaleColors:function(numberOfColors,rangeFrom,rangeTo)
{
if(!numberOfColors)numberOfColors=16;
if(!rangeFrom)rangeFrom=0;
if(!rangeTo)rangeTo=255;
if(rangeFrom>rangeTo){
var tmpRange=rangeFrom;
rangeFrom=rangeTo;
rangeTo=tmpRange;
}
var step=(rangeTo-rangeFrom)/numberOfColors;
for(var no=rangeFrom;no<=rangeTo;no+=step){
var color=this.colorHelper.baseConverter(Math.round(no),10,16)+'';
while(color.length<2)color='0'+color;
this.colors[this.colors.length]=['#'+color+color+color,'#'+color+color+color];
}
}
,
addColor:function(color,name)
{
if(!name)name=color;
this.colors[this.colors.length]=[color,name];
}
,
setLayoutCss:function(cssFileName)
{
this.layoutCSS=cssFileName;
}
,
getDivElement:function()
{
return this.divElement;
}
,
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
this.__createMainDivEl();
this.__createColorDivs();
}
,
__createMainDivEl:function()
{
this.divElement=document.createElement('DIV');
this.divElement.className='DHTMLSuite_colorPalette';
if(this.width){
this.divElement.style.width=this.width;
}
}
,
__createColorDivs:function()
{
var ind=this.objectIndex;
for(var no=0;no<this.colors.length;no++){
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorPaletteColor';
div.setAttribute('rgb',this.colors[no][0]);
try{
div.style.backgroundColor=this.colors[no][0];
}catch(e){
div.style.display='none';
}
div.onclick=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__clickOnColor(e);};
DHTMLSuite.commonObj.__addEventEl(div)
div.title=this.colors[no][1];
this.divElement.appendChild(div);
}
var clearDiv=document.createElement('DIV');
clearDiv.style.clear='both';
this.divElement.appendChild(clearDiv);
}
,
__clickOnColor:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
this.currentColor.rgb=src.getAttribute('rgb');
if(!this.currentColor.rgb)this.currentColor.rgb=src.rgb;
this.currentColor.name=src.title;
this.__handleCallback('colorClick');
}
,
__handleCallback:function(action)
{
var callbackString='';
switch(action)
{
case"colorClick":
if(this.callbackOnColorClick)callbackString=this.callbackOnColorClick;
break;
}
if(callbackString){
callbackString=callbackString+'({ rgb:this.currentColor.rgb, name:this.currentColor.name})';
eval(callbackString);
}
}
}
DHTMLSuite.colorSlider=function(propertyArray)
{
var divElement;
var layoutCSS;
var colorHelper;
var currentRgb;
var currentRed;
var currentGreen;
var currentBlue;
var objectIndex;
var frmFieldRed;
var frmFieldGreen;
var frmFieldBlue;
var callbackOnChangeRgb;
this.currentRgb='FF0000';
this.currentRed=255;
this.currentBlue=0;
this.currentGreen=0;
this.currentRedHex='FF';
this.currentGreenHex='00';
this.currentBlueHex='00';
this.layoutCSS='color-slider.css';
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
try{
this.colorHelper=new DHTMLSuite.colorUtil();
}catch(e){
alert('You need to include dhtmlSuite-colorUtil.js');
}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
if(propertyArray)this.__setInitProps(propertyArray);
}
DHTMLSuite.colorSlider.prototype=
{
__setInitProps:function(props)
{
if(props.callbackOnChangeRgb)this.callbackOnChangeRgb=props.callbackOnChangeRgb;
}
,
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
this.__createMainDivEl();
this.__createDivPreview();
this.__createSliderDiv();
this.__createColorDiv();
this.__setPreviewDivBgColor();
}
,
setRgbColor:function(rgbCode)
{
rgbCode=rgbCode+'';
rgbCode=rgbCode.replace(/[^0-9A-F]/gi,'');
if(rgbCode.length!=6)return false;
this.currentRgb=rgbCode;
this.__setParamsFromCurrentRgb();
try{
this.__updateSliderHandles();
this.__updateFormFields();
this.__setPreviewDivBgColor();
}catch(e){
}
}
,
getDivElement:function()
{
return this.divElement;
}
,
__createMainDivEl:function()
{
this.divElement=document.createElement('DIV');
this.divElement.className='DHTMLSuite_colorSlider';
}
,
__createDivPreview:function()
{
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorSliderPreviewParent';
this.divPreview=document.createElement('DIV');
this.divPreview.className='DHTMLSuite_colorSliderPreview';
div.appendChild(this.divPreview);
this.divElement.appendChild(div);
}
,
__createSliderDiv:function()
{
var ind=this.objectIndex;
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorSliderSliderParent';
this.divElement.appendChild(div);
var divRed=document.createElement('DIV');
divRed.className='DHTMLSuite_colorSliderSliderColorRow';
div.appendChild(divRed);
var labelDiv=document.createElement('DIV');
labelDiv.className='DHTMLSuite_colorSliderSliderLabelDiv';
labelDiv.innerHTML='R';
divRed.appendChild(labelDiv);
var sliderDiv=document.createElement('DIV');
sliderDiv.className='DHTMLSuite_colorSliderSlider';
divRed.appendChild(sliderDiv);
try{
var sliderObj=new DHTMLSuite.slider();
}catch(e){
alert('Error-you need to include dhtmlSuite-slider.js');
}
sliderObj.setSliderTarget(sliderDiv);
sliderObj.setSliderWidth(240);
sliderObj.setOnChangeEvent('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__receiveRedFromSlider');
sliderObj.setSliderName('red');
sliderObj.setInitialValue(this.currentRed);
sliderObj.setSliderMaxValue(255);
sliderObj.init();
this.sliderObjRed=sliderObj;
var inputDiv=document.createElement('DIV');
inputDiv.className='DHTMLSuite_colorSliderSliderInputDiv';
this.frmFieldRed=document.createElement('INPUT');
this.frmFieldRed.value=this.currentRed;
this.frmFieldRed.maxLength=3;
inputDiv.appendChild(this.frmFieldRed);
divRed.appendChild(inputDiv);
this.frmFieldRed.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveRedFromForm(e);};
DHTMLSuite.commonObj.__addEventEl(this.frmFieldRed);
var divGreen=document.createElement('DIV');
divGreen.className='DHTMLSuite_colorSliderSliderColorRow';
div.appendChild(divGreen);
var labelDiv=document.createElement('DIV');
labelDiv.className='DHTMLSuite_colorSliderSliderLabelDiv';
labelDiv.innerHTML='G';
divGreen.appendChild(labelDiv);
var sliderDiv=document.createElement('DIV');
sliderDiv.className='DHTMLSuite_colorSliderSlider';
divGreen.appendChild(sliderDiv);
var sliderObj=new DHTMLSuite.slider();
sliderObj.setSliderTarget(sliderDiv);
sliderObj.setSliderWidth(240);
sliderObj.setOnChangeEvent('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__receiveGreenFromSlider');
sliderObj.setSliderName('green');
sliderObj.setInitialValue(this.currentGreen);
sliderObj.setSliderMaxValue(255);
sliderObj.init();
this.sliderObjGreen=sliderObj;
var inputDiv=document.createElement('DIV');
inputDiv.className='DHTMLSuite_colorSliderSliderInputDiv';
this.frmFieldGreen=document.createElement('INPUT');
this.frmFieldGreen.value=this.currentGreen;
this.frmFieldGreen.maxLength=3;
inputDiv.appendChild(this.frmFieldGreen);
divGreen.appendChild(inputDiv);
this.frmFieldGreen.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveGreenFromForm(e);};
DHTMLSuite.commonObj.__addEventEl(this.frmFieldGreen);
var divBlue=document.createElement('DIV');
divBlue.className='DHTMLSuite_colorSliderSliderColorRow';
div.appendChild(divBlue);
var labelDiv=document.createElement('DIV');
labelDiv.className='DHTMLSuite_colorSliderSliderLabelDiv';
labelDiv.innerHTML='B';
divBlue.appendChild(labelDiv);
var sliderDiv=document.createElement('DIV');
sliderDiv.className='DHTMLSuite_colorSliderSlider';
divBlue.appendChild(sliderDiv);
var sliderObj=new DHTMLSuite.slider();
sliderObj.setSliderTarget(sliderDiv);
sliderObj.setSliderWidth(240);
sliderObj.setOnChangeEvent('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__receiveBlueFromSlider');
sliderObj.setSliderName('blue');
sliderObj.setInitialValue(this.currentBlue);
sliderObj.setSliderMaxValue(255);
sliderObj.init();
this.sliderObjBlue=sliderObj;
var inputDiv=document.createElement('DIV');
inputDiv.className='DHTMLSuite_colorSliderSliderInputDiv';
this.frmFieldBlue=document.createElement('INPUT');
this.frmFieldBlue.value=this.currentBlue;
this.frmFieldBlue.maxLength=3;
this.frmFieldBlue.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveBlueFromForm(e);};
DHTMLSuite.commonObj.__addEventEl(this.frmFieldBlue);
inputDiv.appendChild(this.frmFieldBlue);
divBlue.appendChild(inputDiv);
}
,
__getValidatedFormVar:function(e)
{
var src=DHTMLSuite.commonObj.getSrcElement(e);
var val=src.value;
val=val.replace(/[^0-9]/gi,'');
if(!val)val=0;
val=val/1;
if(val<0)val=0;
if(val>255)val=255;
return val;
}
,
__receiveRedFromForm:function(e)
{
if(document.all)e=event;
this.currentRed=this.__getValidatedFormVar(e);
this.currentRedHex=this.colorHelper.baseConverter(this.currentRed,10,16)+'';
while(this.currentRedHex.length<2)this.currentRedHex='0'+this.currentRedHex;
this.currentRgb=this.currentRedHex+this.currentGreenHex+this.currentBlueHex;
this.__updateSliderHandles();
this.__updateFormFields();
this.__setPreviewDivBgColor();
}
,
__receiveGreenFromForm:function(e)
{
if(document.all)e=event;
this.currentGreen=this.__getValidatedFormVar(e);
this.currentGreenHex=this.colorHelper.baseConverter(this.currentGreen,10,16)+'';
while(this.currentGreenHex.length<2)this.currentGreenHex='0'+this.currentGreenHex;
this.currentRgb=this.currentRedHex+this.currentGreenHex+this.currentBlueHex;
this.__updateSliderHandles();
this.__updateFormFields();
this.__setPreviewDivBgColor();
}
,
__receiveBlueFromForm:function(e)
{
if(document.all)e=event;
this.currentBlue=this.__getValidatedFormVar(e);
this.currentBlueHex=this.colorHelper.baseConverter(this.currentBlue,10,16)+'';
while(this.currentBlueHex.length<2)this.currentBlueHex='0'+this.currentBlueHex;
this.currentRgb=this.currentRedHex+this.currentGreenHex+this.currentBlueHex;
this.__updateSliderHandles();
this.__updateFormFields();
this.__setPreviewDivBgColor();
}
,
__createColorDiv:function()
{
var ind=this.objectIndex;
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorSliderRgbBgParent';
this.divElement.appendChild(div);
this.colorDiv=document.createElement('DIV');
this.colorDiv.className='DHTMLSuite_colorSliderRgbBg';
div.appendChild(this.colorDiv);
DHTMLSuite.commonObj.addEvent(this.colorDiv,'click',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__clickOnRgbBg(e);});
}
,
__setPreviewDivBgColor:function()
{
try{
this.divPreview.style.backgroundColor='#'+this.currentRgb;
this.__handleCallback('rgbChange');
}catch(e){
alert(this.currentRgb);
}
}
,
__setParamsFromCurrentRgb:function()
{
this.currentRedHex=this.currentRgb.substr(0,2);
this.currentGreenHex=this.currentRgb.substr(2,2);
this.currentBlueHex=this.currentRgb.substr(4,2);
this.currentRed=this.colorHelper.baseConverter(this.currentRedHex,16,10);
this.currentGreen=this.colorHelper.baseConverter(this.currentGreenHex,16,10);
this.currentBlue=this.colorHelper.baseConverter(this.currentBlueHex,16,10);
}
,
__clickOnRgbBg:function(e)
{
var left=DHTMLSuite.commonObj.getLeftPos(this.colorDiv);
var top=DHTMLSuite.commonObj.getTopPos(this.colorDiv);
if(document.all)e=event;
var width=350;
var height=20;
var y=e.clientY-top;
var x=e.clientX-left-1;
if(e.layerX){
x=e.layerX;
y=e.layerY;
}
if(y>height)y=height;
if(x<=350){
this.currentRgb=this.__getHorizColor(y*width+x-1,width,height);
this.__setParamsFromCurrentRgb();
}else{
this.currentRgb='000000';
this.currentRedHex='00';
this.currentGreenHex='00';
this.currentBlueHex='00';
this.currentRed=0;
this.currentGreen=0;
this.currentBlue=0;
}
this.__updateSliderHandles();
this.__updateFormFields();
this.__setPreviewDivBgColor();
}
,
__updateSliderHandles:function()
{
this.sliderObjRed.setSliderValue(this.currentRed);
this.sliderObjGreen.setSliderValue(this.currentGreen);
this.sliderObjBlue.setSliderValue(this.currentBlue);
}
,
__updateFormFields:function()
{
this.frmFieldRed.value=this.currentRed;
this.frmFieldGreen.value=this.currentGreen;
this.frmFieldBlue.value=this.currentBlue;
}
,
__receiveRedFromSlider:function(value)
{
this.frmFieldRed.value=value;
this.currentRed=value;
this.currentRedHex=this.colorHelper.baseConverter(value,10,16)+'';
if(this.currentRedHex.length==1)this.currentRedHex='0'+this.currentRedHex;
this.currentRgb=this.currentRedHex+this.currentGreenHex+this.currentBlueHex;
this.__setPreviewDivBgColor();
}
,
__receiveGreenFromSlider:function(value)
{
this.frmFieldGreen.value=value;
this.currentGreen=value;
this.currentGreenHex=this.colorHelper.baseConverter(value,10,16)+'';
if(this.currentGreenHex.length==1)this.currentGreenHex='0'+this.currentGreenHex;
this.currentRgb=this.currentRedHex+this.currentGreenHex+this.currentBlueHex;
this.__setPreviewDivBgColor();
}
,
__receiveBlueFromSlider:function(value)
{
this.frmFieldBlue.value=value;
this.currentBlue=value;
this.currentBlueHex=this.colorHelper.baseConverter(value,10,16)+'';
if(this.currentBlueHex.length==1)this.currentBlueHex='0'+this.currentBlueHex;
this.currentRgb=this.currentRedHex+this.currentGreenHex+this.currentBlueHex;
this.__setPreviewDivBgColor();
}
,
__getHorizColor:function(i,width,height){
var sWidth=(width)/7;
var C=i%width;
var R=Math.floor(i/(sWidth*7));
var c=i%sWidth;
var r,g,b,h;
var l=(255/sWidth)*c;
if(C>=sWidth*6){
r=g=b=255-l;
}else{
h=255-l;
r=C<sWidth?255:C<sWidth*2?h:C<sWidth*4?0:C<sWidth*5?l:255;
g=C<sWidth?l:C<sWidth*3?255:C<sWidth*4?h:0;
b=C<sWidth*2?0:C<sWidth*3?l:C<sWidth*5?255:h;
if(R<(height/2)){
var base=255-(255*2/height)*R;
r=base+(r*R*2/height);
g=base+(g*R*2/height);
b=base+(b*R*2/height);
}else if(R>(height/2)){
var base=(height-R)/(height/2);
r=r*base;
g=g*base;
b=b*base;
}
}
var red=this.colorHelper.baseConverter(r,10,16)+'';
if(red.length=='1')red='0'+red;
var green=this.colorHelper.baseConverter(g,10,16)+'';
if(green.length=='1')green='0'+green;
var blue=this.colorHelper.baseConverter(b,10,16)+'';
if(blue.length=='1')blue='0'+blue;
return red+green+blue;
}
,
__handleCallback:function(action)
{
var callbackString='';
switch(action){
case"rgbChange":
if(this.callbackOnChangeRgb)callbackString=this.callbackOnChangeRgb;
break;
}
if(callbackString){
var rgb=this.currentRgb.toUpperCase();
callbackString=callbackString+'({ rgb:"#'+rgb+'",name:"#'+rgb+'"})';
return eval(callbackString);
}
}
}
DHTMLSuite.colorWidget=function(propertyArray)
{
var divElement;
var divElPalette;
var divElPaletteCircle;
var divElHueBar;
var sliderDiv;
var updateFormDuringMoveOnPalette;
var layoutCSS;
var objectIndex;
var currentHue;
var currentBrightness;
var currentSaturation;
var currentRgbCode;
var colorHelper;
var dragObject;
var topPosHueBar;
var paletteSize;
var formFieldHue;
var formFieldSaturation;
var formFieldBrightness;
var formFieldBlue;
var formFieldGreen;
var formFieldRed;
var displayHsv;
var displayRgb;
var displayRgbCode;
this.displayRgb=true;
this.displayHsv=true;
this.displayRgbCode=true;
this.updateFormDuringMoveOnPalette=true;
var hueSliderPosition;
var circleOffsetSize;
var posdivElPalette;
var parentRef;
this.posdivElPalette=new Object();
var circleOffsetBecauseOfWinWidget;
var callbackOnChangeRgb;
this.circleOffsetBecauseOfWinWidget=0;
this.circleOffsetSize=7;
this.hueSliderPosition='vertical';
this.layoutCSS='color-widget.css';
this.currentHue=0;
this.currentBrightness=100;
this.currentSaturation=100;
this.paletteSize=256;
this.currentRgbCode='FF0000';
try{
this.colorHelper=new DHTMLSuite.colorUtil();
}catch(e){
alert('You need to include dhtmlSuite-colorUtil.js');
}
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
this.__setInitProps(propertyArray);
}
DHTMLSuite.colorWidget.prototype=
{
__setInitProps:function(propertyArray)
{
if(!propertyArray)return;
if(propertyArray.hueSliderPosition)this.hueSliderPosition=propertyArray.hueSliderPosition;
if(propertyArray.callbackOnChangeRgb)this.callbackOnChangeRgb=propertyArray.callbackOnChangeRgb;
if(propertyArray.displayHsv||propertyArray.displayHsv===false)this.displayHsv=propertyArray.displayHsv;
if(propertyArray.displayRgb||propertyArray.displayRgb===false)this.displayRgb=propertyArray.displayRgb;
if(propertyArray.displayRgbCode||propertyArray.displayRgbCode===false)this.displayRgbCode=propertyArray.displayRgbCode;
if(propertyArray.updateFormDuringMoveOnPalette||propertyArray.updateFormDuringMoveOnPalette===false)this.updateFormDuringMoveOnPalette=propertyArray.updateFormDuringMoveOnPalette;
if(propertyArray.parentRef)this.parentRef=DHTMLSuite.commonObj.getEl(propertyArray.parentRef);
}
,
setHueSliderPosition:function(hueSliderPosition)
{
this.hueSliderPosition=hueSliderPosition;
if(hueSliderPosition=='vertical'){
this.sliderDivHorMain.style.display='none';
this.sliderDivMain.style.display='block';
var ind=this.objectIndex;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].sliderDiv.style.marginTop=(2 -Math.floor(DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].sliderDiv.offsetHeight/2))+"px"',100);
}
if(hueSliderPosition=='horizontal'){
if(this.sliderDivMain){
this.sliderDivHorMain.style.display='block';
this.sliderDivMain.style.display='none';
}
}
}
,
setCallbackOnChangeRgb:function(functionName)
{
this.callbackOnChangeRgb=functionName;
}
,
setRgbColor:function(rgbColor)
{
var hsv=this.colorHelper.getHsvByRgbCode(rgbColor);
this.currentHue=Math.round(hsv.hue);
this.currentBrightness=Math.round(hsv.brightness*100);
this.currentSaturation=Math.round(hsv.saturation*100);
this.__changeViewAfterColorChange();
}
,
setHue:function(hue)
{
hue=hue+'';
if(hue.match(/^[0-9]+$/)){
while(hue>=360)hue-=360;
this.currentHue=hue;
this.__changeViewAfterColorChange();
}
}
,
setSaturation:function(saturation)
{
saturation=saturation+'';
if(saturation.match(/^[0-9]+$/)){
while(saturation>100)saturation-=100;
this.currentSaturation=saturation;
this.__changeViewAfterColorChange();
}
}
,
setBrightness:function(brightness)
{
brightness=brightness+'';
if(brightness.match(/^[0-9]+$/)){
while(brightness>100)brightness-=100;
this.currentBrightness=brightness;
this.__changeViewAfterColorChange();
}
}
,
getDivElement:function()
{
return this.divElement;
}
,
init:function()
{
DHTMLSuite.commonObj.loadCSS(this.layoutCSS);
this.__createMainDivEl();
this.__createdivElPalette();
this.__createHueBar();
this.__createFormDiv();
this.__createHueBarHorizontal();
this.__addEvents();
this.__setPaletteBgColor();
this.__updateHsvInForm();
this.__setBgColorPreviewDiv();
this.__updateRgbInForm();
}
,
__changeViewAfterColorChange:function()
{
this.__setCurrentRgbCode();
this.__setPaletteBgColor();
this.__setBgColorPreviewDiv();
this.__setSliderPos();
this.__updateRgbInForm();
this.__updateHsvInForm();
this.__setSmallCirclePosition();
}
,
__updateHsvInForm:function()
{
if(!this.displayHsv)return;
this.fieldHue.value=this.currentHue;
this.fieldSaturation.value=this.currentSaturation;
this.fieldBrightness.value=this.currentBrightness;
return;
if(this.currentBrightness>80){
this.divElPaletteCircle.className='DHTMLSuite_colorSlider_palette_circle DHTMLSuite_colorSlider_palette_circleBlack';
}else{
this.divElPaletteCircle.className='DHTMLSuite_colorSlider_palette_circle';
}
}
,
__updateRgbInForm:function()
{
var rgbColors=this.colorHelper.getRgbColorsByRgbCode(this.currentRgbCode);
if(this.displayRgb){
this.fieldBlue.value=rgbColors.blue;
this.fieldRed.value=rgbColors.red;
this.fieldGreen.value=rgbColors.green;
}
if(this.displayRgbCode){
this.fieldRgbCode.value=this.currentRgbCode;
}
if(this.callbackOnChangeRgb)this.__handleCallback('rgbChange');
}
,
__setSliderPos:function()
{
var topPos=Math.round(this.paletteSize-((this.currentHue/360)*this.paletteSize))-3;
this.sliderDiv.style.top=topPos;
this.sliderDivHor.style.left=(this.currentHue-4)+'px';
}
,
__setBgColorPreviewDiv:function()
{
this.divElPreviewDiv.style.backgroundColor='#'+this.currentRgbCode;
}
,
__setPaletteBgColor:function()
{
try{
this.divElPalette.style.backgroundColor='#'+this.colorHelper.getRgbCodeByHsv(this.currentHue,1,1);
}catch(e)
{
}
}
,
__createFormDiv:function()
{
var ind=this.objectIndex;
this.divElForm=document.createElement('DIV');
this.divElForm.className='DHTMLSuite_colorSliderFormDiv';
this.divElement.appendChild(this.divElForm);
this.divElPreviewDiv=document.createElement('DIV');
this.divElPreviewDiv.className='DHTMLSuite_colorSlider_colorPreview';
this.divElForm.appendChild(this.divElPreviewDiv);
var table=document.createElement('TABLE');
table.cellpadding=0;
table.cellspacing=0;
table.className='DHTMLSuite_colorSliderFormTable';
var form=document.createElement('FORM');
table.appendChild(form);
this.divElForm.appendChild(table);
if(this.displayHsv){
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='H:';
var cell=row.insertCell(-1);
this.fieldHue=document.createElement('INPUT');
this.fieldHue.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveHueFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldHue);
this.fieldHue.maxLength=3;
cell.appendChild(this.fieldHue);
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='S:';
var cell=row.insertCell(-1);
this.fieldSaturation=document.createElement('INPUT');
this.fieldSaturation.maxLength=3;
this.fieldSaturation.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveSatFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldSaturation);
cell.appendChild(this.fieldSaturation);
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='B:';
var cell=row.insertCell(-1);
this.fieldBrightness=document.createElement('INPUT');
this.fieldBrightness.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveBriFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldBrightness);
this.fieldBrightness.maxLength=3;
cell.appendChild(this.fieldBrightness);
}
if(this.displayRgb){
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='R:';
var cell=row.insertCell(-1);
this.fieldRed=document.createElement('INPUT');
this.fieldRed.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__setRedColorFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldRed);
this.fieldRed.maxLength=3;
cell.appendChild(this.fieldRed);
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='G:';
var cell=row.insertCell(-1);
this.fieldGreen=document.createElement('INPUT');
this.fieldGreen.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__setGreenColorFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldGreen);
this.fieldGreen.maxLength=3;
cell.appendChild(this.fieldGreen);
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='B:';
var cell=row.insertCell(-1);
this.fieldBlue=document.createElement('INPUT');
this.fieldBlue.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__setBlueColorFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldBlue);
this.fieldBlue.maxLength=3;
cell.appendChild(this.fieldBlue);
}
if(this.displayRgbCode){
var row=table.insertRow(-1);
var cell=row.insertCell(-1);
cell.innerHTML='#';
var cell=row.insertCell(-1);
this.fieldRgbCode=document.createElement('INPUT');
this.fieldRgbCode.maxLength=6;
this.fieldRgbCode.className='DHTMLSuite_colorSlider_rgbCode';
this.fieldRgbCode.onchange=function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__receiveRgbCodeFromForm(e);}
DHTMLSuite.commonObj.__addEventEl(this.fieldRgbCode);
cell.appendChild(this.fieldRgbCode);
}
}
,
__createMainDivEl:function()
{
this.divElement=document.createElement('DIV');
this.divElement.className='DHTMLSuite_colorSlider';
if(this.parentRef)this.parentRef.appendChild(this.divElement);
}
,
__correctPng:function(id)
{
try{
var img=document.getElementById(id);
var html='<span style="display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\''+img.src+'\',sizingMethod=\'scale\');width:'+this.paletteSize+';height:'+this.paletteSize+'"></span>';
img.outerHTML=html;
}catch(e){
var ind=this.objectIndex;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].__correctPng("'+id+'")',20);
}
}
,
__createdivElPalette:function()
{
var ind=this.objectIndex;
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorSlider_palette_border';
div.style.position='relative';
this.divElement.appendChild(div);
this.divElPaletteBorder=div;
this.divElPalette=document.createElement('DIV');
this.divElPalette.className='DHTMLSuite_colorSlider_palette';
this.divElPalette.style.position='relative';
DHTMLSuite.commonObj.__addEventEl(this.divElPalette);
var img=document.createElement('IMG');
img.src=DHTMLSuite.configObj.imagePath+'colorPalettes/bgGradient.png';
img.setAttribute('width',this.paletteSize);
img.setAttribute('height',this.paletteSize);
img.ondragstart=function(){return false;};
img.onselectstart=function(){return false;};
img.onmousedown=function(){return false;};
img.id=''+DHTMLSuite.commonObj.getUniqueId();
this.divElPalette.appendChild(img);
DHTMLSuite.commonObj.__addEventEl(img);
if((DHTMLSuite.clientInfoObj.isMSIE&&DHTMLSuite.clientInfoObj.navigatorVersion<7)||DHTMLSuite.clientInfoObj.isOpera){
this.__correctPng(img.id);
}
div.appendChild(this.divElPalette);
this.divElPaletteCircle=document.createElement('DIV');
this.divElPaletteCircle.className='DHTMLSuite_colorSlider_palette_circle';
this.divElPalette.appendChild(this.divElPaletteCircle);
this.divElPaletteCircle.display='block';
this.divElPaletteCircle.style.top='-'+this.circleOffsetSize+'px';
this.divElPaletteCircle.style.left=(this.paletteSize-this.circleOffsetSize)+'px';
}
,
__setSmallCirclePosition:function()
{
var leftPos=Math.round(this.currentSaturation*(this.paletteSize/100))-this.circleOffsetSize;
var topPos=this.paletteSize-Math.round(this.currentBrightness*(this.paletteSize/100))-this.circleOffsetSize;
this.divElPaletteCircle.style.left=leftPos+'px';
this.divElPaletteCircle.style.top=topPos+'px';
this.divElPaletteCircle.className=this.divElPaletteCircle.className.replace(' DHTMLSuite_colorSlider_palette_circleBlack','');
if(this.currentBrightness>80){
this.divElPaletteCircle.className=this.divElPaletteCircle.className+' DHTMLSuite_colorSlider_palette_circleBlack';
}
}
,
__createHueBar:function()
{
var ind=this.objectIndex;
var mainDiv=document.createElement('DIV');
mainDiv.className='DHTMLSuite_colorSlider_hue';
this.sliderDivMain=mainDiv;
this.divElement.appendChild(mainDiv);
this.sliderDiv=document.createElement('DIV');
this.sliderDiv.className='DHTMLSuite_colorSlider_sliderHandle';
mainDiv.appendChild(this.sliderDiv);
this.sliderDiv.innerHTML='<div><span></span></div>';
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].sliderDiv.style.marginTop=(2 -Math.floor(DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].sliderDiv.offsetHeight/2))+"px"',100);
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorSlider_hueBar_border';
mainDiv.appendChild(div);
this.divElHueBar=document.createElement('DIV');
this.divElHueBar.className='DHTMLSuite_colorSlider_hueBar';
div.appendChild(this.divElHueBar);
if(this.hueSliderPosition=='horizontal')mainDiv.style.display='none';
}
,
__createHueBarHorizontal:function()
{
var ind=this.objectIndex;
this.sliderDivHorMain=document.createElement('DIV');
this.sliderDivHorMain.className='DHTMLSuite_colorSlider_hueHorizontal';
this.divElement.appendChild(this.sliderDivHorMain);
this.sliderDivHor=document.createElement('DIV');
this.sliderDivHor.className='DHTMLSuite_colorSlider_sliderHandleHorizontal';
this.sliderDivHorMain.appendChild(this.sliderDivHor);
this.sliderDivHor.innerHTML='<div><span></span></div>';
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].sliderDiv.style.marginTop=(2 -Math.floor(DHTMLSuite.variableStorage.arrayDSObjects['+ind+'].sliderDiv.offsetHeight/2))+"px"',100);
var div=document.createElement('DIV');
div.className='DHTMLSuite_colorSlider_hueBarHorizontal_border';
this.sliderDivHorMain.appendChild(div);
this.divElHueBarHorizontal=document.createElement('DIV');
this.divElHueBarHorizontal.className='DHTMLSuite_colorSlider_hueBarHorizontal';
div.appendChild(this.divElHueBarHorizontal);
if(this.hueSliderPosition=='vertical')this.sliderDivHorMain.style.display='none';
}
,
__setHueFromHorizontalSlider:function(e)
{
if(document.all)e=event;
var hue=this.sliderDivHor.offsetLeft+4;
if(hue>359||hue<0)hue=0;
this.currentHue=hue;
this.__setPaletteBgColor();
this.__setBgColorPreviewDiv();
this.__updateRgbInForm();
this.__updateHsvInForm();
}
,
__setHueFromSlider:function(e)
{
if(document.all)e=event;
var hue=360-Math.round((this.sliderDiv.offsetTop+4)*(360/this.paletteSize))
if(hue>359||hue<0)hue=0;
this.currentHue=hue;
this.__setPaletteBgColor();
this.__setBgColorPreviewDiv();
this.__updateHsvInForm();
this.__updateRgbInForm();
}
,
__addEvents:function()
{
var ind=this.objectIndex;
DHTMLSuite.commonObj.addEvent(this.sliderDivHorMain,'mousedown',function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__initHorHueMove(e);});
DHTMLSuite.commonObj.addEvent(this.sliderDivMain,'mousedown',function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__initHueMove(e);});
DHTMLSuite.commonObj.addEvent(this.divElPalette,'mousedown',function(e){return DHTMLSuite.variableStorage.arrayDSObjects[ind].__initPaletteMove(e);});
DHTMLSuite.commonObj.addEvent(document.documentElement,'mousemove',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__moveOnPalette(e);});
DHTMLSuite.commonObj.addEvent(document.documentElement,'mousemove',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__moveOnHorizHueBar(e);});
DHTMLSuite.commonObj.addEvent(document.documentElement,'mousemove',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__moveOnHueBar(e);});
DHTMLSuite.commonObj.addEvent(document.documentElement,'mouseup',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__endDrag(e);});
DHTMLSuite.commonObj.addEvent(this.divElHueBar,'mousedown',function(e){DHTMLSuite.variableStorage.arrayDSObjects[ind].__moveOnHueBar(e);});
if(!document.documentElement.onselectstart){
document.documentElement.onselectstart=function(){return DHTMLSuite.commonObj.__isTextSelOk();};
DHTMLSuite.commonObj.__addEventEl(document.documentElement);
}
}
,
__moveOnHueBar:function(e)
{
if(this.hueStatus!=1)return;
if(document.all)e=event;
var topPos=this.poxYHue;
var diff=e.clientY+document.documentElement.scrollTop-topPos;
if(diff>this.paletteSize)diff=this.paletteSize;
if(diff<0)diff=0;
this.sliderDiv.style.top=diff+'px';
var hue=Math.round(((this.paletteSize-diff)*(360/this.paletteSize)));
if(hue==360)hue=0;
this.currentHue=hue;
this.__setCurrentRgbCode();
this.__setPaletteBgColor();
this.__setBgColorPreviewDiv();
this.__updateHsvInForm();
this.__updateRgbInForm();
}
,
__moveOnHorizHueBar:function(e)
{
if(this.hueHorStatus!=1)return;
if(document.all)e=event;
var leftPos=this.posXHorHue;
var diff=e.clientX-leftPos-this.circleOffsetBecauseOfWinWidget;
if(diff<0)diff=0;
if(diff>362)diff=362;
this.sliderDivHor.style.left=(diff-4)+'px';
var hue=diff;
if(hue>=360)hue=0;
this.currentHue=hue;
this.__setCurrentRgbCode();
this.__setPaletteBgColor();
this.__setBgColorPreviewDiv();
this.__updateHsvInForm();
this.__updateRgbInForm();
}
,
__setHueFromRgbColorsInForm:function()
{
var color=this.colorHelper.getRgbCodeByRgbColors(this.fieldRed.value,this.fieldGreen.value,this.fieldBlue.value);
var hsv=this.colorHelper.getHsvByRgbCode(color);
this.currentHue=Math.round(hsv.hue);
this.currentSaturation=Math.round(hsv.saturation*100);
this.currentBrightness=Math.round(hsv.brightness*100);
this.__changeViewAfterColorChange();
}
,
__setRedColorFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var red=src.value;
if(red.match(/^[0-9]+$/)){
if(red/1>255)red=255;
}else{
red=0;
}
src.value=red;
this.__setHueFromRgbColorsInForm();
this.__changeViewAfterColorChange();
}
,
__setGreenColorFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var green=src.value;
var green=src.value;
if(green.match(/^[0-9]+$/)){
if(green/1>255)green=255;
}else{
green=0;
}
src.value=green;
this.__setHueFromRgbColorsInForm();
this.__changeViewAfterColorChange();
}
,
__setBlueColorFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var blue=src.value;
var blue=src.value;
if(blue.match(/^[0-9]+$/)){
if(blue/1>255)blue=255;
}else{
blue=0;
}
src.value=blue;
this.__setHueFromRgbColorsInForm();
}
,
__receiveRgbCodeFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var rgbCode=src.value;
if(!rgbCode.match(/^[0-9A-F][0-9A-F][0-9A-F][0-9A-F][0-9A-F][0-9A-F]$/i)){
rgbCode='FF0000';
}
var hsv=this.colorHelper.getHsvByRgbCode(rgbCode);
this.currentHue=Math.round(hsv.hue);
this.currentSaturation=Math.round(hsv.saturation*100);
this.currentBrightness=Math.round(hsv.brightness*100);
this.__changeViewAfterColorChange();
}
,
__receiveHueFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var hue=src.value;
hue=hue+'';
if(hue.match(/^[0-9]+$/)){
if(hue/1>360)hue=360;
}else{
hue=0;
}
if(hue==360)hue=0;
this.currentHue=hue;
src.value=hue;
this.__changeViewAfterColorChange();
}
,
__receiveBriFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var brightness=src.value;
brightness=brightness+'';
if(brightness.match(/^[0-9]+$/)){
if(brightness/1>100)brightness=100;
}else{
brightness=0;
}
this.currentBrightness=brightness;
src.value=brightness;
this.__changeViewAfterColorChange();
}
,
__receiveSatFromForm:function(e)
{
if(document.all)e=event;
var src=DHTMLSuite.commonObj.getSrcElement(e);
var saturation=src.value;
saturation=saturation+'';
if(saturation.match(/^[0-9]+$/)){
if(saturation/1>100)saturation=100;
}else{
saturation=0;
}
this.currentSaturation=saturation;
src.value=saturation;
this.__changeViewAfterColorChange();
}
,
__ffHackWinWidget:function()
{
if(this.divElement.parentNode.className&&this.divElement.parentNode.className.indexOf('windowContent')>=0&&!document.all){
this.circleOffsetBecauseOfWinWidget=0;
}
}
,
__initHorHueMove:function(e)
{
this.hueHorStatus=1;
this.__ffHackWinWidget();
this.posXHorHue=DHTMLSuite.commonObj.getLeftPos(this.divElHueBarHorizontal);
DHTMLSuite.commonObj.__setTextSelOk(false);
this.__moveOnHorizHueBar(e);
return false;
}
,
__initHueMove:function(e)
{
this.hueStatus=1;
this.poxYHue=DHTMLSuite.commonObj.getTopPos(this.divElHueBar);
DHTMLSuite.commonObj.__setTextSelOk(false);
this.__moveOnHueBar(e);
return false;
}
,
__initPaletteMove:function(e)
{
if(document.all)e=event;
this.__ffHackWinWidget();
this.posdivElPalette.x=DHTMLSuite.commonObj.getLeftPos(this.divElPalette)+this.circleOffsetBecauseOfWinWidget;
this.posdivElPalette.y=DHTMLSuite.commonObj.getTopPos(this.divElPalette)+this.circleOffsetBecauseOfWinWidget;
this.dragStatus=1;
this.paletteMaxX=(this.divElPalette.clientWidth-this.circleOffsetSize);
this.paletteMaxY=(this.divElPalette.clientHeight-this.circleOffsetSize);
this.__moveOnPalette(e);
DHTMLSuite.commonObj.__setTextSelOk(false);
return false;
}
,
__setCurrentRgbCode:function()
{
this.currentRgbCode=this.colorHelper.getRgbCodeByHsv(this.currentHue,this.currentSaturation/100,this.currentBrightness/100);
}
,
__endDrag:function()
{
if(this.dragStatus==1){
this.__updateHsvInForm();
this.__updateRgbInForm();
}
this.dragStatus=0;
this.hueHorStatus=0;
this.hueStatus=0;
DHTMLSuite.commonObj.__setTextSelOk(true);
}
,
__moveOnPalette:function(e)
{
if(this.dragStatus!=1)return;
if(this.clickOnPaletteInProgress)return;
this.clickOnPaletteInProgress=true;
if(document.all)e=event;
var leftEl=this.posdivElPalette.x;
var topEl=this.posdivElPalette.y;
var left=e.clientX+document.documentElement.scrollLeft-leftEl-this.circleOffsetSize;
var top=e.clientY+document.documentElement.scrollTop-topEl-this.circleOffsetSize;
if(left<this.circleOffsetSize*-1)left=this.circleOffsetSize*-1;
if(top<this.circleOffsetSize*-1)top=this.circleOffsetSize*-1;
if(left>this.paletteMaxX)left=this.paletteMaxX;
if(top>this.paletteMaxY)top=this.paletteMaxY;
this.divElPaletteCircle.style.left=left+'px';
this.divElPaletteCircle.style.top=top+'px';
this.currentSaturation=Math.round(((left+this.circleOffsetSize)/this.paletteSize)*100);
this.currentBrightness=100-Math.round(((top+this.circleOffsetSize)/this.paletteSize)*100);
this.__setCurrentRgbCode();
this.__setBgColorPreviewDiv();
if(this.updateFormDuringMoveOnPalette){
this.__updateHsvInForm();
this.__updateRgbInForm();
}
this.clickOnPaletteInProgress=false;
}
,
__handleCallback:function(action)
{
var callbackString='';
switch(action){
case'rgbChange':
if(this.callbackOnChangeRgb)callbackString=this.callbackOnChangeRgb;
break;
}
if(callbackString){
callbackString=callbackString+'({ rgb:"#"+this.currentRgbCode,hue:this.currentHue,brightness:this.currentBrightness,saturation:this.currentSaturation })';
eval(callbackString);
}
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.colorUtil=function(){
}
DHTMLSuite.colorUtil.prototype={
baseConverter:function(numberToConvert,oldBase,newBase){
if(newBase==10){
return parseInt(numberToConvert,16);
}
if(newBase==16){
return parseInt(numberToConvert).toString(16);
}
numberToConvert=numberToConvert+"";
numberToConvert=numberToConvert.toUpperCase();
var listOfCharacters="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var dec=0;
for(var i=0;i<=numberToConvert.length;i++){
dec+=(listOfCharacters.indexOf(numberToConvert.charAt(i)))*(Math.pow(oldBase,(numberToConvert.length-i-1)));
}
numberToConvert="";
var magnitude=Math.floor((Math.log(dec))/(Math.log(newBase)));
for(var i=magnitude;i>=0;i--){
var amount=Math.floor(dec/Math.pow(newBase,i));
numberToConvert=numberToConvert+listOfCharacters.charAt(amount);
dec-=amount*(Math.pow(newBase,i));
}
if(numberToConvert.length==0)numberToConvertToConvert=0;
if(!numberToConvert)numberToConvert=0;
return numberToConvert;
}
,
getHsvByRgbCode:function(rgbColor){
rgbColor=rgbColor.replace('#','');
red=this.baseConverter(rgbColor.substr(0,2),16,10);
green=this.baseConverter(rgbColor.substr(2,2),16,10);
blue=this.baseConverter(rgbColor.substr(4,2),16,10);
if(red==0&&green==0&&blue==0){
var returnArray=new Object();
returnArray.hue=0;
returnArray.saturation=0;
returnArray.brightness=0;
return returnArray;
}
red=red/255;
green=green/255;
blue=blue/255;
maxValue=Math.max(red,green,blue);
minValue=Math.min(red,green,blue);
var hue=0;
if(maxValue==minValue){
hue=0;
saturation=0;
}else{
if(red==maxValue){
hue=(green-blue)/(maxValue-minValue)/1;
}else if(green==maxValue){
hue=2+(blue-red)/1/(maxValue-minValue)/1;
}else if(blue==maxValue){
hue=4+(red-green)/(maxValue-minValue)/1;
}
saturation=(maxValue-minValue)/maxValue;
}
hue=hue*60;
valueBrightness=maxValue;
if(hue<0)hue+=360;
var returnArray=new Object();
returnArray.hue=hue;
returnArray.saturation=saturation;
returnArray.brightness=valueBrightness;
return returnArray;
}
,
getContrastColorByRgb:function(rgbCode)
{
var hsv=this.getHsvByRgbCode(rgbCode);
hsv.hue+=180;
if(hsv.hue>=360)hsv.hue-=360;
return this.getRgbCodeByHsv(hsv.hue,hsv.saturation,hsv.brightness);
}
,
getTriadeColorsByRgb:function(rgbCode)
{
var hsv=this.getHsvByRgbCode(rgbCode);
var colors=new Array();
for(var no=120;no<360;no+=120){
colors[colors.length]=this.getRgbCodeByHsv(hsv.hue+no,hsv.saturation,hsv.brightness)
}
return colors;
}
,
getTetradeColorsByRgb:function(rgbCode)
{
var hsv=this.getHsvByRgbCode(rgbCode);
var colors=new Array();
for(var no=90;no<360;no+=90){
colors[colors.length]=this.getRgbCodeByHsv(hsv.hue+no,hsv.saturation,hsv.brightness)
}
return colors;
}
,
getAnalogicColors:function(rgbCode,degrees)
{
degrees=degrees+'';
if(!degrees)degrees=25;
if(!degrees.match(/^[0-9]{2}$/)){
degrees=25;
}
if(degrees<15)degrees=15;
if(degrees>30)degrees=30;
degrees/=1;
var hsv=this.getHsvByRgbCode(rgbCode);
var colors=new Array();
for(var no=1;no<=2;no++){
colors[colors.length]=this.getRgbCodeByHsv(hsv.hue+(no*degrees),hsv.saturation,hsv.brightness)
}
for(var no=-1;no>=-2;no--){
colors[colors.length]=this.getRgbCodeByHsv(hsv.hue+(no*degrees),hsv.saturation,hsv.brightness)
}
return colors;
}
,
getRgbCodeByRgbColors:function(red,green,blue)
{
red=this.baseConverter(red,10,16);
green=this.baseConverter(green,10,16);
blue=this.baseConverter(blue,10,16);
red=red+"";
green=green+"";
blue=blue+"";
while(red.length<2){
red="0"+red;
}
while(green.length<2){
green="0"+green;
}
while(blue.length<2){
blue="0"+""+blue;
}
rgbColor=red+""+green+""+blue;
return rgbColor.toUpperCase();
}
,
getRgbColorsByRgbCode:function(rgbCode)
{
var retArray=new Object();
retArray.red=this.baseConverter(rgbCode.substr(0,2),16,10);
retArray.green=this.baseConverter(rgbCode.substr(2,2),16,10);
retArray.blue=this.baseConverter(rgbCode.substr(4,2),16,10);
return retArray;
}
,
getRgbColorsByHsv:function(hue,saturation,valueBrightness)
{
Hi=Math.floor(hue/60);
if(hue==360)hue=0;
f=hue/60-Hi;
if(saturation>1)saturation/=100;
if(valueBrightness>1)valueBrightness/=100;
p=(valueBrightness*(1-saturation));
q=(valueBrightness*(1-(f*saturation)));
t=(valueBrightness*(1-((1-f)*saturation)));
switch(Hi){
case 0:
red=valueBrightness;
green=t;
blue=p;
break;
case 1:
red=q;
green=valueBrightness;
blue=p;
break;
case 2:
red=p;
green=valueBrightness;
blue=t;
break;
case 3:
red=p;
green=q;;
blue=valueBrightness;
break;
case 4:
red=t;
green=p;
blue=valueBrightness;
break;
default:
red=valueBrightness;
green=p;
blue=q;
break;
}
if(saturation==0){
red=valueBrightness;
green=valueBrightness;
blue=valueBrightness;
}
red*=255;
green*=255;
blue*=255;
red=Math.round(red);
green=Math.round(green);
blue=Math.round(blue);
var retArray=new Object();
retArray.red=red;
retArray.green=green;
retArray.blue=blue;
return retArray;
}
,
getRgbCodeByHsv:function(hue,saturation,valueBrightness){
while(hue>=360)hue-=360;
var colors=this.getRgbColorsByHsv(hue,saturation,valueBrightness);
var red=colors.red;
var green=colors.green
var blue=colors.blue;
return this.getRgbCodeByRgbColors(red,green,blue);
}
,
getColorByDegrees:function(rgbColor,degrees){
rgbColor=rgbColor.replace('#','');
myArray=this.getHsvByRgbCode(rgbColor);
myArray.hue+=degrees;
if(myArray.hue>=360)myArray.hue-=360;
if(myArray.hue<0)myArray.hue+=360;
return this.getRgbCodeByHsv(myArray.hue,myArray.saturation,myArray.brightness);
}
,
findColorByBrightness:function(rgbColor,brightness){
rgbColor=rgbColor.replace('#','');
myArray=this.getHsvByRgbCode(rgbColor);
myArray.brightness+=brightness/100;
if(myArray.brightness>1)myArray.brightness=1;
if(myArray.brightness<0)myArray.brightness=0;
if(myArray.saturation>1)myArray.saturation=1;
if(myArray.saturation<0)myArray.saturation=0;
return this.getRgbCodeByHsv(myArray.hue,myArray.saturation,myArray.brightness);
}
,
getRgbFromNumbers:function(red,green,blue)
{
red=this.baseConverter(red,10,16);
if(red.length==0)red='0'+red;
green=this.baseConverter(green,10,16);
if(green.length==0)green='0'+green;
blue=this.baseConverter(blue,10,16);
if(blue.length==0)blue='0'+blue;
return'#'+red+green+blue;
}
,
getAllWebColors:function()
{
var retArray=new Array();
for(var red=0;red<=15;red+=3){
for(var green=0;green<=15;green+=3){
for(var blue=0;blue<=15;blue+=3){
var newRed=this.baseConverter(red,10,16);
var newGreen=this.baseConverter(green,10,16);
var newBlue=this.baseConverter(blue,10,16);
retArray[retArray.length]=newRed+''+newRed+''+newGreen+''+newGreen+''+newBlue+''+newBlue;
}
}
}
return retArray;
}
,
getAllNamedColors:function()
{
var c=new Array();
c[c.length]=['AliceBlue','F0F8FF'];
c[c.length]=['AntiqueWhite','FAEBD7'];
c[c.length]=['Aqua','00FFFF'];
c[c.length]=['Aquamarine','7FFFD4'];
c[c.length]=['Azure','F0FFFF'];
c[c.length]=['Beige','F5F5DC'];
c[c.length]=['Bisque','FFE4C4'];
c[c.length]=['Black','000000'];
c[c.length]=['BlanchedAlmond','FFEBCD'];
c[c.length]=['Blue','0000FF'];
c[c.length]=['BlueViolet','8A2BE2'];
c[c.length]=['Brown','A52A2A'];
c[c.length]=['BurlyWood','DEB887'];
c[c.length]=['CadetBlue','5F9EA0'];
c[c.length]=['Chartreuse','7FFF00'];
c[c.length]=['Chocolate','D2691E'];
c[c.length]=['Coral','FF7F50'];
c[c.length]=['CornflowerBlue','6495ED'];
c[c.length]=['Cornsilk','FFF8DC'];
c[c.length]=['Crimson','DC143C'];
c[c.length]=['Cyan','00FFFF'];
c[c.length]=['DarkBlue','00008B'];
c[c.length]=['DarkCyan','008B8B'];
c[c.length]=['DarkGoldenRod','B8860B'];
c[c.length]=['DarkGray','A9A9A9'];
c[c.length]=['DarkGrey','A9A9A9'];
c[c.length]=['DarkGreen','006400'];
c[c.length]=['DarkKhaki','BDB76B'];
c[c.length]=['DarkMagenta','8B008B'];
c[c.length]=['DarkOliveGreen','556B2F'];
c[c.length]=['Darkorange','FF8C00'];
c[c.length]=['DarkOrchid','9932CC'];
c[c.length]=['DarkRed','8B0000'];
c[c.length]=['DarkSalmon','E9967A'];
c[c.length]=['DarkSeaGreen','8FBC8F'];
c[c.length]=['DarkSlateBlue','483D8B'];
c[c.length]=['DarkSlateGray','2F4F4F'];
c[c.length]=['DarkSlateGrey','2F4F4F'];
c[c.length]=['DarkTurquoise','00CED1'];
c[c.length]=['DarkViolet','9400D3'];
c[c.length]=['DeepPink','FF1493'];
c[c.length]=['DeepSkyBlue','00BFFF'];
c[c.length]=['DimGray','696969'];
c[c.length]=['DimGrey','696969'];
c[c.length]=['DodgerBlue','1E90FF'];
c[c.length]=['FireBrick','B22222'];
c[c.length]=['FloralWhite','FFFAF0'];
c[c.length]=['ForestGreen','228B22'];
c[c.length]=['Fuchsia','FF00FF'];
c[c.length]=['Gainsboro','DCDCDC'];
c[c.length]=['GhostWhite','F8F8FF'];
c[c.length]=['Gold','FFD700'];
c[c.length]=['GoldenRod','DAA520'];
c[c.length]=['Gray','808080'];
c[c.length]=['Grey','808080'];
c[c.length]=['Green','008000'];
c[c.length]=['GreenYellow','ADFF2F'];
c[c.length]=['HoneyDew','F0FFF0'];
c[c.length]=['HotPink','FF69B4'];
c[c.length]=['IndianRed ','CD5C5C'];
c[c.length]=['Indigo  ','4B0082'];
c[c.length]=['Ivory','FFFFF0'];
c[c.length]=['Khaki','F0E68C'];
c[c.length]=['Lavender','E6E6FA'];
c[c.length]=['LavenderBlush','FFF0F5'];
c[c.length]=['LawnGreen','7CFC00'];
c[c.length]=['LemonChiffon','FFFACD'];
c[c.length]=['LightBlue','ADD8E6'];
c[c.length]=['LightCoral','F08080'];
c[c.length]=['LightCyan','E0FFFF'];
c[c.length]=['LightGoldenRodYellow','FAFAD2'];
c[c.length]=['LightGray','D3D3D3'];
c[c.length]=['LightGrey','D3D3D3'];
c[c.length]=['LightGreen','90EE90'];
c[c.length]=['LightPink','FFB6C1'];
c[c.length]=['LightSalmon','FFA07A'];
c[c.length]=['LightSeaGreen','20B2AA'];
c[c.length]=['LightSkyBlue','87CEFA'];
c[c.length]=['LightSlateGray','778899'];
c[c.length]=['LightSlateGrey','778899'];
c[c.length]=['LightSteelBlue','B0C4DE'];
c[c.length]=['LightYellow','FFFFE0'];
c[c.length]=['Lime','00FF00'];
c[c.length]=['LimeGreen','32CD32'];
c[c.length]=['Linen','FAF0E6'];
c[c.length]=['Magenta','FF00FF'];
c[c.length]=['Maroon','800000'];
c[c.length]=['MediumAquaMarine','66CDAA'];
c[c.length]=['MediumBlue','0000CD'];
c[c.length]=['MediumOrchid','BA55D3'];
c[c.length]=['MediumPurple','9370D8'];
c[c.length]=['MediumSeaGreen','3CB371'];
c[c.length]=['MediumSlateBlue','7B68EE'];
c[c.length]=['MediumSpringGreen','00FA9A'];
c[c.length]=['MediumTurquoise','48D1CC'];
c[c.length]=['MediumVioletRed','C71585'];
c[c.length]=['MidnightBlue','191970'];
c[c.length]=['MintCream','F5FFFA'];
c[c.length]=['MistyRose','FFE4E1'];
c[c.length]=['Moccasin','FFE4B5'];
c[c.length]=['NavajoWhite','FFDEAD'];
c[c.length]=['Navy','000080'];
c[c.length]=['OldLace','FDF5E6'];
c[c.length]=['Olive','808000'];
c[c.length]=['OliveDrab','6B8E23'];
c[c.length]=['Orange','FFA500'];
c[c.length]=['OrangeRed','FF4500'];
c[c.length]=['Orchid','DA70D6'];
c[c.length]=['PaleGoldenRod','EEE8AA'];
c[c.length]=['PaleGreen','98FB98'];
c[c.length]=['PaleTurquoise','AFEEEE'];
c[c.length]=['PaleVioletRed','D87093'];
c[c.length]=['PapayaWhip','FFEFD5'];
c[c.length]=['PeachPuff','FFDAB9'];
c[c.length]=['Peru','CD853F'];
c[c.length]=['Pink','FFC0CB'];
c[c.length]=['Plum','DDA0DD'];
c[c.length]=['PowderBlue','B0E0E6'];
c[c.length]=['Purple','800080'];
c[c.length]=['Red','FF0000'];
c[c.length]=['RosyBrown','BC8F8F'];
c[c.length]=['RoyalBlue','4169E1'];
c[c.length]=['SaddleBrown','8B4513'];
c[c.length]=['Salmon','FA8072'];
c[c.length]=['SandyBrown','F4A460'];
c[c.length]=['SeaGreen','2E8B57'];
c[c.length]=['SeaShell','FFF5EE'];
c[c.length]=['Sienna','A0522D'];
c[c.length]=['Silver','C0C0C0'];
c[c.length]=['SkyBlue','87CEEB'];
c[c.length]=['SlateBlue','6A5ACD'];
c[c.length]=['SlateGray','708090'];
c[c.length]=['SlateGrey','708090'];
c[c.length]=['Snow','FFFAFA'];
c[c.length]=['SpringGreen','00FF7F'];
c[c.length]=['SteelBlue','4682B4'];
c[c.length]=['Tan','D2B48C'];
c[c.length]=['Teal','008080'];
c[c.length]=['Thistle','D8BFD8'];
c[c.length]=['Tomato','FF6347'];
c[c.length]=['Turquoise','40E0D0'];
c[c.length]=['Violet','EE82EE'];
c[c.length]=['Wheat','F5DEB3'];
c[c.length]=['White','FFFFFF'];
c[c.length]=['WhiteSmoke','F5F5F5'];
c[c.length]=['Yellow','FFFF00'];
c[c.length]=['YellowGreen','9ACD32'];
return c;
}
}
if(!window.DHTMLSuite)var DHTMLSuite=new Object();
DHTMLSuite.sliderObjects=new Array();
DHTMLSuite.indexOfCurrentlyActiveSlider=false;
DHTMLSuite.slider_generalMouseEventsAdded=false;
DHTMLSuite.slider=function(){
var width;
var height;
var targetObj;
var sliderWidth;
var sliderDirection;
var functionToCallOnChange;
var layoutCss;
var sliderMaxValue;
var sliderMinValue;
var initialValue;
var sliderSize;
var directionOfPointer;
var slideInProcessTimer;
var indexThisSlider;
var numberOfSteps;
var stepLinesVisibility;
var slide_event_pos;
var slide_start_pos;
var sliderHandleImg;
var sliderName;
var sliderValueReversed;
this.sliderWidth=9;
this.layoutCss='slider.css';
this.sliderDirection='hor';
this.width=0;
this.height=0;
this.sliderMaxValue=100;
this.sliderMinValue=0;
this.initialValue=0;
this.targetObj=false;
this.directionOfPointer='up';
this.slideInProcessTimer=-1;
this.sliderName='';
this.numberOfSteps=false;
this.stepLinesVisibility=true;
this.sliderValueReversed=false;
try{
if(!standardObjectsCreated)DHTMLSuite.createStandardObjects();
}catch(e){
alert('You need to include the dhtmlSuite-common.js file');
}
var objectIndex;
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;
DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this;
}
DHTMLSuite.slider.prototype={
init:function()
{
if(!this.targetObj){
alert('Error!-No target for slider specified');
return;
}
this.__setWidthAndHeightDynamically();
DHTMLSuite.commonObj.loadCSS(this.layoutCss);
this.__createSlider();
if(!document.documentElement.onselectstart)document.documentElement.onselectstart=function(){return DHTMLSuite.commonObj.__isTextSelOk();};
}
,
setSliderTarget:function(targetRef)
{
targetRef=DHTMLSuite.commonObj.getEl(targetRef);
this.targetObj=targetRef;
}
,
setSliderDirection:function(newDirection)
{
newDirection=newDirection+'';
newDirection=newDirection.toLowerCase();
if(newDirection!='hor'&&newDirection!='ver'){
alert('Invalid slider direction-possible values: "hor" or "ver"');
return;
}
this.sliderDirection=newDirection;
}
,
setSliderWidth:function(newWidth)
{
newWidth=newWidth+'';
if(newWidth.indexOf('%')==-1)newWidth=newWidth+'px';
this.width=newWidth;
}
,
setSliderHeight:function(newHeight)
{
newHeight=newHeight+'';
if(newHeight.indexOf('%')==-1)newHeight=newHeight+'px';
this.height=height;
}
,
setSliderReversed:function()
{
this.sliderValueReversed=true;
}
,
setOnChangeEvent:function(nameOfFunction)
{
this.functionToCallOnChange=nameOfFunction;
}
,
setSliderMaxValue:function(newMaxValue)
{
this.sliderMaxValue=newMaxValue;
}
,
setSliderMinValue:function(newMinValue)
{
this.sliderMinValue=newMinValue;
}
,
setSliderName:function(nameOfSlider)
{
this.sliderName=nameOfSlider;
}
,
setLayoutCss:function(nameOfNewCssFile)
{
this.layoutCss=nameOfNewCssFile;
}
,
setInitialValue:function(newInitialValue)
{
this.initialValue=newInitialValue;
}
,
setSliderPointerDirection:function(directionOfPointer)
{
this.directionOfPointer=directionOfPointer;
}
,
setSliderValue:function(newValue)
{
var position=Math.floor((newValue/this.sliderMaxValue)*this.sliderSize);
if(this.sliderDirection=='hor'){
this.sliderHandleImg.style.left=position+'px';
}else{
this.sliderHandleImg.style.top=position+'px';
}
}
,
setNumberOfSliderSteps:function(numberOfSteps)
{
this.numberOfSteps=numberOfSteps;
}
,
setStepLinesVisible:function(visible)
{
this.stepLinesVisibility=visible;
}
,
__setWidthAndHeightDynamically:function()
{
if(!this.width||this.width==0)this.width=this.targetObj.clientWidth+'';
if(!this.height||this.height==0)this.height=this.targetObj.clientHeight+'';
if(!this.width||this.width==0)this.width=this.targetObj.offsetWidth+'';
if(!this.height||this.height==0)this.height=this.targetObj.offsetHeight+'';
if(this.width==0)return;
if(this.height==0)return;
if(this.width.indexOf('px')==-1&&this.width.indexOf('%')==-1)this.width=this.width+'px';
if(this.height.indexOf('px')==-1&&this.height.indexOf('%')==-1)this.height=this.height+'px';
}
,
__createSlider:function(initWidth)
{
if(this.targetObj.clientWidth==0||initWidth==0){
var timeoutTime=100;
setTimeout('DHTMLSuite.variableStorage.arrayDSObjects['+this.objectIndex+'].__createSlider('+this.targetObj.clientWidth+')',timeoutTime);
return;
}
this.__setWidthAndHeightDynamically();
this.indexThisSlider=DHTMLSuite.sliderObjects.length;
DHTMLSuite.sliderObjects[this.indexThisSlider]=this;
window.refToThisObject=this;
var div=document.createElement('DIV');
div.style.width=this.width;
div.style.cursor='default';
div.style.height=this.height;
div.style.position='relative';
div.id='sliderNumber'+this.indexThisSlider;
div.onmousedown=this.__setPositionFromClick;
DHTMLSuite.commonObj.__addEventEl(div);
this.targetObj.appendChild(div);
var sliderObj=document.createElement('DIV');
if(this.sliderDirection=='hor'){
sliderObj.className='DHTMLSuite_slider_horizontal';
sliderObj.style.width=div.clientWidth+'px';
this.sliderSize=div.offsetWidth-this.sliderWidth;
var sliderHandle=document.createElement('IMG');
var srcHandle='slider_handle_down.gif';
sliderHandle.style.bottom='2px';
if(this.directionOfPointer=='up'){
srcHandle='slider_handle_up.gif';
sliderHandle.style.bottom='0px';
}
sliderHandle.src=DHTMLSuite.configObj.imagePath+'slider/'+srcHandle;
div.appendChild(sliderHandle);
var leftPos;
if(this.sliderValueReversed){
leftPos=Math.round(((this.sliderMaxValue-this.initialValue)/this.sliderMaxValue)*this.sliderSize)-1;
}else{
leftPos=Math.round((this.initialValue/this.sliderMaxValue)*this.sliderSize);
}
sliderHandle.style.left=leftPos+'px';
}else{
sliderObj.className='DHTMLSuite_slider_vertical';
sliderObj.style.height=div.clientHeight+'px';
this.sliderSize=div.clientHeight-this.sliderWidth;
var sliderHandle=document.createElement('IMG');
var srcHandle='slider_handle_right.gif';
sliderHandle.style.left='0px';
if(this.directionOfPointer=='left'){
srcHandle='slider_handle_left.gif';
sliderHandle.style.left='0px';
}
sliderHandle.src=DHTMLSuite.configObj.imagePath+'slider/'+srcHandle;
div.appendChild(sliderHandle);
var topPos;
if(!this.sliderValueReversed){
topPos=Math.floor(((this.sliderMaxValue-this.initialValue)/this.sliderMaxValue)*this.sliderSize);
}else{
topPos=Math.floor((this.initialValue/this.sliderMaxValue)*this.sliderSize);
}
sliderHandle.style.top=topPos+'px';
}
sliderHandle.id='sliderForObject'+this.indexThisSlider;
sliderHandle.style.position='absolute';
sliderHandle.style.zIndex=5;
sliderHandle.onmousedown=this.__initializeSliderDrag;
sliderHandle.ondragstart=function(){return false;};
sliderHandle.onselectstart=function(){return false;};
DHTMLSuite.commonObj.__addEventEl(sliderHandle);
this.sliderHandleImg=sliderHandle;
if(!DHTMLSuite.slider_generalMouseEventsAdded){
DHTMLSuite.commonObj.addEvent(document.documentElement,"mousemove",this.__moveSlider);
DHTMLSuite.commonObj.addEvent(document.documentElement,"mouseup",this.__stopSlideProcess);
DHTMLSuite.slider_generalMouseEventsAdded=true;
}
sliderObj.innerHTML='<span style="cursor:default"></span>';
div.appendChild(sliderObj);
if(this.numberOfSteps&&this.stepLinesVisibility){
var stepSize=this.sliderSize/this.numberOfSteps;
for(var no=0;no<=this.numberOfSteps;no++){
var lineDiv=document.createElement('DIV');
lineDiv.style.position='absolute';
lineDiv.innerHTML='<span></span>';
div.appendChild(lineDiv);
if(this.sliderDirection=='hor'){
lineDiv.className='DHTMLSuite_smallLines_vertical';
lineDiv.style.left=Math.floor((stepSize*no)+(this.sliderWidth/2))+'px';
}else{
lineDiv.className='DHTMLSuite_smallLines_horizontal';
lineDiv.style.top=Math.floor((stepSize*no)+(this.sliderWidth/2))+'px';
lineDiv.style.left='14px';
}
}
}
}
,
__initializeSliderDrag:function(e)
{
if(document.all)e=event;
DHTMLSuite.commonObj.__setTextSelOk(false);
var numIndex=this.id.replace(/[^0-9]/gi,'');
var sliderObj=DHTMLSuite.sliderObjects[numIndex];
DHTMLSuite.indexOfCurrentlyActiveSlider=numIndex;
sliderObj.slideInProcessTimer=0;
if(sliderObj.sliderDirection=='hor'){
sliderObj.slide_event_pos=e.clientX;
sliderObj.slide_start_pos=this.style.left.replace('px','')/1;
}else{
sliderObj.slide_event_pos=e.clientY;
sliderObj.slide_start_pos=this.style.top.replace('px','')/1;
}
sliderObj.__waitBeforeSliderDragStarts();
return false;
}
,
__setPositionFromClick:function(e)
{
if(document.all)e=event;
if(e.target)srcEvent=e.target;
else if(e.srcElement)srcEvent=e.srcElement;
if(srcEvent.nodeType==3)
srcEvent=srcEvent.parentNode;
if(srcEvent.tagName!='DIV')return;
var numIndex=this.id.replace(/[^0-9]/gi,'');
var sliderObj=DHTMLSuite.sliderObjects[numIndex];
if(sliderObj.numberOfSteps){
modValue=sliderObj.sliderSize/sliderObj.numberOfSteps;
}
if(sliderObj.sliderDirection=='hor'){
var handlePos=(e.clientX-DHTMLSuite.commonObj.getLeftPos(this)-Math.ceil(sliderObj.sliderWidth/2));
}else{
var handlePos=(e.clientY-DHTMLSuite.commonObj.getTopPos(this)-Math.ceil(sliderObj.sliderWidth/2));
}
if(sliderObj.numberOfSteps){
var mod=handlePos%modValue;
if(mod>(modValue/2))mod=modValue-mod;else mod*=-1;
handlePos=handlePos+mod;
}
if(handlePos<0)handlePos=0;
if(handlePos>sliderObj.sliderSize)handlePos=sliderObj.sliderSize;
if(sliderObj.sliderDirection=='hor'){
sliderObj.sliderHandleImg.style.left=handlePos+'px';
if(!sliderObj.sliderValueReversed){
returnValue=Math.round((handlePos/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}else{
returnValue=Math.round(((sliderObj.sliderSize-handlePos)/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}
}else{
sliderObj.sliderHandleImg.style.top=handlePos+'px';
if(sliderObj.sliderValueReversed){
returnValue=Math.round((handlePos/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}else{
returnValue=Math.round(((sliderObj.sliderSize-handlePos)/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}
}
returnValue=returnValue+sliderObj.sliderMinValue;
if(sliderObj.functionToCallOnChange)eval(sliderObj.functionToCallOnChange+'('+returnValue+',"'+sliderObj.sliderName+'")');
DHTMLSuite.indexOfCurrentlyActiveSlider=numIndex;
sliderObj.slideInProcessTimer=10;
if(sliderObj.sliderDirection=='hor'){
sliderObj.slide_event_pos=e.clientX;
sliderObj.slide_start_pos=handlePos;
}else{
sliderObj.slide_event_pos=e.clientY;
sliderObj.slide_start_pos=handlePos;
}
DHTMLSuite.commonObj.__setTextSelOk(false);
}
,
__waitBeforeSliderDragStarts:function()
{
if(this.slideInProcessTimer<10&&this.slideInProcessTimer>=0){
this.slideInProcessTimer+=2;
window.refToThisSlider=this;
setTimeout('window.refToThisSlider.__waitBeforeSliderDragStarts()',5);
}
}
,
__moveSlider:function(e)
{
if(DHTMLSuite.indexOfCurrentlyActiveSlider===false)return;
var sliderObj=DHTMLSuite.sliderObjects[DHTMLSuite.indexOfCurrentlyActiveSlider];
if(document.all)e=event;
if(sliderObj.slideInProcessTimer<10)return;
var returnValue;
if(sliderObj.numberOfSteps){
modValue=sliderObj.sliderSize/sliderObj.numberOfSteps;
}
if(sliderObj.sliderDirection=='hor'){
var handlePos=e.clientX-sliderObj.slide_event_pos+sliderObj.slide_start_pos;
}else{
var handlePos=e.clientY-sliderObj.slide_event_pos+sliderObj.slide_start_pos;
}
if(sliderObj.numberOfSteps){
var mod=handlePos%modValue;
if(mod>(modValue/2))mod=modValue-mod;else mod*=-1;
handlePos=handlePos+mod;
}
if(handlePos<0)handlePos=0;
if(handlePos>sliderObj.sliderSize)handlePos=sliderObj.sliderSize;
if(sliderObj.sliderDirection=='hor'){
sliderObj.sliderHandleImg.style.left=handlePos+'px';
if(!sliderObj.sliderValueReversed){
returnValue=Math.round((handlePos/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}else{
returnValue=Math.round(((sliderObj.sliderSize-handlePos)/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}
}else{
sliderObj.sliderHandleImg.style.top=handlePos+'px';
if(sliderObj.sliderValueReversed){
returnValue=Math.round((handlePos/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}else{
returnValue=Math.round(((sliderObj.sliderSize-handlePos)/sliderObj.sliderSize)*(sliderObj.sliderMaxValue-sliderObj.sliderMinValue));
}
}
returnValue=returnValue+sliderObj.sliderMinValue;
if(sliderObj.functionToCallOnChange)eval(sliderObj.functionToCallOnChange+'('+returnValue+',"'+sliderObj.sliderName+'")');
}
,
__stopSlideProcess:function(e)
{
DHTMLSuite.commonObj.__setTextSelOk(true);
if(!DHTMLSuite.indexOfCurrentlyActiveSlider)return;
var sliderObj=DHTMLSuite.sliderObjects[DHTMLSuite.indexOfCurrentlyActiveSlider];
sliderObj.slideInProcessTimer=-1;
}
}
function RichDrawEditor(elem,renderer){
this.container=elem;
this.gridX=10;
this.gridY=10;
this.mouseDownX=0;
this.mouseDownY=0;
this.mode='';
this.fillColor='';
this.lineColor='';
this.lineWidth='';
this.selected=null;
this.selectedBounds={x:0,y:0,width:0,height:0};
this.onselect=function(){}
this.onunselect=function(){}
this.renderer=renderer;
this.renderer.init(this.container);
this.onMouseDownListener=this.onMouseDown.bindAsEventListener(this);
this.onMouseUpListener=this.onMouseUp.bindAsEventListener(this);
this.onDragListener=this.onDrag.bindAsEventListener(this);
this.onResizeListener=this.onResize.bindAsEventListener(this);
this.onDrawListener=this.onDraw.bindAsEventListener(this);
this.onHitListener=this.onHit.bindAsEventListener(this);
this.onSelectStartListener=this.onSelectStart.bindAsEventListener(this);
Event.observe(this.container,"mousedown",this.onMouseDownListener);
Event.observe(this.container,"mouseup",this.onMouseUpListener);
Event.observe(this.container,"selectstart",this.onSelectStartListener);
}
RichDrawEditor.prototype.clearWorkspace=function(){
this.container.innerHTML='';
};
RichDrawEditor.prototype.deleteSelection=function(){
if(this.selected){
this.renderer.remove(this.container.ownerDocument.getElementById('tracker'));
this.renderer.remove(this.selected);
this.selected=null;
}
};
RichDrawEditor.prototype.select=function(elem){
if(elem==this.selected)
return;
this.selected=elem;
this.renderer.showTracker(this.selected);
this.onselect(this);
};
RichDrawEditor.prototype.unselect=function(){
if(this.selected){
this.renderer.remove(this.container.ownerDocument.getElementById('tracker'));
this.selected=null;
this.onunselect(this);
}
};
RichDrawEditor.prototype.getSelectedElement=function(){
return this.selected;
};
RichDrawEditor.prototype.setGrid=function(horizontal,vertical){
this.gridX=horizontal;
this.gridY=vertical;
};
RichDrawEditor.prototype.editCommand=function(cmd,value)
{
if(cmd=='mode'){
this.mode=value;
}
else if(this.selected==null){
if(cmd=='fillcolor'){
this.fillColor=value;
}
else if(cmd=='linecolor'){
this.lineColor=value;
}
else if(cmd=='linewidth'){
this.lineWidth=parseInt(value)+'px';
}
}
else{
this.renderer.editCommand(this.selected,cmd,value);
}
}
RichDrawEditor.prototype.queryCommand=function(cmd)
{
if(cmd=='mode'){
return this.mode;
}
else if(this.selected==null){
if(cmd=='fillcolor'){
return this.fillColor;
}
else if(cmd=='linecolor'){
return this.lineColor;
}
else if(cmd=='linewidth'){
return this.lineWidth;
}
}
else{
return this.renderer.queryCommand(this.selected,cmd);
}
}
RichDrawEditor.prototype.onSelectStart=function(event){
return false;
}
RichDrawEditor.prototype.onMouseDown=function(event){
var offset=Position.cumulativeOffset(this.container);
var snappedX=Math.round((Event.pointerX(event)-offset[0])/this.gridX)*this.gridX;
var snappedY=Math.round((Event.pointerY(event)-offset[1])/this.gridY)*this.gridY;
if(this.mode!='select'){
this.unselect();
this.mouseDownX=snappedX;
this.mouseDownY=snappedY;
this.selected=this.renderer.create(this.mode,this.fillColor,this.lineColor,this.lineWidth,this.mouseDownX,this.mouseDownY,1,1);
this.selected.id='shape:'+createUUID();
Event.observe(this.selected,"mousedown",this.onHitListener);
Event.observe(this.container,"mousemove",this.onDrawListener);
}
else{
if(this.mouseDownX!=snappedX||this.mouseDownY!=snappedY)
this.unselect();
}
return false;
};
RichDrawEditor.prototype.onMouseUp=function(event){
Event.stopObserving(this.container,"mousemove",this.onDrawListener);
Event.stopObserving(this.container,"mousemove",this.onDragListener);
if(this.mode!='select'){
this.selected=null;
}
};
RichDrawEditor.prototype.onDrag=function(event){
var offset=Position.cumulativeOffset(this.container);
var snappedX=Math.round((Event.pointerX(event)-offset[0])/this.gridX)*this.gridX;
var snappedY=Math.round((Event.pointerY(event)-offset[1])/this.gridY)*this.gridY;
var deltaX=snappedX-this.mouseDownX;
var deltaY=snappedY-this.mouseDownY;
this.renderer.move(this.selected,this.selectedBounds.x+deltaX,this.selectedBounds.y+deltaY);
this.renderer.showTracker(this.selected);
};
RichDrawEditor.prototype.onResize=function(event){
var offset=Position.cumulativeOffset(this.container);
var snappedX=Math.round((Event.pointerX(event)-offset[0])/this.gridX)*this.gridX;
var snappedY=Math.round((Event.pointerY(event)-offset[1])/this.gridY)*this.gridY;
var deltaX=snappedX-this.mouseDownX;
var deltaY=snappedY-this.mouseDownY;
this.renderer.track(handle,deltaX,deltaY);
show_tracker();
};
RichDrawEditor.prototype.onDraw=function(event){
if(this.selected==null)
return;
var offset=Position.cumulativeOffset(this.container);
var snappedX=Math.round((Event.pointerX(event)-offset[0])/this.gridX)*this.gridX;
var snappedY=Math.round((Event.pointerY(event)-offset[1])/this.gridY)*this.gridY;
this.renderer.resize(this.selected,this.mouseDownX,this.mouseDownY,snappedX,snappedY);
};
RichDrawEditor.prototype.onHit=function(event){
if(this.mode=='select'){
this.select(Event.element(event));
this.selectedBounds=this.renderer.bounds(this.selected);
var offset=Position.cumulativeOffset(this.container);
this.mouseDownX=Math.round((Event.pointerX(event)-offset[0])/this.gridX)*this.gridX;
this.mouseDownY=Math.round((Event.pointerY(event)-offset[1])/this.gridY)*this.gridY;
Event.observe(this.container,"mousemove",this.onDragListener);
}
};
function createUUID()
{
return[4,2,2,2,6].map(function(length){
var uuidpart="";
for(var i=0;i<length;i++){
var uuidchar=parseInt((Math.random()*256)).toString(16);
if(uuidchar.length==1)
uuidchar="0"+uuidchar;
uuidpart+=uuidchar;
}
return uuidpart;
}).join('-');
}
function AbstractRenderer(){
};
AbstractRenderer.prototype.init=function(elem){};
AbstractRenderer.prototype.bounds=function(shape){return{x:0,y:0,width:0,height:0};};
AbstractRenderer.prototype.create=function(shape,fillColor,lineColor,lineWidth,left,top,width,height){};
AbstractRenderer.prototype.remove=function(shape){};
AbstractRenderer.prototype.move=function(shape,left,top){};
AbstractRenderer.prototype.track=function(shape){};
AbstractRenderer.prototype.resize=function(shape,fromX,fromY,toX,toY){};
AbstractRenderer.prototype.editCommand=function(shape,cmd,value){};
AbstractRenderer.prototype.queryCommand=function(shape,cmd){};
AbstractRenderer.prototype.showTracker=function(shape){};
AbstractRenderer.prototype.getMarkup=function(){return null;};
function SVGRenderer(){
this.base=AbstractRenderer;
this.svgRoot=null;
}
SVGRenderer.prototype=new AbstractRenderer;
SVGRenderer.prototype.init=function(elem){
this.container=elem;
this.container.style.MozUserSelect='none';
var svgNamespace='http://www.w3.org/2000/svg';
this.svgRoot=this.container.ownerDocument.createElementNS(svgNamespace,"svg");
this.container.appendChild(this.svgRoot);
}
SVGRenderer.prototype.bounds=function(shape){
var rect=new Object();
var box=shape.getBBox();
rect['x']=box.x;
rect['y']=box.y;
rect['width']=box.width;
rect['height']=box.height;
return rect;
}
SVGRenderer.prototype.create=function(shape,fillColor,lineColor,lineWidth,left,top,width,height){
var svgNamespace='http://www.w3.org/2000/svg';
var svg;
if(shape=='rect'){
svg=this.container.ownerDocument.createElementNS(svgNamespace,'rect');
svg.setAttributeNS(null,'x',left+'px');
svg.setAttributeNS(null,'y',top+'px');
svg.setAttributeNS(null,'width',width+'px');
svg.setAttributeNS(null,'height',height+'px');
}
else if(shape=='ellipse'){
svg=this.container.ownerDocument.createElementNS(svgNamespace,'ellipse');
svg.setAttributeNS(null,'cx',(left+width/2)+'px');
svg.setAttributeNS(null,'cy',(top+height/2)+'px');
svg.setAttributeNS(null,'rx',(width/2)+'px');
svg.setAttributeNS(null,'ry',(height/2)+'px');
}
else if(shape=='roundrect'){
svg=this.container.ownerDocument.createElementNS(svgNamespace,'rect');
svg.setAttributeNS(null,'x',left+'px');
svg.setAttributeNS(null,'y',top+'px');
svg.setAttributeNS(null,'rx','20px');
svg.setAttributeNS(null,'ry','20px');
svg.setAttributeNS(null,'width',width+'px');
svg.setAttributeNS(null,'height',height+'px');
}
else if(shape=='line'){
svg=this.container.ownerDocument.createElementNS(svgNamespace,'line');
svg.setAttributeNS(null,'x1',left+'px');
svg.setAttributeNS(null,'y1',top+'px');
svg.setAttributeNS(null,'x2',left+'px');
svg.setAttributeNS(null,'y2',top+'px');
}
try{
svg.style.position='absolute';
}catch(err){}
if(fillColor.length==0)
fillColor='none';
svg.setAttributeNS(null,'fill',fillColor);
if(lineColor.length==0)
lineColor='none';
svg.setAttributeNS(null,'stroke',lineColor);
svg.setAttributeNS(null,'stroke-width',lineWidth);
this.svgRoot.appendChild(svg);
return svg;
};
SVGRenderer.prototype.remove=function(shape){
shape.parentNode.removeChild(shape);
}
SVGRenderer.prototype.move=function(shape,left,top){
if(shape.tagName=='line'){
var deltaX=shape.getBBox().width;
var deltaY=shape.getBBox().height;
shape.setAttributeNS(null,'x1',left);
shape.setAttributeNS(null,'y1',top);
shape.setAttributeNS(null,'x2',left+deltaX);
shape.setAttributeNS(null,'y2',top+deltaY);
}
else if(shape.tagName=='ellipse'){
shape.setAttributeNS(null,'cx',left+(shape.getBBox().width/2));
shape.setAttributeNS(null,'cy',top+(shape.getBBox().height/2));
}
else{
shape.setAttributeNS(null,'x',left);
shape.setAttributeNS(null,'y',top);
}
};
SVGRenderer.prototype.track=function(shape){
};
SVGRenderer.prototype.resize=function(shape,fromX,fromY,toX,toY){
var deltaX=toX-fromX;
var deltaY=toY-fromY;
if(shape.tagName=='line'){
shape.setAttributeNS(null,'x2',toX);
shape.setAttributeNS(null,'y2',toY);
}
else if(shape.tagName=='ellipse'){
if(deltaX<0){
shape.setAttributeNS(null,'cx',(fromX+deltaX/2)+'px');
shape.setAttributeNS(null,'rx',(-deltaX/2)+'px');
}
else{
shape.setAttributeNS(null,'cx',(fromX+deltaX/2)+'px');
shape.setAttributeNS(null,'rx',(deltaX/2)+'px');
}
if(deltaY<0){
shape.setAttributeNS(null,'cy',(fromY+deltaY/2)+'px');
shape.setAttributeNS(null,'ry',(-deltaY/2)+'px');
}
else{
shape.setAttributeNS(null,'cy',(fromY+deltaY/2)+'px');
shape.setAttributeNS(null,'ry',(deltaY/2)+'px');
}
}
else{
if(deltaX<0){
shape.setAttributeNS(null,'x',toX+'px');
shape.setAttributeNS(null,'width',-deltaX+'px');
}
else{
shape.setAttributeNS(null,'width',deltaX+'px');
}
if(deltaY<0){
shape.setAttributeNS(null,'y',toY+'px');
shape.setAttributeNS(null,'height',-deltaY+'px');
}
else{
shape.setAttributeNS(null,'height',deltaY+'px');
}
}
};
SVGRenderer.prototype.editCommand=function(shape,cmd,value)
{
if(shape!=null){
if(cmd=='fillcolor'){
if(value!='')
shape.setAttributeNS(null,'fill',value);
else
shape.setAttributeNS(null,'fill','none');
}
else if(cmd=='linecolor'){
if(value!='')
shape.setAttributeNS(null,'stroke',value);
else
shape.setAttributeNS(null,'stroke','none');
}
else if(cmd=='linewidth'){
shape.setAttributeNS(null,'stroke-width',parseInt(value)+'px');
}
}
}
SVGRenderer.prototype.queryCommand=function(shape,cmd)
{
var result='';
if(shape!=null){
if(cmd=='fillcolor'){
result=shape.getAttributeNS(null,'fill');
if(result=='none')
result='';
}
else if(cmd=='linecolor'){
result=shape.getAttributeNS(null,'stroke');
if(result=='none')
result='';
}
else if(cmd=='linewidth'){
result=shape.getAttributeNS(null,'stroke');
if(result=='none')
result='';
else
result=shape.getAttributeNS(null,'stroke-width');
}
}
return result;
}
SVGRenderer.prototype.showTracker=function(shape){
var box=shape.getBBox();
var tracker=document.getElementById('tracker');
if(tracker){
this.remove(tracker);
}
var svgNamespace='http://www.w3.org/2000/svg';
tracker=document.createElementNS(svgNamespace,'rect');
tracker.setAttributeNS(null,'id','tracker');
tracker.setAttributeNS(null,'x',box.x-10);
tracker.setAttributeNS(null,'y',box.y-10);
tracker.setAttributeNS(null,'width',box.width+20);
tracker.setAttributeNS(null,'height',box.height+20);
tracker.setAttributeNS(null,'fill','none');
tracker.setAttributeNS(null,'stroke','blue');
tracker.setAttributeNS(null,'stroke-width','1');
this.svgRoot.appendChild(tracker);
}
SVGRenderer.prototype.getMarkup=function(){
return this.container.innerHTML;
}
function VMLRenderer(){
this.base=AbstractRenderer;
}
VMLRenderer.prototype=new AbstractRenderer;
VMLRenderer.prototype.init=function(elem){
this.container=elem;
this.container.style.overflow='hidden';
elem.ownerDocument.namespaces.add("v","urn:schemas-microsoft-com:vml");
var style=elem.ownerDocument.createStyleSheet();
style.addRule('v\\:*',"behavior: url(#default#VML);");
}
VMLRenderer.prototype.bounds=function(shape){
var rect=new Object();
rect['x']=shape.offsetLeft;
rect['y']=shape.offsetTop;
rect['width']=shape.offsetWidth;
rect['height']=shape.offsetHeight;
return rect;
}
VMLRenderer.prototype.create=function(shape,fillColor,lineColor,lineWidth,left,top,width,height){
var vml;
if(shape=='rect'){
vml=this.container.ownerDocument.createElement('v:rect');
}
else if(shape=='roundrect'){
vml=this.container.ownerDocument.createElement('v:roundrect');
}
else if(shape=='ellipse'){
vml=this.container.ownerDocument.createElement('v:oval');
}
else if(shape=='line'){
vml=this.container.ownerDocument.createElement('v:line');
}
if(shape!='line'){
vml.style.position='absolute';
vml.style.left=left;
vml.style.top=top;
vml.style.width=width;
vml.style.height=height;
if(fillColor!=''){
vml.setAttribute('filled','true');
vml.setAttribute('fillcolor',fillColor);
}
else{
vml.setAttribute('filled','false');
}
}
else{
vml.style.position='absolute';
vml.setAttribute('from',left+'px,'+top+'px');
vml.setAttribute('to',left+'px,'+top+'px');
}
if(lineColor!=''){
vml.setAttribute('stroked','true');
vml.setAttribute('strokecolor',lineColor);
vml.setAttribute('strokeweight',lineWidth);
}
else{
vml.setAttribute('stroked','false');
}
this.container.appendChild(vml);
return vml;
};
VMLRenderer.prototype.remove=function(shape){
shape.removeNode(true);
}
VMLRenderer.prototype.move=function(shape,left,top){
if(shape.tagName=='line'){
shape.style.marginLeft=left;
shape.style.marginTop=top;
}
else{
shape.style.left=left;
shape.style.top=top;
}
};
VMLRenderer.prototype.track=function(shape){
};
VMLRenderer.prototype.resize=function(shape,fromX,fromY,toX,toY){
var deltaX=toX-fromX;
var deltaY=toY-fromY;
if(shape.tagName=='line'){
shape.setAttribute('to',toX+'px,'+toY+'px');
}
else{
if(deltaX<0){
shape.style.left=toX+'px';
shape.style.width=-deltaX+'px';
}
else{
shape.style.width=deltaX+'px';
}
if(deltaY<0){
shape.style.top=toY+'px';
shape.style.height=-deltaY+'px';
}
else{
shape.style.height=deltaY+'px';
}
}
};
VMLRenderer.prototype.editCommand=function(shape,cmd,value)
{
if(shape!=null){
if(cmd=='fillcolor'){
if(value!=''){
shape.filled='true';
shape.fillcolor=value;
}
else{
shape.filled='false';
shape.fillcolor='';
}
}
else if(cmd=='linecolor'){
if(value!=''){
shape.stroked='true';
shape.strokecolor=value;
}
else{
shape.stroked='false';
shape.strokecolor='';
}
}
else if(cmd=='linewidth'){
shape.strokeweight=parseInt(value)+'px';
}
}
}
VMLRenderer.prototype.queryCommand=function(shape,cmd)
{
if(shape!=null){
if(cmd=='fillcolor'){
if(shape.filled=='false')
return'';
else
return shape.fillcolor;
}
else if(cmd=='linecolor'){
if(shape.stroked=='false')
return'';
else
return shape.strokecolor;
}
else if(cmd=='linewidth'){
if(shape.stroked=='false'){
return'';
}
else{
return(parseFloat(shape.strokeweight)*(screen.logicalXDPI/72))+'px';
}
}
}
}
VMLRenderer.prototype.showTracker=function(shape){
var box=this.bounds(shape);
var tracker=document.getElementById('tracker');
if(tracker){
this.remove(tracker);
}
tracker=this.container.ownerDocument.createElement('v:rect');
tracker.id='tracker';
tracker.style.position='absolute';
tracker.style.left=box.x-10;
tracker.style.top=box.y-10;
tracker.style.width=box.width+20;
tracker.style.height=box.height+20;
tracker.setAttribute('filled','false');
tracker.setAttribute('stroked','true');
tracker.setAttribute('strokecolor','blue');
tracker.setAttribute('strokeweight','1px');
this.container.appendChild(tracker);
}
VMLRenderer.prototype.getMarkup=function(){
return this.container.innerHTML;
}

var DrawLayer=new Array();
var DrawCanvas=new Array();
var currentLayer=1;
var currentCanvas=1;
var zCurrentCanvasMode='rect';
function setLayerData(){
DrawLayer[currentLayer]=DrawCanvas;
}
function setLayer(LayerNumber){
currentLayer=LayerNumber;
DrawCanvas=DrawLayer[currentLayer];
}
function initDraw(){
var renderer;
ie=navigator.appVersion.match(/MSIE (\d\.\d)/);
opera=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);
if((!ie)||(opera)){
renderer=new SVGRenderer();
}
else{
renderer=new VMLRenderer();
}
DrawCanvas[currentCanvas]=new RichDrawEditor(document.getElementById('richdraw'+currentCanvas),renderer);
DrawCanvas[currentCanvas].onselect=onSelect;
DrawCanvas[currentCanvas].onunselect=onUnselect;
if(totalFrames==1){
setCanvasDefaults();
}else{
setCanvasProperties();
}
isinit=true;
setLayerData()
}
function refreshModeData(){
DrawCanvas[currentCanvas].editCommand('mode',zCurrentCanvasMode);
setTimeout('refreshModeData()',1000);
}
function setCanvasDefaults(){
DrawCanvas[currentCanvas].editCommand('fillcolor','rgb(255,0,0)');
DrawCanvas[currentCanvas].editCommand('linecolor','rgb(0,0,0)');
DrawCanvas[currentCanvas].editCommand('linewidth','1px');
setMode('rect','Rectangle');
$('fillcolor').style.backgroundColor='rgb(255,0,0)';
$('linecolor').style.backgroundColor='rgb(0,0,0)';
}
function setCanvasProperties(){
DrawCanvas[currentCanvas].editCommand('fillcolor',$('fillcolor').style.backgroundColor);
DrawCanvas[currentCanvas].editCommand('linecolor',$('linecolor').style.backgroundColor);
var LWidth=$('linewidth').options[$('linewidth').selectedIndex].value;
DrawCanvas[currentCanvas].editCommand('linewidth',LWidth);
DrawCanvas[currentCanvas].editCommand('mode',zCurrentCanvasMode);
}
function setMode(mode,status){
DrawCanvas[currentCanvas].editCommand('mode',mode);
zCurrentCanvasMode=mode;
if(mode=='select')
$('status').innerHTML='Mode: Select/Move';
else
$('status').innerHTML='Mode: Draw '+status;
}
function deleteShape(){
DrawCanvas[currentCanvas].deleteSelection();
}
function setFillColor(){
DrawCanvas[currentCanvas].editCommand('fillcolor',$('fillcolor').style.backgroundColor);
}
function setLineColor(){
DrawCanvas[currentCanvas].editCommand('linecolor',$('linecolor').style.backgroundColor);
}
function setLineWidth(widths){
var width=widths.options[widths.selectedIndex].value;
DrawCanvas[currentCanvas].editCommand('linewidth',width);
}
function getOptionByValue(select,value)
{
for(var i=0;i<select.length;i++){
if(select.options[i].value==value){
return i;
}
}
return-1;
}
function showMarkup(){
alert(value=DrawCanvas[currentCanvas].renderer.getMarkup());
}
function onSelect(){
setLayerData()
$('fillcolor').style.backgroundColor=DrawCanvas[currentCanvas].queryCommand('fillcolor');
$('linecolor').style.backgroundColor=DrawCanvas[currentCanvas].queryCommand('linecolor');
$('linewidth').selectedIndex=getOptionByValue($('linewidth'),DrawCanvas[currentCanvas].queryCommand('linewidth'));
}
function onUnselect(){
setLayerData()
$('fillcolor').style.backgroundColor=DrawCanvas[currentCanvas].queryCommand('fillcolor');
$('linecolor').style.backgroundColor=DrawCanvas[currentCanvas].queryCommand('linecolor');
$('linewidth').selectedIndex=getOptionByValue($('linewidth'),DrawCanvas[currentCanvas].queryCommand('linewidth'));
}

window.onload=startUp;
nn=(document.layers)?true:false;
ie=(document.all)?true:false;
function keyDown(e){
var evt=(e)?e:(window.event)?window.event:null;
if(evt){
var eventkeyCode=(evt.charCode)?evt.charCode:((evt.keyCode)?evt.keyCode:((evt.which)?evt.which:0));
if(eventkeyCode==39||eventkeyCode==33){
gotoframe(currentFrameSelection+1,1)
return false
}
if(eventkeyCode==37||eventkeyCode==34){
gotoframe(currentFrameSelection-1,1)
return false
}
if(eventkeyCode==117){
toKeyframe();
return false
}
if(eventkeyCode==80){
playAnimation()
}
if(eventkeyCode==83){
stopAnimation();
}
if(eventkeyCode==46){
deleteShape();
}
if(eventkeyCode==13){
playAnimation()
}
}
}
document.onkeydown=keyDown;
if(nn)document.captureEvents(Event.KEYDOWN);
function startUp(){
addLayer();
try{
ajaxpage("../../documentation/manual.htm","ManualDiv");
ajaxpage("../../documentation/faq.htm","FAQDiv");
}catch(err){
ajaxpage("../html/manual.htm","ManualDiv");
ajaxpage("../html/faq.htm","FAQDiv");
}
ajaxpage("../html/about.htm","aboutdiv");
ajaxpage("../html/support.htm","supportdiv");
setTimeout("adblockCheck()",3000)
initCanvas();
}
function adblockCheck(){
var adblock=new Boolean();
adblock=false;
var googleads=document.getElementsByName("google_ads_frame");
for(i=0;i<googleads.length;i++){
if(googleads[i].style.display=='none'){
adblock=true;
}
}
if(adblock==true){
alert("please disable adblock to prevent this message from appearing");
}
setTimeout("adblockCheck()",30000)
}
</script>
<link href="../themes/light-cyan/css/window.css"rel="stylesheet"media="screen"type="text/css"/>
<link href="../themes/light-cyan/css/resize.css"rel="stylesheet"media="screen"type="text/css"/>
<link href="../themes/light-cyan/css/color-widget.css"rel="stylesheet"media="screen"type="text/css"/>
<link href="../themes/light-cyan/css/color-palette.css"rel="stylesheet"media="screen"type="text/css"/>
<link href="../themes/light-cyan/css/pane-splitter.css"rel="stylesheet"media="screen"type="text/css"/>
<link href="../themes/light-cyan/css/menu-bar.css"rel="stylesheet"media="screen"type="text/css"/>
<link href="../themes/light-cyan/css/menu-item.css"rel="stylesheet"media="screen"type="text/css"/>
</head>
<body>
<script type="text/javascript">
var config=new Object();
var Debug=true
var TagsToTip=true
config. Above=false
config. BgColor='#E0E4FF'
config. BgImg=''
config. BorderColor='#002299'
config. BorderStyle='solid'
config. BorderWidth=1
config. CenterMouse=false
config. ClickClose=false
config. CloseBtn=false
config. CloseBtnColors=['#990000','#FFFFFF','#DD3333','#FFFFFF']
config. CloseBtnText='Close'
config. Delay=400
config. Duration=0
config. FadeIn=900
config. FadeOut=2000
config. FadeInterval=30
config. Fix=null
config. FollowMouse=true
config. FontColor='#000044'
config. FontFace='Verdana,Geneva,sans-serif'
config. FontSize='8pt'
config. FontWeight='normal'
config. Left=false
config. OffsetX=14
config. OffsetY=8
config. Opacity=100
config. Padding=3
config. Shadow=true
config. ShadowColor='#C0C0C0'
config. ShadowWidth=5
config. Sticky=false
config. TextAlign='left'
config. Title=''
config. TitleAlign='left'
config. TitleBgColor=''
config. TitleFontColor=''
config. TitleFontFace=''
config. TitleFontSize=''
config. Width=0
function Tip()
{
tt_Tip(arguments);
}
function TagToTip()
{
var t_a=arguments,t_el;
if(TagsToTip)
{
t_el=tt_GetElt(t_a[0]);
if(t_el)
{
t_a[0]=t_el.innerHTML;
tt_Tip(t_a);
}
}
}
var
ONCONFIG=0,
ONMOUSEMOVE=1,
ONHIDEINIT=2,
ONHIDE=3,
tt_aElt=new Array(10),
tt_aV=new Array(),
tt_w,tt_h;
function tt_AddExtension()
{
return(new tt_Extension(arguments)!=null);
}
function tt_SetTipPos(t_x,t_y)
{
var t_css=tt_aElt[0].style;
t_css.left=t_x+"px";
t_css.top=t_y+"px";
if(tt_ie56)
{
var t_ifrm=tt_aElt[tt_aElt.length-1];
if(t_ifrm)
{
t_ifrm.style.left=t_css.left;
t_ifrm.style.top=t_css.top;
}
}
}
function tt_HideTip()
{
if(tt_db)
{
tt_ExtCallFunc(0,ONHIDE);
tt_tShow.EndTimer();
tt_tHide.EndTimer();
tt_tDurt.EndTimer();
tt_tFade.EndTimer();
if(!tt_op&&!tt_ie)
{
tt_tWaitMov.EndTimer();
tt_bWait=false;
}
if(tt_aV[CLICKCLOSE])
tt_RemEvtFnc(document,"mouseup",tt_HideInit);
tt_AddRemEvtFncEx(1,false);
tt_AddRemEvtFncEx(0,false);
tt_over=null;
tt_ResetMainDiv();
if(tt_aElt[tt_aElt.length-1])
tt_aElt[tt_aElt.length-1].style.display="none";
}
}
function tt_GetDivW(t_el)
{
if(t_el)
return(t_el.offsetWidth||t_el.style.pixelWidth||0);
return 0;
}
function tt_GetDivH(t_el)
{
if(t_el)
return(t_el.offsetHeight||t_el.style.pixelHeight||0);
return 0;
}
function tt_GetScrollX()
{
return((typeof(window.pageXOffset)!=tt_u)?window.pageXOffset
:tt_db?(tt_db.scrollLeft||0)
:0);
}
function tt_GetScrollY()
{
return((typeof(window.pageYOffset)!=tt_u)?window.pageYOffset
:tt_db?(tt_db.scrollTop||0)
:0);
}
function tt_GetClientW()
{
return(document.body&&(typeof(document.body.clientWidth)!=tt_u)?document.body.clientWidth
:(typeof(window.innerWidth)!=tt_u)?window.innerWidth
:tt_db?(tt_db.clientWidth||0)
:0);
}
function tt_GetClientH()
{
return(document.body&&(typeof(document.body.clientHeight)!=tt_u)?document.body.clientHeight
:(typeof(window.innerHeight)!=tt_u)?window.innerHeight
:tt_db?(tt_db.clientHeight||0)
:0);
}
function tt_AddEvtFnc(t_el,t_sEvt,t_PFnc)
{
if(t_el)
{
if(t_el.addEventListener)
t_el.addEventListener(t_sEvt,t_PFnc,false);
else
t_el.attachEvent("on"+t_sEvt,t_PFnc);
}
}
function tt_RemEvtFnc(t_el,t_sEvt,t_PFnc)
{
if(t_el)
{
if(t_el.removeEventListener)
t_el.removeEventListener(t_sEvt,t_PFnc,false);
else
t_el.detachEvent("on"+t_sEvt,t_PFnc);
}
}
var tt_aExt=new Array(),
tt_db,tt_op,tt_op78,tt_ie,tt_ie56,tt_bBoxOld,
tt_body,
tt_flagOpa,
tt_scrlX,tt_scrlY,
tt_maxPosX,tt_maxPosY,
tt_over,
tt_opa,
tt_bJmpVert,
tt_elDeHref,
tt_tShow=new Number(0),tt_tHide=new Number(0),tt_tDurt=new Number(0),
tt_tFade=new Number(0),tt_tWaitMov=new Number(0),
tt_bMovFnc,tt_bOutFnc,
tt_bWait=false,
tt_u="undefined";
function tt_Init()
{
tt_MkCmdEnum();
if(!tt_Browser()||!tt_MkMainDiv())
return;
tt_IsW3cBoxing();
tt_OpaSupport();
if(TagsToTip||Debug)
tt_SetOnloadFnc();
tt_AddEvtFnc(window,"unload",tt_HideTip);
tt_HideTip();
}
function tt_MkCmdEnum()
{
var t_n=0;
for(var i in config)
eval("window."+i.toString().toUpperCase()+" = "+t_n++);
tt_aV.length=t_n;
}
function tt_Browser()
{
var t_n,t_nv,t_n6,t_w3c;
t_n=navigator.userAgent.toLowerCase(),
t_nv=navigator.appVersion;
tt_op=(document.defaultView&&typeof(eval("w"+"indow"+"."+"o"+"p"+"er"+"a"))!=tt_u);
tt_op78=(tt_op&&!window.getSelection);
tt_ie=t_n.indexOf("msie")!=-1&&document.all&&!tt_op;
if(tt_ie)
{
var t_ieOld=(!document.compatMode||document.compatMode=="BackCompat");
tt_db=!t_ieOld?document.documentElement:(document.body||null);
if(tt_db)
tt_ie56=parseFloat(t_nv.substring(t_nv.indexOf("MSIE")+5))>=5.5
&&typeof document.body.style.maxHeight==tt_u;
}
else
{
tt_db=document.documentElement||document.body||
(document.getElementsByTagName?document.getElementsByTagName("body")[0]
:null);
if(!tt_op)
{
t_n6=document.defaultView&&typeof document.defaultView.getComputedStyle!=tt_u;
t_w3c=!t_n6&&document.getElementById;
}
}
tt_body=(document.getElementsByTagName?document.getElementsByTagName("body")[0]
:(document.body||null));
if(tt_ie||t_n6||tt_op||t_w3c)
{
if(tt_body&&tt_db)
{
if(document.attachEvent||document.addEventListener)
return true;
}
else
tt_Err("wz_tooltip.js must be included INSIDE the body section,"
+" immediately after the opening <body> tag.");
}
tt_db=null;
return false;
}
function tt_MkMainDiv()
{
if(tt_body.insertAdjacentHTML)
tt_body.insertAdjacentHTML("afterBegin",tt_MkMainDivHtm());
else if(typeof tt_body.innerHTML!=tt_u&&document.createElement&&tt_body.appendChild)
tt_body.appendChild(tt_MkMainDivDom());
if(window.tt_GetMainDivRefs&&tt_GetMainDivRefs())
return true;
tt_db=null;
return false;
}
function tt_MkMainDivHtm()
{
return('<div id="WzTtDiV" style="position:absolute;overflow:hidden;"></div>'+
(tt_ie56?('<iframe id="WzTtIfRm" src="javascript:false" scrolling="no" frameborder="0" style="filter:Alpha(opacity=0);position:absolute;top:0px;left:0px;display:none;"></iframe>')
:''));
}
function tt_MkMainDivDom()
{
var t_el;
t_el=document.createElement("div");
if(t_el)
{
var t_css=t_el.style;
t_el.id="WzTtDiV";
t_css.position="absolute";
t_css.overflow="hidden";
}
return t_el;
}
function tt_GetMainDivRefs()
{
tt_aElt[0]=tt_GetElt("WzTtDiV");
if(tt_ie56&&tt_aElt[0])
{
tt_aElt[tt_aElt.length-1]=tt_GetElt("WzTtIfRm");
if(!tt_aElt[tt_aElt.length-1])
tt_aElt[0]=null;
}
return(tt_aElt[0]!=null);
}
function tt_ResetMainDiv()
{
var t_css=tt_aElt[0].style;
t_css.visibility="hidden";
t_css.left="-9999px";
tt_aElt[0].innerHTML="";
t_css.width="9998px";
}
function tt_IsW3cBoxing()
{
var t_css=tt_aElt[0].style;
t_css.padding="10px";
t_css.width="40px";
tt_bBoxOld=(tt_GetDivW(tt_aElt[0])==40);
t_css.padding="0px";
tt_ResetMainDiv();
}
function tt_OpaSupport()
{
var t_css=tt_body.style;
tt_flagOpa=(typeof(t_css.filter)!=tt_u)?1
:(typeof(t_css.KhtmlOpacity)!=tt_u)?2
:(typeof(t_css.KHTMLOpacity)!=tt_u)?3
:(typeof(t_css.MozOpacity)!=tt_u)?4
:(typeof(t_css.opacity)!=tt_u)?5
:0;
}
function tt_SetOnloadFnc()
{
tt_AddEvtFnc(document,"DOMContentLoaded",tt_HideSrcTags);
tt_AddEvtFnc(window,"load",tt_HideSrcTags);
/*@cc_on
document.write('<scr'+'ipt id="__ie_onload" defer src="'
+'.'
+'"><\/scr'+'ipt>');
var script=document.getElementById("__ie_onload");
if(!script)alert("Scheie");
script.onreadystatechange=function(){
if(this.readyState=="complete")
tt_HideSrcTags();
};
@*/
if(/WebKit|KHTML/i.test(navigator.userAgent))
{
var t_t=setInterval(function(){
if(/loaded|complete/.test(document.readyState))
{
clearInterval(t_t);
tt_HideSrcTags();
}
},10);
}
}
function tt_HideSrcTags()
{
if(!window.tt_HideSrcTags||window.tt_HideSrcTags.t_done)
return;
window.tt_HideSrcTags.t_done=true;
if(!tt_HideSrcTagsRecurs(tt_body))
tt_Err("To enable the capability to convert HTML elements to tooltips,"
+" you must set TagsToTip in the global tooltip configuration"
+" to true.");
}
function tt_HideSrcTagsRecurs(t_dad)
{
var t_a,t_ovr,t_asT2t;
t_a=t_dad.children||t_dad.childNodes||null;
for(var i=t_a?t_a.length:0;i;)
{--i;
if(!tt_HideSrcTagsRecurs(t_a[i]))
return false;
t_ovr=t_a[i].getAttribute?t_a[i].getAttribute("onmouseover")
:(typeof t_a[i].onmouseover=="function")?t_a[i].onmouseover
:null;
if(t_ovr)
{
t_asT2t=t_ovr.toString().match(/TagToTip\s*\(\s*'[^'.]+'\s*[\),]/);
if(t_asT2t&&t_asT2t.length)
{
if(!tt_HideSrcTag(t_asT2t[0]))
return false;
}
}
}
return true;
}
function tt_HideSrcTag(t_sT2t)
{
var t_id,t_el;
t_id=t_sT2t.replace(/.+'([^'.]+)'.+/,"$1");
t_el=tt_GetElt(t_id);
if(t_el)
{
if(Debug&&!TagsToTip)
return false;
else
t_el.style.display="none";
}
else
tt_Err("Invalid ID\n'"+t_id+"'\npassed to TagToTip()."
+" There exists no HTML element with that ID.");
return true;
}
function tt_Tip(t_arg)
{
if(!tt_db)
return;
if(tt_over)
tt_HideTip();
if(!tt_ReadCmds(t_arg))
return;
tt_AdaptConfig1();
tt_MkTipSubDivs(t_arg[0]);
tt_FormatTip();
tt_AddRemEvtFncEx(0,true);
tt_bJmpVert=false;
tt_scrlX=tt_GetScrollX();
tt_scrlY=tt_GetScrollY();
tt_maxPosX=tt_GetClientW()+tt_scrlX-tt_w-1;
tt_maxPosY=tt_GetClientH()+tt_scrlY-tt_h-1;
tt_AdaptConfig2();
if(window.event)
tt_Move(window.event);
}
function tt_ReadCmds(t_a)
{
var i;
i=0;
for(var j in config)
tt_aV[i++]=config[j];
if(t_a.length&1)
{
for(i=t_a.length-1;i>0;i-=2)
tt_aV[t_a[i-1]]=t_a[i];
return true;
}
tt_Err("Incorrect call of Tip() or TagToTip().\n"
+"Each command must be followed by a value.");
return false;
}
function tt_AdaptConfig1()
{
tt_ExtCallFunc(0,ONCONFIG);
if(!tt_aV[TITLEBGCOLOR].length)
tt_aV[TITLEBGCOLOR]=tt_aV[BORDERCOLOR];
if(!tt_aV[TITLEFONTCOLOR].length)
tt_aV[TITLEFONTCOLOR]=tt_aV[BGCOLOR];
if(!tt_aV[TITLEFONTFACE].length)
tt_aV[TITLEFONTFACE]=tt_aV[FONTFACE];
if(!tt_aV[TITLEFONTSIZE].length)
tt_aV[TITLEFONTSIZE]=tt_aV[FONTSIZE];
if(tt_aV[CLOSEBTN])
{
if(!tt_aV[CLOSEBTNCOLORS])
tt_aV[CLOSEBTNCOLORS]=new Array("","","","");
for(var i=4;i;)
{--i;
if(!tt_aV[CLOSEBTNCOLORS][i].length)
tt_aV[CLOSEBTNCOLORS][i]=(i&1)?tt_aV[TITLEFONTCOLOR]:tt_aV[TITLEBGCOLOR];
}
if(!tt_aV[TITLE].length)
tt_aV[TITLE]=" ";
}
if(tt_aV[OPACITY]==100&&typeof tt_aElt[0].style.MozOpacity!=tt_u)
tt_aV[OPACITY]=99;
if(tt_aV[FADEIN]&&tt_flagOpa&&tt_aV[DELAY]>100)
tt_aV[DELAY]=Math.max(tt_aV[DELAY]-tt_aV[FADEIN],100)
}
function tt_AdaptConfig2()
{
if(tt_aV[CENTERMOUSE])
tt_aV[OFFSETX]=-((tt_w-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0))>>1);
}
function tt_MkTipSubDivs(t_htm)
{
var t_sTbTr=' cellpadding="0" cellspacing="0" border="0" style="position:relative;margin:0px;border-width:0px;"><tr>',
t_sTdCss='position:relative;margin:0px;padding:0px;border-width:0px;';
tt_aElt[0].innerHTML=
(''
+(tt_aV[TITLE].length?
('<div id="WzTiTl" style="position:relative;z-index:1;">'
+'<table id="WzTiTlTb"'+t_sTbTr
+'<td id="WzTiTlI" style="'+t_sTdCss+'">'
+tt_aV[TITLE]
+'</td>'
+(tt_aV[CLOSEBTN]?
('<td align="right" style="'+t_sTdCss
+';text-align:right;">'
+'<span id="WzClOsE" style="padding-left:2px;padding-right:2px;'
+'cursor:'+(tt_ie?'hand':'pointer')
+';" onmouseover="tt_OnCloseBtnOver(1)" onmouseout="tt_OnCloseBtnOver(0)" onclick="tt_HideInit()">'
+tt_aV[CLOSEBTNTEXT]
+'</span></td>')
:'')
+'</tr></table></div>')
:'')
+'<div id="WzBoDy" style="position:relative;z-index:0;">'
+'<table'+t_sTbTr+'<td id="WzBoDyI" style="'+t_sTdCss+'">'
+t_htm
+'</td></tr></table>'
+'</div>'
+(tt_aV[SHADOW]
?('<div id="WzTtShDwR" style="position:absolute;overflow:hidden;"></div>'
+'<div id="WzTtShDwB" style="position:relative;overflow:hidden;"></div>')
:'')
);
tt_GetSubDivRefs();
}
function tt_GetSubDivRefs()
{
var t_aId=new Array("WzTiTl","WzTiTlTb","WzTiTlI","WzClOsE","WzBoDy","WzBoDyI","WzTtShDwB","WzTtShDwR");
for(var i=t_aId.length;i;--i)
tt_aElt[i]=tt_GetElt(t_aId[i-1]);
return true;
}
function tt_FormatTip()
{
var t_css,t_top,t_w;
if(tt_aV[TITLE].length)
{
t_css=tt_aElt[1].style;
t_css.background=tt_aV[TITLEBGCOLOR];
t_css.paddingTop=(tt_aV[CLOSEBTN]?2:0)+"px";
t_css.paddingBottom="1px";
t_css.paddingLeft=t_css.paddingRight=tt_aV[PADDING]+"px";
t_css=tt_aElt[3].style;
t_css.color=tt_aV[TITLEFONTCOLOR];
t_css.fontFamily=tt_aV[TITLEFONTFACE];
t_css.fontSize=tt_aV[TITLEFONTSIZE];
t_css.fontWeight="bold";
t_css.textAlign=tt_aV[TITLEALIGN];
if(tt_aElt[4])
{
t_css.paddingRight=(tt_aV[PADDING]<<1)+"px";
t_css=tt_aElt[4].style;
t_css.background=tt_aV[CLOSEBTNCOLORS][0];
t_css.color=tt_aV[CLOSEBTNCOLORS][1];
t_css.fontFamily=tt_aV[TITLEFONTFACE];
t_css.fontSize=tt_aV[TITLEFONTSIZE];
t_css.fontWeight="bold";
}
if(tt_aV[WIDTH]>0)
tt_w=tt_aV[WIDTH]+((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1);
else
{
tt_w=tt_GetDivW(tt_aElt[3])+tt_GetDivW(tt_aElt[4]);
if(tt_aElt[4])
tt_w+=tt_aV[PADDING];
}
t_top=-tt_aV[BORDERWIDTH];
}
else
{
tt_w=0;
t_top=0;
}
t_css=tt_aElt[5].style;
t_css.top=t_top+"px";
if(tt_aV[BORDERWIDTH])
{
t_css.borderColor=tt_aV[BORDERCOLOR];
t_css.borderStyle=tt_aV[BORDERSTYLE];
t_css.borderWidth=tt_aV[BORDERWIDTH]+"px";
}
if(tt_aV[BGCOLOR].length)
t_css.background=tt_aV[BGCOLOR];
if(tt_aV[BGIMG].length)
t_css.backgroundImage="url("+tt_aV[BGIMG]+")";
t_css.padding=tt_aV[PADDING]+"px";
t_css.textAlign=tt_aV[TEXTALIGN];
t_css=tt_aElt[6].style;
t_css.color=tt_aV[FONTCOLOR];
t_css.fontFamily=tt_aV[FONTFACE];
t_css.fontSize=tt_aV[FONTSIZE];
t_css.fontWeight=tt_aV[FONTWEIGHT];
t_css.background="";
t_css.textAlign=tt_aV[TEXTALIGN];
if(tt_aV[WIDTH]>0)
t_w=tt_aV[WIDTH]+((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1);
else
t_w=tt_GetDivW(tt_aElt[6])+((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1);
if(t_w>tt_w)
tt_w=t_w;
if(tt_aV[SHADOW])
{
var t_off;
tt_w+=tt_aV[SHADOWWIDTH];
t_off=tt_CalcShadowOffset();
t_css=tt_aElt[7].style;
t_css.top=t_top+"px";
t_css.left=t_off+"px";
t_css.width=(tt_w-t_off-tt_aV[SHADOWWIDTH])+"px";
t_css.height=tt_aV[SHADOWWIDTH]+"px";
t_css.background=tt_aV[SHADOWCOLOR];
t_css=tt_aElt[8].style;
t_css.top=t_off+"px";
t_css.left=(tt_w-tt_aV[SHADOWWIDTH])+"px";
t_css.width=tt_aV[SHADOWWIDTH]+"px";
t_css.background=tt_aV[SHADOWCOLOR];
}
tt_SetTipOpa(tt_aV[FADEIN]?0:tt_aV[OPACITY]);
tt_FixSize(t_top);
}
function tt_FixSize(t_offTop)
{
var t_wIn,t_wOut,t_i;
tt_aElt[0].style.width=tt_w+"px";
tt_aElt[0].style.pixelWidth=tt_w;
tt_h=tt_GetDivH(tt_aElt[0])+t_offTop;
t_wOut=tt_w-((tt_aV[SHADOW])?tt_aV[SHADOWWIDTH]:0);
if(tt_bBoxOld)
t_wIn=t_wOut;
else
t_wIn=t_wOut-((tt_aV[PADDING]+tt_aV[BORDERWIDTH])<<1);
tt_aElt[5].style.width=t_wIn+"px";
if(tt_aElt[1])
{
if(tt_bBoxOld)
t_wIn=t_wOut-(tt_aV[PADDING]<<1);
else
{
t_wOut-=(tt_aV[PADDING]<<1);
t_wIn=t_wOut;
}
tt_aElt[1].style.width=t_wOut+"px";
tt_aElt[2].style.width=t_wIn+"px";
}
if(tt_aElt[8])
tt_aElt[8].style.height=(tt_h-tt_CalcShadowOffset())+"px";
t_i=tt_aElt.length-1;
if(tt_aElt[t_i])
{
tt_aElt[t_i].style.width=tt_w+"px";
tt_aElt[t_i].style.height=tt_h+"px";
}
}
function tt_CalcShadowOffset()
{
return(Math.floor((tt_aV[SHADOWWIDTH]*4)/3));
}
function tt_StartMov()
{
var t_txt;
tt_DeAlt(tt_over);
tt_OpDeHref(tt_over);
t_txt="tt_ShowTip();";
if(tt_aV[STICKY]||!tt_aV[FOLLOWMOUSE])
t_txt+="tt_AddRemEvtFncEx(0, false);";
if(tt_aV[DURATION]>0)
t_txt+="tt_tDurt.Timer(\"tt_HideInit();\","+tt_aV[DURATION]+", true);";
tt_tShow.Timer(t_txt,tt_aV[DELAY],true);
tt_AddRemEvtFncEx(1,true);
if(tt_aV[CLICKCLOSE])
tt_AddEvtFnc(document,"mouseup",tt_HideInit);
}
function tt_DeAlt(t_el)
{
var t_aKid;
if(t_el.alt)
t_el.alt="";
if(t_el.title)
t_el.title="";
t_aKid=t_el.children||t_el.childNodes||null;
if(t_aKid)
{
for(var i=t_aKid.length;i;)
tt_DeAlt(t_aKid[--i]);
}
}
function tt_OpDeHref(t_el)
{
if(!tt_op78)
return;
if(tt_elDeHref)
tt_OpReHref();
while(t_el)
{
if(t_el.hasAttribute("href"))
{
t_el.t_href=t_el.getAttribute("href");
t_el.t_stats=window.status;
t_el.removeAttribute("href");
t_el.style.cursor="hand";
tt_AddEvtFnc(t_el,"mousedown",tt_OpReHref);
window.status=t_el.t_href;
tt_elDeHref=t_el;
break;
}
t_el=t_el.parentElement;
}
}
function tt_ShowTip()
{
var t_css=tt_aElt[0].style;
t_css.zIndex=Math.max((window.dd&&dd.z)?(dd.z+2):0,1010);
t_css.visibility="visible";
if(tt_aV[FADEIN])
tt_Fade(0,0,tt_aV[OPACITY],Math.round(tt_aV[FADEIN]/tt_aV[FADEINTERVAL]));
tt_ShowIfrm();
}
function tt_ShowIfrm()
{
if(tt_ie56)
{
var t_ifrm=tt_aElt[tt_aElt.length-1];
if(t_ifrm)
{
var t_css=t_ifrm.style;
t_css.zIndex=tt_aElt[0].style.zIndex-1;
t_css.width=tt_w+"px";
t_css.height=tt_h+"px";
t_css.display="block";
}
}
}
function tt_Move(t_e)
{
t_e=t_e||window.event||null;
if(!tt_op&&!tt_ie)
{
if(tt_bWait)
return;
tt_bWait=true;
tt_tWaitMov.Timer("tt_bWait = false;",1,true);
}
if(tt_aV[FIX])
{
tt_AddRemEvtFncEx(0,false);
tt_SetTipPos(tt_aV[FIX][0],tt_aV[FIX][1]);
}
else if(!tt_ExtCallFunc(t_e,ONMOUSEMOVE))
tt_SetTipPos(tt_PosX(t_e),tt_PosY(t_e));
if(!tt_over)
{
tt_over=t_e.target||t_e.srcElement;
if(tt_over)
tt_StartMov();
}
}
function tt_PosX(t_e)
{
var t_x;
t_x=(typeof(t_e.pageX)!=tt_u)?t_e.pageX:(t_e.clientX+tt_scrlX);
if(tt_aV[LEFT])
t_x-=tt_w+tt_aV[OFFSETX]-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0);
else
t_x+=tt_aV[OFFSETX];
if(t_x>tt_maxPosX)
t_x=tt_maxPosX;
return((t_x<tt_scrlX)?tt_scrlX:t_x);
}
function tt_PosY(t_e)
{
var t_yMus,t_y;
t_yMus=(typeof(t_e.pageY)!=tt_u)?t_e.pageY:(t_e.clientY+tt_scrlY);
if(tt_aV[ABOVE]&&(!tt_bJmpVert||tt_CalcPosYAbove(t_yMus)>=tt_scrlY+16))
t_y=tt_DoPosYAbove(t_yMus);
else if(!tt_aV[ABOVE]&&tt_bJmpVert&&tt_CalcPosYBeneath(t_yMus)>tt_maxPosY-16)
t_y=tt_DoPosYAbove(t_yMus);
else
t_y=tt_DoPosYBeneath(t_yMus);
if(t_y>tt_maxPosY)
t_y=tt_DoPosYAbove(t_yMus);
if(t_y<tt_scrlY)
t_y=tt_DoPosYBeneath(t_yMus);
return t_y;
}
function tt_DoPosYBeneath(t_yMus)
{
tt_bJmpVert=tt_aV[ABOVE];
return tt_CalcPosYBeneath(t_yMus);
}
function tt_DoPosYAbove(t_yMus)
{
tt_bJmpVert=!tt_aV[ABOVE];
return tt_CalcPosYAbove(t_yMus);
}
function tt_CalcPosYBeneath(t_yMus)
{
return(t_yMus+tt_aV[OFFSETY]);
}
function tt_CalcPosYAbove(t_yMus)
{
var t_dy=tt_aV[OFFSETY]-(tt_aV[SHADOW]?tt_aV[SHADOWWIDTH]:0);
if(tt_aV[OFFSETY]>0&&t_dy<=0)
t_dy=1;
return(t_yMus-tt_h-t_dy);
}
function tt_OnOut()
{
tt_AddRemEvtFncEx(1,false);
if(!(tt_aV[STICKY]&&tt_aElt[0].style.visibility=="visible"))
tt_HideInit();
}
function tt_HideInit()
{
tt_ExtCallFunc(0,ONHIDEINIT);
tt_AddRemEvtFncEx(0,false);
if(tt_flagOpa&&tt_aV[FADEOUT])
{
tt_tFade.EndTimer();
if(tt_opa)
{
var t_n=Math.round(tt_aV[FADEOUT]/(tt_aV[FADEINTERVAL]*(tt_aV[OPACITY]/tt_opa)));
tt_Fade(tt_opa,tt_opa,0,t_n);
return;
}
}
tt_tHide.Timer("tt_HideTip();",1,false);
}
function tt_OpReHref()
{
if(tt_elDeHref)
{
tt_elDeHref.setAttribute("href",tt_elDeHref.t_href);
tt_RemEvtFnc(tt_elDeHref,"mousedown",tt_OpReHref);
window.status=tt_elDeHref.t_stats;
tt_elDeHref=null;
}
}
function tt_Fade(t_a,t_now,t_z,t_n)
{
if(t_n)
{
t_now+=Math.round((t_z-t_now)/t_n);
if((t_z>t_a)?(t_now>=t_z):(t_now<=t_z))
t_now=t_z;
else
tt_tFade.Timer("tt_Fade("
+t_a+","+t_now+","+t_z+","+(t_n-1)
+")",
tt_aV[FADEINTERVAL],
true);
}
if(!t_now)
tt_HideTip();
else
tt_SetTipOpa(t_now);
}
function tt_SetTipOpa(t_opa)
{
tt_SetOpa(tt_aElt[5].style,t_opa);
if(tt_aElt[1])
tt_SetOpa(tt_aElt[1].style,t_opa);
if(tt_aV[SHADOW])
{
t_opa=Math.round(t_opa*0.8);
tt_SetOpa(tt_aElt[7].style,t_opa);
tt_SetOpa(tt_aElt[8].style,t_opa);
}
}
function tt_OnCloseBtnOver(t_iOver)
{
var t_css=tt_aElt[4].style;
t_iOver<<=1;
t_css.background=tt_aV[CLOSEBTNCOLORS][t_iOver];
t_css.color=tt_aV[CLOSEBTNCOLORS][t_iOver+1];
}
function tt_Int(t_x)
{
var t_y;
return(isNaN(t_y=parseInt(t_x))?0:t_y);
}
function tt_GetElt(t_id)
{
return(document.getElementById?document.getElementById(t_id)
:document.all?document.all[t_id]
:null);
}
function tt_AddRemEvtFncEx(t_typ,t_bAdd)
{
var t_PSet=t_bAdd?tt_AddEvtFnc:tt_RemEvtFnc;
if(t_typ)
{
if(t_bAdd!=tt_bOutFnc)
{
t_PSet(tt_over,"mouseout",tt_OnOut);
tt_bOutFnc=t_bAdd;
if(!t_bAdd)
tt_OpReHref();
}
}
else
{
if(t_bAdd!=tt_bMovFnc)
{
t_PSet(document,"mousemove",tt_Move);
tt_bMovFnc=t_bAdd;
}
}
}
Number.prototype.Timer=function(t_s,t_t,t_bUrge)
{
if(!this.value||t_bUrge)
this.value=window.setTimeout(t_s,t_t);
}
Number.prototype.EndTimer=function()
{
if(this.value)
{
window.clearTimeout(this.value);
this.value=0;
}
}
function tt_SetOpa(t_css,t_opa)
{
tt_opa=t_opa;
if(tt_flagOpa==1)
{
if(t_opa<100)
{
var t_bVis=t_css.visibility!="hidden";
t_css.zoom="100%";
if(!t_bVis)
t_css.visibility="visible";
t_css.filter="alpha(opacity="+t_opa+")";
if(!t_bVis)
t_css.visibility="hidden";
}
else
t_css.filter="";
}
else
{
t_opa/=100.0;
switch(tt_flagOpa)
{
case 2:
t_css.KhtmlOpacity=t_opa;break;
case 3:
t_css.KHTMLOpacity=t_opa;break;
case 4:
t_css.MozOpacity=t_opa;break;
case 5:
t_css.opacity=t_opa;break;
}
}
}
function tt_Err(t_sErr)
{
if(Debug)
alert("Tooltip Script Error Message:\n\n"+t_sErr);
}
function tt_Extension(t_a)
{
var t_n=t_a.length;
if(t_n&1)
{
tt_Err("Number of arguments passed to 'new tt_Extension()' must be even.");
return null;
}
tt_ExtCmdEnum();
this.aPFnc=new Array();
for(--t_n;t_n>0;t_n-=2)
this.aPFnc[t_a[t_n-1]]=t_a[t_n];
tt_aExt[tt_aExt.length]=this;
return this;
}
function tt_ExtCmdEnum()
{
var t_s;
for(var i in config)
{
t_s="window."+i.toString().toUpperCase();
if(eval("typeof("+t_s+") == tt_u"))
{
eval(t_s+" = "+tt_aV.length);
tt_aV[tt_aV.length]=null;
}
}
}
function tt_ExtCallFunc(t_arg,t_iFnc)
{
var t_ext;
for(var i=tt_aExt.length;i;)
{--i;
t_ext=tt_aExt[i];
if(t_ext.aPFnc[t_iFnc]&&t_ext.aPFnc[t_iFnc](t_arg))
return true;
}
return false;
}
tt_Init();

</script>
<div id="menuDiv"style="position: absolute; z-index: 5000; top: 0px; width: 100%"></div>
<div id="northContent">
<div id="frameContainer"></div>
</div>
<div id="westContent">
<img id="select"alt=""title="Select shapes"onclick="setMode('select', 'Selection');"src="../images/select.gif"name="select">
<img src="../images/blank.gif"alt="">
<img id="rect"alt=""title="Draw a rectangle"onclick="setMode('rect', 'Rectangle');"src="../images/rectangle.gif"name="rect">
<img src="../images/blank.gif"alt="">
<img id="roundrect"alt=""title="Draw a rounded rectangle"onclick="setMode('roundrect', 'Rounded Rectangle');"src="../images/roundrect.gif"/>
<img src="../images/blank.gif"alt=""/>
<img id="ellipse"alt=""title="Draw an ellipse"onclick="setMode('ellipse', 'Ellipse / Circle');"src="../images/circle.gif"name="ellipse">
<img src="../images/blank.gif"alt="">
<img id="line"title="Draw a line"onclick="setMode('line', 'Line');"alt=""src="../images/line.gif"name="line">
<img src="../images/blank.gif"alt="">
<img id="delete"alt=""title="Delete selected shape"onclick="deleteShape();"src="../images/delete.gif"name="delete">
<br>
<span>Fill:</span>
<div id="fillcolor"style="color: #ffffff"onclick="FillColorChange()">Set Color</div>
<span>Line:</span>
<div id="linecolor"style="color: #ffffff"onclick="LineColorChange()">Set Color</div>
<select id="linewidth"onchange="setLineWidth(this);">
<option value="1px">1px</option>
<option value="2px">2px</option>
<option value="3px">3px</option>
<option value="4px">4px</option>
<option value="5px">5px</option>
<option value="6px">6px</option>
<option value="7px">7px</option>
<option value="8px">8px</option>
<option value="9px">9px</option>
</select>
</div>
<div id="southContent">
<table border="0"><tr><td>
<fieldset style="width: 300px">
<legend>Canvas Properties</legend>
Height:<input type="text"style="width: 50px"id="cHeight"onchange="setCP()"onblur="setCP()"value="272">
Width:<input type="text"style="width: 50px"id="cWidth"onchange="setCP()"onblur="setCP()"value="480">
</fieldset></td><td>
<fieldset style="width: 200px">
<legend>Animation</legend>
Framerate:<input type="text"style="width: 50px"id="cFramerate"onblur="setFramerate()"value="12">
</fieldset></td></tr></table>
</div>
<div id="advancedContent">
<fieldset>
<legend>Script Executor</legend>
<textarea id="jsQuery"rows="2"cols="2"style="width: 100%"></textarea>
<br>
<input type="button"onclick="eval(document.getElementById('jsQuery').value);"value="Evaluate">
</fieldset>
</div>
<div id="eastContent">
<center>
<script type="text/javascript">
google_ad_client="pub-9279109908159341";
google_ad_width=120;
google_ad_height=240;
google_ad_format="120x240_as";
google_ad_type="text";
google_ad_channel="";
google_color_border="6699CC";
google_color_bg="C3D9FF";
google_color_link="FFFFFF";
google_color_text="AECCEB";
google_color_url="AECCEB";
</script>
<script type="text/javascript"src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script><br>
<br>
<script type="text/javascript">
google_ad_client="pub-9279109908159341";
google_ad_width=125;
google_ad_height=125;
google_ad_format="125x125_as_rimg";
google_cpa_choice="CAAQ0f2XhAIaCEQvQozkK1YVKK2293MwAA";
google_ad_channel="";
</script>
<script type="text/javascript"src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>
</div>
<div id="centerContent">
<div id="CanvasContainer"style="margin-left: auto; margin-right: auto;width: 480px; height: 272px;overflow:scrolling">
</div><center>
<br>
<img alt="<--"src="../images/player_rew.png"onclick="gotoframe(currentFrameSelection-1,1);">
<img alt="play"src="../images/player_play.png"onclick="playAnimation();">
<img alt="stop"src="../images/player_stop.png"onclick="stopAnimation();">
<img alt="-->"src="../images/player_fwd.png"onclick="gotoframe(currentFrameSelection+1,1);">
<br>
<div style="font-size:x-small"id="status"></div>
</center>
</div>
<div id="FlashPreview">
<center>
<div style="border: 1px black solid;"id="zFlashPreviewDiv"></div>
<br>
<table border="0"><tr><td><input type="button"id="swfPreBtn"onclick="preFlash();"value="Preview">
<input type="button"id="swfGenBtn"value="Export Animation"onclick="genFlash()"></td>
<td><div id="export"></div></td></tr></table>
<div id="previewStatus"style="font-size:x-small">Mode:Preview</div>
<div id="RevisionBrowserDiv"></div>
</center></div>
<div id="HELP"windowproperties="title:Help,resizable:true,closable:true,dragable:true,cookieName:HelpWindowCookie,xPos:300,yPos:400,minWidth:350,minHeight:150,activeTabId:AboutMain">
<div id="AboutMain"style="height:99%"class="DHTMLSuite_windowContent"tabproperties="tabTitle:About">
<div id="aboutdiv"style="width: 99%; height:99%"></div>
</div>
<div id="FAQMain"style="height:99%"class="DHTMLSuite_windowContent"tabproperties="tabTitle:FAQ">
<div id="FAQDiv"style="width: 99%; height:99%"></div>
</div>
<div id="ManualMain"style="height:99%"class="DHTMLSuite_windowContent"tabproperties="tabTitle:Manual">
<div id="ManualDiv"style="width: 99%; height:99%"></div>
</div>
<div id="SeizureMain"style="height:99%"class="DHTMLSuite_windowContent"tabproperties="tabTitle:Seizure">
<div id="seizurediv"style="width: 99%; height:99%">
<div style="position: relative;left: 40%; top: 40%"><font face="Verdana"size="20">SEIZURE!</font></div>
</div>
</div>
<div id="SupportMain"class="DHTMLSuite_windowContent"tabproperties="tabTitle:Support Development">
<div id="supportdiv"style="width: 99%; height:99%"></div>
</div>
</div>
<div id="ColorWindow"windowproperties="title:Color,resizable:false,closable:true,dragable:true,cookieName:ColorWindowCookie,xPos:300,yPos:400,minWidth:425,minHeight:350,activeTabId:AdvancedColorPicker">
<div id="AdvancedColorPicker"style="overflow:hidden"class="DHTMLSuite_windowContent"tabproperties="tabTitle:Advanced Color Picker">
</div>
<div id="ColorPalette"class="DHTMLSuite_windowContent"tabproperties="tabTitle:Color Palette">
</div>
</div>
<script type="text/javascript">
function showWin(Winid){
try{
HelpWin.show();
}catch(err){}
try{
HelpWin.activateTab(Winid);
}catch(err){}
try{
HelpWin.minimizeWindow();
}catch(err){}
try{
HelpWin.slideWindowToXAndY(1,1)
}catch(err){}
try{
HelpWin.close();
}catch(err){}
setTimeout("zSW()",1000)
}
function zSW(){
try{
HelpWin.show();
}catch(err){}
try{
HelpWin.maximizeWindow();
}catch(err){}
try{
HelpWin.slideWindowToXAndY(100,100)
}catch(err){}
}
function showSeizure(){
if(confirm("Warning: This might cause injury \n I, am not responsible for any damage caused/used by the application")){
showWin('SeizureMain');
}
}
var HelpModel=new DHTMLSuite.windowModel();
HelpModel.createWindowModelFromMarkUp('HELP');
var HelpWin=new DHTMLSuite.windowWidget();
HelpWin.addWindowModel(HelpModel);
HelpWin.init();
HelpWin.setStatusBarText('Help');
HelpWin.close();
var ColorModel=new DHTMLSuite.windowModel();
ColorModel.createWindowModelFromMarkUp('ColorWindow');
var ColorWin=new DHTMLSuite.windowWidget();
ColorWin.addWindowModel(ColorModel);
ColorWin.init();
ColorWin.setStatusBarText('Color');
ColorWin.close();
var currentPreviewColor;
var isinit=new Boolean();
isinit=false;
function setColorFromPallette(color)
{
colorWidget.setRgbColor(color.rgb);
setColor(color);
}
var Colorobj=document.getElementById('linecolor');
function LineColorChange(){
ColorWin.close();
ColorWin.show();
ColorWin.maximizeWindow();
Colorobj=document.getElementById('linecolor');
}
function FillColorChange(){
ColorWin.close();
ColorWin.show();
ColorWin.maximizeWindow();
Colorobj=document.getElementById('fillcolor');
}
function setColor(color)
{
Colorobj.style.backgroundColor=color.rgb;
currentPreviewColor=color.rgb;
if(color.name){
Colorobj.innerHTML=color.name;
}else{
Colorobj.innerHTML=color.rgb;
}
if(isinit==true){
setFillColor();
setLineColor();
}
if(isinit==false){
FillColorChange();
}
}
var colorWidget=new DHTMLSuite.colorWidget({callbackOnChangeRgb:'setColor',hueSliderPosition:'vertical'});
colorWidget.init();
colorWidget.setRgbColor('#000000');
var grayscalePalette=new DHTMLSuite.colorPalette({callbackOnColorClick:'setColorFromPallette'});
grayscalePalette.addGrayScaleColors(32);
var namedColorPalette=new DHTMLSuite.colorPalette({callbackOnColorClick:'setColorFromPallette'});
namedColorPalette.addAllNamedColors()
var webColorPalette=new DHTMLSuite.colorPalette({callbackOnColorClick:'setColorFromPallette'});
webColorPalette.addAllWebColors();
webColorPalette.init();
grayscalePalette.init();
namedColorPalette.init();
ColorWin.appendContent('AdvancedColorPicker',colorWidget.getDivElement());
ColorWin.appendContent('ColorPalette',webColorPalette.getDivElement());
ColorWin.appendContent('ColorPalette',grayscalePalette.getDivElement());
ColorWin.appendContent('ColorPalette',namedColorPalette.getDivElement());
var paneModel=new DHTMLSuite.paneSplitterModel();
var paneWest=new DHTMLSuite.paneSplitterPaneModel({position:"west",id:"westPane",size:80,minSize:10,maxSize:300,scrollbars:false,scrollbars:false});
paneWest.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:"westContent",htmlElementId:'westContent',title:'Tools',tabTitle:'Tools'}));
paneModel.addPane(paneWest);
var paneEast=new DHTMLSuite.paneSplitterPaneModel({position:"east",id:"eastPane",size:160,minSize:10,maxSize:500,closable:false,scrollbars:false});
paneEast.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:"eastContent",htmlElementId:'eastContent',title:'Ads',tabTitle:'Ads'}));
paneModel.addPane(paneEast);
var paneSouth=new DHTMLSuite.paneSplitterPaneModel({position:"south",id:"southPane",size:160,minSize:10,maxSize:500,resizable:true,scrollbars:false});
paneSouth.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:"southContent",htmlElementId:'southContent',title:'Properties',tabTitle:'Properties'}));
paneSouth.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:"advancedContent",htmlElementId:'advancedContent',title:'Advanced',tabTitle:'Advanced'}));
paneModel.addPane(paneSouth);
var paneNorth=new DHTMLSuite.paneSplitterPaneModel({position:"north",id:"northPane",size:150,scrollbars:true,resizable:true});
paneNorth.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:"northContent",htmlElementId:'northContent',title:' ',collapseable:false}));
paneModel.addPane(paneNorth);
var paneCenter=new DHTMLSuite.paneSplitterPaneModel({position:"center",id:"centerPane",callbackOnTabSwitch:'CenterCallback'});
paneCenter.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:'center',htmlElementId:'centerContent',title:'',tabTitle:'Canvas'}));
paneCenter.addContent(new DHTMLSuite.paneSplitterContentModel({closable:false,id:'swfpreview',htmlElementId:'FlashPreview',title:'',tabTitle:'Preview/Export'}));
paneModel.addPane(paneCenter);
var paneSplitter=new DHTMLSuite.paneSplitter();
paneSplitter.addModel(paneModel);
paneSplitter.init();
function CenterCallback(modelObj,action,contentObj)
{
$('export').innerHTML="";
if(contentObj.id=='swfpreview'){
preFlash();
if(isIE()==true){
setTimeout("preFlash()",1000)
setTimeout("preFlash()",5000)
}
}
}
var menuModel=new DHTMLSuite.menuModel();
menuModel.addItem(1,'File','../images/disk.gif','',0,'','','',100);
menuModel.addItem(2,'Edit','','',0,'','','',150);
menuModel.addItem(3,'View','','',0,'','','',150);
menuModel.addItem(4,'Tools','','',0,'','','',150);
menuModel.addItem(5,'Timeline','','',0,'','','',160);
menuModel.addItem(40,'Animation','','',0,'','','',160);
menuModel.addItem(6,'Help','','',0,'','','',100);
menuModel.addItem(7,'Save','../images/disk.gif','',1,'','progress()');
menuModel.addItem(8,'Save as','../images/disk.gif','',1,'','progress()');
menuModel.addItem(9,'Open','../images/open.gif','',1,'','progress()');
menuModel.addItem(10,'Export','../images/flash.gif','',1,'','genFlash()');
menuModel.addItem(24,'Undo','../images/arrow_undo.png','',2,'','progress()');
menuModel.addItem(12,'Animation','../images/flash.gif','',3,'','playAnimation()');
menuModel.addItem(13,'Clear Timeline','../images/cancel.png','',4,'','ClearAllKeyframes()');
menuModel.addItem(53,'Color Picker','../images/color_wheel.png','',4,'','FillColorChange()');
menuModel.addItem(14,'Terminal Interface','../images/application_xp_terminal.png','',4,'','paneSplitter.showContent("advancedContent")');
menuModel.addItem(15,'To Keyframe','../images/add.png','',5,'','toKeyframe()');
menuModel.addItem(16,'Delete Keyframe','../images/cancel.png','',5,'','removeKeyframe()');
menuModel.addItem(17,'Refresh Data','../images/action_refresh.gif','',5,'','fullgotoframe()');
menuModel.addItem(18,'New Layer','../images/add.png','',5,'','addLayer()');
menuModel.addItem(19,'Play','../images/control_play_blue.png','',40,'','playAnimation()');
menuModel.addItem(20,'Stop','../images/control_stop_blue.png','',40,'','stopAnimation()');
menuModel.addItem(21,'Next Frame','../images/control_fastforward_blue.png','',40,'','gotoframe(currentFrameSelection+1,1)');
menuModel.addItem(22,'Previous Frame','../images/control_rewind_blue.png','',40,'','gotoframe(currentFrameSelection-1,1)');
menuModel.addItem(55,'Last Frame','../images/control_end_blue.png','',40,'','gotoframe(totalFrames,1)');
menuModel.addItem(54,'First Frame','../images/control_start_blue.png','',40,'','gotoframe(1,1)');
menuModel.addItem(56,'Set Last Frame','','',40,'','changeTotalFrameValue(currentFrameSelection)');
menuModel.addItem(30,'About','','',6,'','showWin("AboutMain")');
menuModel.addItem(31,'Manual','../images/help.png','',6,'','showWin("ManualMain")');
menuModel.addItem(32,'FAQ','../images/help.png','',6,'','showWin("FAQMain")');
menuModel.addItem(33,'Seizure','','',6,'','showSeizure()');
menuModel.addItem(34,'Support','../images/money.png','',6,'','showWin("SupportMain")');
menuModel.init();
var menuBar=new DHTMLSuite.menuBar();
menuBar.addMenuItems(menuModel);
menuBar.setTarget('menuDiv');
menuBar.init();
var timelineContextMenuModel=new DHTMLSuite.menuModel();
timelineContextMenuModel.addItem(1,'To Keyframe','../images/add.png','','',false,'toKeyframe()');
timelineContextMenuModel.addItem(2,'Add Layer','../images/add.png','','',false,'addLayer()');
timelineContextMenuModel.addItem(3,'Remove Keyframe','../images/cancel.png','','',false,'removeKeyframe()');
timelineContextMenuModel.init();
var canvasContextMenuModel=new DHTMLSuite.menuModel();
canvasContextMenuModel.addItem(1,'Next Frame','../images/control_fastforward_blue.png','','',false,'gotoframe(currentFrameSelection+1,1)');
canvasContextMenuModel.addItem(2,'Previous Frame','../images/control_rewind_blue.png','','',false,'gotoframe(currentFrameSelection-1,1)');
canvasContextMenuModel.addItem(3,'Play','../images/control_play_blue.png','','',false,'playAnimation()');
canvasContextMenuModel.init();
var contextMenu=new DHTMLSuite.contextMenu();
DHTMLSuite.commonObj.setCssCacheStatus(false);
contextMenu.setWidth(160);
contextMenu.attachTo('centerContent',canvasContextMenuModel);
contextMenu.attachTo('northContent',timelineContextMenuModel);
contextMenu.attachTo('frameContainer',timelineContextMenuModel);
contextMenu.attachTo('DHTMLSuite_paneContentnorth',timelineContextMenuModel);
var qa=new Array();var i=1;
qa[1]='red';qa[2]='blue';qa[3]='green';
function qc(){
document.getElementById("seizurediv").style.backgroundColor=qa[i];
i++;if(i>3){i=1}setTimeout('qc()',10)}qc();
</script>
</body>